var x=(g,v,r)=>new Promise((f,u)=>{var l=a=>{try{i(r.next(a))}catch(_){u(_)}},m=a=>{try{i(r.throw(a))}catch(_){u(_)}},i=a=>a.done?f(a.value):Promise.resolve(a.value).then(l,m);i((r=r.apply(g,v)).next())});import{d as M,u as V,r as b,b as z,aa as R,o as E,x as N,w as s,j as t,i as p,dV as j,k as F,l as G,U as P,F as S,D as T,G as A,_ as H,B as I,E as J}from"./index-BUaCiTCS.js";const O=M({__name:"RechargeModal",props:{visible:{type:Boolean},userData:{}},emits:["update:visible","success"],setup(g,{emit:v}){const r=V(),f=b(),u=b(!1),l=b(!1),m=g,i=v,a=z({id:0,money:0,type:1,remarks:"",user_remarks:""}),_={money:{required:!0,type:"number",message:"请输入充值金额",trigger:["blur","change"],validator:(o,e)=>!e||e<=0?new Error("充值金额必须大于0"):!0},type:{required:!0,type:"number",message:"请选择充值类型",trigger:["change"]},remarks:{required:!0,message:"请输入备注",trigger:["blur","input"]},user_remarks:{required:!0,message:"请输入用户端备注",trigger:["blur","input"]}};R(()=>m.visible,o=>{l.value=o,o&&m.userData&&(a.id=m.userData.id,a.money=0,a.type=1,a.remarks="",a.user_remarks="")}),R(l,o=>{i("update:visible",o)});const U=()=>{l.value=!1},B=()=>x(this,null,function*(){var o;try{yield(o=f.value)==null?void 0:o.validate(),u.value=!0;const e=yield j(a);e.code===1?(r.success("充值成功"),l.value=!1,i("success")):r.error(e.msg||"充值失败")}catch(e){console.error("表单提交错误:",e)}finally{u.value=!1}});return(o,e)=>{const c=F,d=G,C=P,y=S,k=T,D=A,q=H,w=I,h=J;return E(),N(h,{show:l.value,"onUpdate:show":e[4]||(e[4]=n=>l.value=n),"show-icon":!1,preset:"dialog",title:"用户充值",style:{width:"500px"}},{action:s(()=>[t(k,null,{default:s(()=>[t(w,{onClick:U},{default:s(()=>e[9]||(e[9]=[p("取消")])),_:1}),t(w,{type:"primary",loading:u.value,onClick:B},{default:s(()=>e[10]||(e[10]=[p("确定")])),_:1},8,["loading"])]),_:1})]),default:s(()=>[t(q,{model:a,rules:_,ref_key:"formRef",ref:f,"label-placement":"left","label-width":100,class:"py-4"},{default:s(()=>[t(d,{label:"用户名"},{default:s(()=>{var n;return[t(c,{value:(n=o.userData)==null?void 0:n.username,disabled:""},null,8,["value"])]}),_:1}),t(d,{label:"充值金额",path:"money"},{default:s(()=>[t(C,{value:a.money,"onUpdate:value":e[0]||(e[0]=n=>a.money=n),min:0,precision:2,placeholder:"请输入充值金额",style:{width:"100%"}},{prefix:s(()=>e[5]||(e[5]=[p("¥")])),_:1},8,["value"])]),_:1}),t(d,{label:"充值类型",path:"type"},{default:s(()=>[t(D,{value:a.type,"onUpdate:value":e[1]||(e[1]=n=>a.type=n)},{default:s(()=>[t(k,null,{default:s(()=>[t(y,{value:1},{default:s(()=>e[6]||(e[6]=[p("真实")])),_:1}),t(y,{value:2},{default:s(()=>e[7]||(e[7]=[p("虚拟")])),_:1}),t(y,{value:3},{default:s(()=>e[8]||(e[8]=[p("系统")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(d,{label:"备注",path:"remarks"},{default:s(()=>[t(c,{type:"textarea",placeholder:"请输入备注",value:a.remarks,"onUpdate:value":e[2]||(e[2]=n=>a.remarks=n),autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1}),t(d,{label:"用户端备注",path:"user_remarks"},{default:s(()=>[t(c,{type:"textarea",placeholder:"请输入用户端备注",value:a.user_remarks,"onUpdate:value":e[3]||(e[3]=n=>a.user_remarks=n),autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}});export{O as _};
