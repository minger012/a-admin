var ve=Object.defineProperty;var J=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var Q=(h,i,u)=>i in h?ve(h,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):h[i]=u,ee=(h,i)=>{for(var u in i||(i={}))he.call(i,u)&&Q(h,u,i[u]);if(J)for(var u of J(i))ye.call(i,u)&&Q(h,u,i[u]);return h};var F=(h,i,u)=>new Promise((t,y)=>{var C=v=>{try{w(u.next(v))}catch(D){y(D)}},U=v=>{try{w(u.throw(v))}catch(D){y(D)}},w=v=>v.done?t(v.value):Promise.resolve(v.value).then(C,U);w((u=u.apply(h,i)).next())});import{B as ge}from"./Table-yWmXchEz.js";import{d as W,o as S,c as Y,a as N,s as d,B as b,D as K,v as be,u as H,b as te,r as m,x as I,w as a,j as l,i as P,z as L,h as p,U as B,a4 as X,N as G,y as Z,a5 as le,F as we,G as xe,l as ae,C as ne,$ as oe,n as ue,a6 as ke,X as Pe,q as se,K as $e,V as Ce,a7 as Ue,Y as De,Z as ze,E as Me,a8 as Te,a9 as Se}from"./index-BUaCiTCS.js";import{_ as Be}from"./BasicForm-GOTDwX7A.js";import{u as Ne}from"./useForm-DHO36Kak.js";import{_ as Ae}from"./EditUserModal.vue_vue_type_script_setup_true_lang-CaJw1KDH.js";import{_ as Ie}from"./EditPwdModal.vue_vue_type_script_setup_true_lang-D9WOlCiK.js";import{_ as Re}from"./EditPayPwdModal.vue_vue_type_script_setup_true_lang-BPDYhFVZ.js";import{_ as qe}from"./EditBankModal.vue_vue_type_script_setup_true_lang-BlZtmNCO.js";import{_ as Ve}from"./RechargeModal.vue_vue_type_script_setup_true_lang-3LWKLlbw.js";import{_ as Oe}from"./DeductModal.vue_vue_type_script_setup_true_lang-Bzs5-Fqg.js";import{_ as Ee}from"./SendCouponModal.vue_vue_type_script_setup_true_lang-DiaX1aDw.js";import{p as ie}from"./plan-XBSWO05t.js";import{P as re}from"./PlusOutlined-C1XCBWs4.js";import{D as de}from"./DeleteOutlined-C4VDLv2p.js";import"./vuedraggable.umd-DngLu4Z2.js";import"./useDesignSetting-IaSTxNx8.js";import"./propTypes-CzR-Mwfa.js";import"./componentSetting-CQq0JJwW.js";import"./index-CEAvHuK6.js";import"./DownOutlined-oqXgzy95.js";import"./coupon-BHtdMrJn.js";const Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Le=N("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4l-66.1-.3c-4.4 0-8 3.5-8 8c0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4l66 .3c4.4 0 8-3.5 8-8c0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:"currentColor"},null,-1),je=N("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448s448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z",fill:"currentColor"},null,-1),Ge=[Le,je],Ke=W({name:"CloseCircleOutlined",render:function(i,u){return S(),Y("svg",Fe,Ge)}}),We={0:"停用",1:"正常",2:"未激活"},Xe={0:"error",1:"success",2:"warning"},Ye=h=>[{title:"用户ID",key:"id",width:100,fixed:"left"},{title:"用户名",key:"username",width:120,fixed:"left"},{title:"用户昵称",key:"name",width:120},{title:"用户简称",key:"short_name",width:120},{title:"头像",key:"image",width:120,render(i){return i.image?d("img",{src:i.image,style:{width:"80px",height:"80px",borderRadius:"50%"}}):""}},{title:"手机号",key:"phone",width:130},{title:"所属管理者",key:"admin_name",width:120},{title:"授权码",key:"code",width:120},{title:"上级用户ID",key:"pid",width:120},{title:"代理管理",key:"agent_management",width:100,render(i){return d(b,{text:!0,type:"primary",size:"small"},{default:()=>"查看"})}},{title:"语言偏好",key:"lang",width:100},{title:"FB_ID",key:"fb_id",width:180},{title:"提现方式",key:"bank",width:150,render(i){return d(K,{size:"small"},{default:()=>[d(b,{text:!0,type:"primary",size:"small"},{default:()=>"查看"}),d(b,{text:!0,type:"info",size:"small",onClick:()=>{var u;return(u=h==null?void 0:h.onEditBank)==null?void 0:u.call(h,i)}},{default:()=>"编辑"})]})}},{title:"可用余额",key:"money",width:120,render(i){return`¥${(i.money||0).toFixed(2)}`}},{title:"状态",key:"state",width:100,render(i){return d(be,{type:Xe[i.state]||"default",bordered:!1},{default:()=>We[i.state]||"未知"})}},{title:"用户视角",key:"user_perspective",width:120,render(i){return d(K,{size:"small",vertical:!0},{default:()=>[d(b,{text:!0,type:"primary",size:"small"},{default:()=>"广告中心"}),d(b,{text:!0,type:"info",size:"small"},{default:()=>"计划管理"})]})}},{title:"用户IP",key:"last_login_ip",width:140}],Ze={class:"border-[1px] rounded-lg"},He={class:"flex justify-between p-3 border-b-[1px] border-[#e7e7e7]"},Je={class:"font-semibold text-base"},Qe={class:"p-3"},et=W({__name:"BatchDispatch",props:{uid:{}},setup(h){const i=h,u=H(),t=te({matchType:"all",amountType:"fixed",minAmount:null,maxAmount:null,batchCount:1,officialPush:!1,rate:null,releaseTime:null,selectedPlans:[]}),y=m([]),C=m(!1),U=m(!1),w=m(!1),v=m([]),D=m([]),R=[{title:"序号",key:"index",width:80,render:(o,e)=>e+1},{title:"计划名称",key:"plan_name",width:160,render:o=>`${o.plan_id}:${o.plan_name}`},{title:"金额范围",key:"amount",width:120,render:o=>`¥${o.min} - ¥${o.max}`},{title:"利润率",key:"rate",width:120,render:o=>d(B,{value:o.rate,onUpdateValue:e=>{o.rate=e!=null?e:0},min:0,suffix:()=>"%",style:{width:"100%"}})},{title:"投放时间",key:"cd",width:120,render:o=>d(B,{value:o.cd,onUpdateValue:e=>{o.cd=e!=null?e:0},min:0,suffix:()=>"分",style:{width:"100%"}})},{title:"官方推送",key:"officialPush",width:100,render:o=>d(X,{value:o.officialPush,onUpdateValue:e=>{o.officialPush=e}})},{title:"操作",key:"action",width:70,fixed:"right",render:(o,e)=>d(b,{text:!0,type:"error",onClick:()=>s(e)},{icon:()=>d(G,null,{default:()=>d(de)})})}];function T(){return F(this,null,function*(){w.value=!0;try{const o=yield ie({page:"1",pageSize:"999999",state:1});o.code===1&&(v.value=o.data.list||[],D.value=v.value.map(e=>({label:`${e.id}:${e.name}`,value:e.id})))}catch(o){console.error("获取计划列表失败:",o)}finally{w.value=!1}})}function q(o,e,f){if(f==="fixed")return[o,e];if(e-o<100)return[o,e];const A=e-100,x=Math.floor(Math.random()*(A-o+1))+o,O=Math.floor((e-x)/100),k=Math.floor(Math.random()*O)+1,c=x+k*100;return[x,Math.min(c,e)]}function V(){return F(this,null,function*(){if(!t.minAmount||!t.maxAmount){u.error("请输入金额范围");return}if(t.minAmount>=t.maxAmount){u.error("最低金额必须小于最高金额");return}if(!t.batchCount||t.batchCount<1){u.error("请输入有效的批量数量");return}if(t.matchType==="random"&&t.selectedPlans.length===0){u.error("请至少选择一个计划");return}C.value=!0;try{if(v.value.length===0&&(yield T()),v.value.length===0){u.error("没有可用的计划");return}let o=[];if(t.matchType==="all"?o=v.value:o=v.value.filter(f=>t.selectedPlans.includes(f.id)),o.length===0){u.error("没有可用的计划");return}const e=[];for(let f=0;f<t.batchCount;f++){const $=o[Math.floor(Math.random()*o.length)],[A,x]=q(t.minAmount,t.maxAmount,t.amountType);e.push({plan_id:$.id,plan_name:$.name,min:A,max:x,cd:t.releaseTime||0,officialPush:t.officialPush,rate:t.rate||0})}y.value.push(...e),u.success(`已生成 ${e.length} 个计划，当前共 ${y.value.length} 个`)}catch(o){u.error("生成计划失败"),console.error(o)}finally{C.value=!1}})}function s(o){y.value.splice(o,1)}function n(){y.value=[]}function z(){return F(this,null,function*(){if(y.value.length===0){u.error("请先生成计划");return}U.value=!0;try{const o={uid:i.uid,plan:y.value.map(f=>({plan_id:f.plan_id,min:f.min,max:f.max,cd:f.cd,form:f.officialPush?2:1,rate:f.rate}))},e=yield le(o);e.code===1?(u.success("派单成功"),y.value=[],t.minAmount=null,t.maxAmount=null,t.batchCount=1,t.rate=null,t.releaseTime=null):u.error(e.msg||"派单失败")}catch(o){u.error("派单失败"),console.error(o)}finally{U.value=!1}})}return T(),(o,e)=>{const f=we,$=K,A=xe,x=ae,O=ne,k=oe;return S(),I($,{class:"pt-3",vertical:""},{default:a(()=>[l(x,{label:"计划匹配方式"},{default:a(()=>[l(A,{value:t.matchType,"onUpdate:value":e[0]||(e[0]=c=>t.matchType=c)},{default:a(()=>[l($,null,{default:a(()=>[l(f,{value:"all"},{default:a(()=>e[9]||(e[9]=[P("全部随机匹配")])),_:1}),l(f,{value:"random"},{default:a(()=>e[10]||(e[10]=[P("指定计划随机")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t.matchType==="random"?(S(),I(x,{key:0,label:"选择计划范围",required:""},{default:a(()=>[l(O,{value:t.selectedPlans,"onUpdate:value":e[1]||(e[1]=c=>t.selectedPlans=c),multiple:"",filterable:"",options:D.value,placeholder:"请选择计划",loading:w.value,clearable:""},null,8,["value","options","loading"])]),_:1})):L("",!0),l(x,{label:"金额设置方式"},{default:a(()=>[l(A,{value:t.amountType,"onUpdate:value":e[2]||(e[2]=c=>t.amountType=c)},{default:a(()=>[l($,null,{default:a(()=>[l(f,{value:"fixed"},{default:a(()=>e[11]||(e[11]=[P("固定金额的范围")])),_:1}),l(f,{value:"random"},{default:a(()=>e[12]||(e[12]=[P("范围内随机(100整数)")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),l($,null,{default:a(()=>[l(x,{label:"最低",required:""},{default:a(()=>[l(p(B),{value:t.minAmount,"onUpdate:value":e[3]||(e[3]=c=>t.minAmount=c),min:0,placeholder:"请输入最低金额","show-button":!1,style:{width:"200px"}},{prefix:a(()=>e[13]||(e[13]=[P("¥")])),_:1},8,["value"])]),_:1}),l(x,{label:"最高",required:""},{default:a(()=>[l(p(B),{value:t.maxAmount,"onUpdate:value":e[4]||(e[4]=c=>t.maxAmount=c),min:0,placeholder:"请输入最高金额","show-button":!1,style:{width:"200px"}},{prefix:a(()=>e[14]||(e[14]=[P("¥")])),_:1},8,["value"])]),_:1})]),_:1}),l($,null,{default:a(()=>[l(x,{label:"批量数量",required:""},{default:a(()=>[l(p(B),{value:t.batchCount,"onUpdate:value":e[5]||(e[5]=c=>t.batchCount=c),min:1,placeholder:"请输入批量数量","show-button":!1,style:{width:"200px"}},null,8,["value"])]),_:1}),l(x,{label:"官方推送"},{default:a(()=>[l(p(X),{value:t.officialPush,"onUpdate:value":e[6]||(e[6]=c=>t.officialPush=c)},null,8,["value"])]),_:1})]),_:1}),l($,null,{default:a(()=>[l(x,{label:"投放利润"},{default:a(()=>[l(p(B),{value:t.rate,"onUpdate:value":e[7]||(e[7]=c=>t.rate=c),min:0,placeholder:"请输入利润率",style:{width:"200px"},"show-button":!1},{suffix:a(()=>e[15]||(e[15]=[P("%")])),_:1},8,["value"])]),_:1}),l(x,{label:"投放时间"},{default:a(()=>[l(p(B),{value:t.releaseTime,"onUpdate:value":e[8]||(e[8]=c=>t.releaseTime=c),min:0,placeholder:"请输入投放时间",style:{width:"200px"},"show-button":!1},{suffix:a(()=>e[16]||(e[16]=[P("分钟")])),_:1},8,["value"])]),_:1})]),_:1}),l(p(b),{type:"primary",class:"mb-3",onClick:V,loading:C.value},{icon:a(()=>[l(p(G),null,{default:a(()=>[l(p(re))]),_:1})]),default:a(()=>[e[17]||(e[17]=P(" 生成计划 "))]),_:1},8,["loading"]),N("div",Ze,[N("div",He,[N("div",Je,"批量已添加计划汇总（"+Z(y.value.length)+"）",1),l($,null,{default:a(()=>[l(p(b),{text:"",type:"error",onClick:n},{default:a(()=>e[18]||(e[18]=[P(" 清除全部 ")])),_:1})]),_:1})]),N("div",Qe,[l(k,{columns:R,data:y.value,pagination:!1,bordered:!1,"scroll-x":960},null,8,["data"])])]),y.value.length>0?(S(),I(p(b),{key:1,type:"primary",size:"large",onClick:z,loading:U.value,class:"mt-3",block:""},{default:a(()=>e[19]||(e[19]=[P(" 派单 ")])),_:1},8,["loading"])):L("",!0)]),_:1})}}}),tt=ue(et,[["__scopeId","data-v-08e4bc2c"]]),lt={class:"flex items-center justify-between"},at={class:"font-medium"},nt={key:2,class:"border-[1px] rounded-lg"},ot={class:"flex justify-between p-3 border-b-[1px] border-[#e7e7e7]"},ut={class:"font-semibold text-base"},st={class:"p-3"},it=W({__name:"ManualDispatch",props:{uid:{}},setup(h){const i=h,u=H(),t=m([]),y=m(!1),C=m(!1),U=m([]),w=m([]),v=[{title:"序号",key:"index",width:80,render:(s,n)=>n+1},{title:"计划名称",key:"plan_name",width:160,render:s=>{const n=U.value.find(z=>z.id===s.plan_id);return n?`${n.id}:${n.name}`:"-"}},{title:"金额范围",key:"amount",width:120,render:s=>`¥${s.min||0} - ¥${s.max||0}`},{title:"利润率",key:"rate",width:120,render:s=>d(B,{value:s.rate,onUpdateValue:n=>{s.rate=n!=null?n:0},min:0,showButton:!1,suffix:()=>"%",style:{width:"100%"}})},{title:"投放时间",key:"cd",width:120,render:s=>d(B,{value:s.cd,onUpdateValue:n=>{s.cd=n!=null?n:0},min:0,showButton:!1,suffix:()=>"分",style:{width:"100%"}})},{title:"官方推送",key:"officialPush",width:100,render:s=>d(X,{value:s.officialPush,onUpdateValue:n=>{s.officialPush=n}})},{title:"操作",key:"action",width:70,fixed:"right",render:(s,n)=>d(b,{text:!0,type:"error",onClick:()=>T(n)},{icon:()=>d(G,null,{default:()=>d(de)})})}];function D(){return F(this,null,function*(){C.value=!0;try{const s=yield ie({page:"1",pageSize:"999999",state:1});s.code===1&&(U.value=s.data.list||[],w.value=U.value.map(n=>({label:`${n.id}:${n.name}`,value:n.id})))}catch(s){console.error("获取计划列表失败:",s)}finally{C.value=!1}})}function R(){t.value.push({plan_id:null,min:null,max:null,cd:null,officialPush:!1,rate:null})}function T(s){t.value.splice(s,1)}function q(){t.value=[]}function V(){return F(this,null,function*(){for(let s=0;s<t.value.length;s++){const n=t.value[s];if(!n.plan_id){u.error(`计划 #${s+1}: 请选择计划`);return}if(n.min===null||n.min===void 0){u.error(`计划 #${s+1}: 请输入最低金额`);return}if(n.max===null||n.max===void 0){u.error(`计划 #${s+1}: 请输入最高金额`);return}if(n.min>=n.max){u.error(`计划 #${s+1}: 最低金额必须小于最高金额`);return}if(n.cd===null||n.cd===void 0){u.error(`计划 #${s+1}: 请输入投放时间`);return}if(n.rate===null||n.rate===void 0){u.error(`计划 #${s+1}: 请输入投放利润`);return}}y.value=!0;try{const s={uid:i.uid,plan:t.value.map(z=>({plan_id:z.plan_id,min:z.min,max:z.max,cd:z.cd,form:z.officialPush?2:1,rate:z.rate}))},n=yield le(s);n.code===1?(u.success("派单成功"),t.value=[]):u.error(n.msg||"派单失败")}catch(s){u.error("派单失败"),console.error(s)}finally{y.value=!1}})}return D(),(s,n)=>{const z=ne,o=ae,e=K,f=se,$=$e,A=Ce,x=Ue,O=oe;return S(),I(e,{vertical:""},{default:a(()=>[N("div",lt,[N("span",at,"已添加计划 ("+Z(t.value.length)+")",1),l(p(b),{size:"small",onClick:R},{icon:a(()=>[l(p(G),null,{default:a(()=>[l(p(re))]),_:1})]),default:a(()=>[n[0]||(n[0]=P(" 添加计划 "))]),_:1})]),t.value.length>0?(S(),I(A,{key:0,cols:2,"x-gap":12,"y-gap":12},{default:a(()=>[(S(!0),Y(Pe,null,ke(t.value,(k,c)=>(S(),I($,{key:c},{default:a(()=>[l(f,{size:"small",title:`计划 #${c+1}`},{"header-extra":a(()=>[l(p(b),{text:"",type:"error",onClick:M=>T(c)},{icon:a(()=>[l(p(G),null,{default:a(()=>[l(p(Ke))]),_:1})]),_:2},1032,["onClick"])]),default:a(()=>[l(e,{vertical:""},{default:a(()=>[l(o,{label:"计划选择",required:""},{default:a(()=>[l(z,{value:k.plan_id,"onUpdate:value":M=>k.plan_id=M,filterable:"",options:w.value,placeholder:"请选择计划",loading:C.value},null,8,["value","onUpdate:value","options","loading"])]),_:2},1024),l(e,null,{default:a(()=>[l(o,{label:"最低",required:""},{default:a(()=>[l(p(B),{value:k.min,"onUpdate:value":M=>k.min=M,min:0,"show-button":!1,placeholder:"最低金额",style:{width:"180px"}},{prefix:a(()=>n[1]||(n[1]=[P("¥")])),_:2},1032,["value","onUpdate:value"])]),_:2},1024),l(o,{label:"最高",required:""},{default:a(()=>[l(p(B),{value:k.max,"onUpdate:value":M=>k.max=M,min:0,"show-button":!1,placeholder:"最高金额",style:{width:"180px"}},{prefix:a(()=>n[2]||(n[2]=[P("¥")])),_:2},1032,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024),l(o,{label:"官方推送"},{default:a(()=>[l(p(X),{value:k.officialPush,"onUpdate:value":M=>k.officialPush=M},null,8,["value","onUpdate:value"])]),_:2},1024),l(e,null,{default:a(()=>[l(o,{label:"投放利润",required:""},{default:a(()=>[l(p(B),{value:k.rate,"onUpdate:value":M=>k.rate=M,min:0,"show-button":!1,placeholder:"利润率",style:{width:"180px"}},{suffix:a(()=>n[3]||(n[3]=[P("%")])),_:2},1032,["value","onUpdate:value"])]),_:2},1024),l(o,{label:"投放时间",required:""},{default:a(()=>[l(p(B),{value:k.cd,"onUpdate:value":M=>k.cd=M,min:0,"show-button":!1,placeholder:"投放时间",style:{width:"180px"}},{suffix:a(()=>n[4]||(n[4]=[P("分钟")])),_:2},1032,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})):L("",!0),t.value.length===0?(S(),I(x,{key:1,description:"暂无计划，点击上方【添加计划】按钮开始添加",style:{padding:"60px 0"}})):L("",!0),t.value.length>0?(S(),Y("div",nt,[N("div",ot,[N("div",ut,"手动已添加计划汇总（"+Z(t.value.length)+"）",1),l(e,null,{default:a(()=>[l(p(b),{text:"",type:"error",onClick:q},{default:a(()=>n[5]||(n[5]=[P(" 清除全部 ")])),_:1})]),_:1})]),N("div",st,[l(O,{columns:v,data:t.value,pagination:!1,bordered:!1,"scroll-x":960},null,8,["data"])])])):L("",!0),t.value.length>0?(S(),I(p(b),{key:3,type:"primary",size:"large",onClick:V,loading:y.value,class:"mt-3",block:""},{default:a(()=>n[6]||(n[6]=[P(" 派单 ")])),_:1},8,["loading"])):L("",!0)]),_:1})}}}),rt=ue(it,[["__scopeId","data-v-6a84b007"]]),dt=W({__name:"index",props:{uid:{}},setup(h,{expose:i}){const u=m(!1),t=m("batch");function y(){u.value=!0,t.value="batch"}function C(){u.value=!1}return i({open:y,close:C}),(U,w)=>{const v=De,D=ze,R=Me;return S(),I(R,{show:u.value,"onUpdate:show":w[1]||(w[1]=T=>u.value=T),preset:"card",title:"派单",style:{width:"1100px"},"mask-closable":!1},{default:a(()=>[l(D,{value:t.value,"onUpdate:value":w[0]||(w[0]=T=>t.value=T),type:"card"},{default:a(()=>[l(v,{name:"batch",tab:"批量派单"},{default:a(()=>[l(tt,{uid:U.uid},null,8,["uid"])]),_:1}),l(v,{name:"manual",tab:"手动派单"},{default:a(()=>[l(rt,{uid:U.uid},null,8,["uid"])]),_:1})]),_:1},8,["value"])]),_:1},8,["show"])}}}),Bt=W({__name:"index",setup(h){const i=H(),u=m(),t=m(null),y=m(),C=m(0),U=Ye({onEditBank:r=>O(r)}),w=m(!1),v=m(!1),D=m(!1),R=m(!1),T=m(!1),q=m(!1),V=m(!1),s=m({}),n=[{field:"uid",component:"NInput",label:"用户ID",componentProps:{placeholder:"请输入用户ID"}},{field:"fb_id",component:"NInput",label:"FB_ID",componentProps:{placeholder:"请输入FB_ID"}},{field:"username",component:"NInput",label:"用户名",componentProps:{placeholder:"请输入用户名"}},{field:"admin_username",component:"NInput",label:"所属管理者",componentProps:{placeholder:"请输入所属管理者"}},{field:"name",component:"NInput",label:"用户昵称",componentProps:{placeholder:"请输入用户昵称"}},{field:"short_name",component:"NInput",label:"用户简称",componentProps:{placeholder:"请输入用户简称"}},{field:"lang",component:"NInput",label:"语言偏好",componentProps:{placeholder:"请输入语言偏好"}},{field:"timeRange",component:"NDatePicker",label:"创建时间",componentProps:{type:"daterange",clearable:!0,shortcuts:{一周内:[Date.now()-7*24*60*60*1e3,Date.now()],一个月内:[Date.now()-30*24*60*60*1e3,Date.now()],三个月内:[Date.now()-90*24*60*60*1e3,Date.now()]}}}],z=te({width:120,title:"操作",key:"action",fixed:"right",render(r){const g=[{label:"修改密码",key:"editPwd",props:{onClick:()=>A(r)}},{label:"修改支付密码",key:"editPayPwd",props:{onClick:()=>x(r)}}];return d(K,{vertical:!0,size:"small"},{default:()=>[d(b,{text:!0,type:"primary",size:"small",onClick:()=>k(r)},{default:()=>"充值"}),d(b,{text:!0,type:"primary",size:"small",onClick:()=>c(r)},{default:()=>"扣款"}),d(b,{text:!0,type:"primary",size:"small",onClick:()=>M(r)},{default:()=>"派优惠券"}),d(b,{text:!0,type:"info",size:"small",onClick:()=>pe(r)},{default:()=>"派单"}),d(b,{text:!0,type:"primary",size:"small",onClick:()=>$(r)},{default:()=>"编辑"}),d(Te,{options:g,trigger:"click"},{default:()=>d(b,{text:!0,type:"primary",size:"small"},{default:()=>"更多"})})]})}}),[o]=Ne({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:120,schemas:n});function e(fe){return F(this,arguments,function*({page:r,pageSize:g}){const _=ee({page:String(r),pageSize:String(g)},s.value);_.timeRange&&_.timeRange.length===2&&(_.sTime=Math.floor(_.timeRange[0]/1e3),_.eTime=Math.floor(_.timeRange[1]/1e3),delete _.timeRange);try{const j=(yield Se(_)).data;return{list:j.list||[],page:Number(j.page)||1,pageCount:Number(j.total_page)||0,pageSize:Number(j.page_size)||10,itemCount:Number(j.total)||0}}catch(_e){return i.error("获取用户列表失败"),{list:[],page:1,pageCount:0,pageSize:10,itemCount:0}}})}function f(){u.value.reload()}function $(r){t.value=r,w.value=!0}function A(r){t.value=r,v.value=!0}function x(r){t.value=r,D.value=!0}function O(r){t.value=r,R.value=!0}function k(r){t.value=r,T.value=!0}function c(r){t.value=r,q.value=!0}function M(r){t.value=r,V.value=!0}function pe(r){var g;C.value=r.id,(g=y.value)==null||g.open()}function E(){f()}function ce(r){s.value=r,f()}function me(){s.value={},f()}return(r,g)=>{const fe=se;return S(),I(fe,{bordered:!1,class:"proCard"},{default:a(()=>[l(p(Be),{onRegister:p(o),onSubmit:ce,onReset:me},null,8,["onRegister"]),l(p(ge),{columns:p(U),request:e,"row-key":_=>_.id,ref_key:"actionRef",ref:u,actionColumn:z,"scroll-x":2200,striped:!0},null,8,["columns","row-key","actionColumn"]),l(Ae,{visible:w.value,"onUpdate:visible":g[0]||(g[0]=_=>w.value=_),"user-data":t.value,onSuccess:E},null,8,["visible","user-data"]),l(Ie,{visible:v.value,"onUpdate:visible":g[1]||(g[1]=_=>v.value=_),"user-data":t.value,onSuccess:E},null,8,["visible","user-data"]),l(Re,{visible:D.value,"onUpdate:visible":g[2]||(g[2]=_=>D.value=_),"user-data":t.value,onSuccess:E},null,8,["visible","user-data"]),l(qe,{visible:R.value,"onUpdate:visible":g[3]||(g[3]=_=>R.value=_),"user-data":t.value,onSuccess:E},null,8,["visible","user-data"]),l(Ve,{visible:T.value,"onUpdate:visible":g[4]||(g[4]=_=>T.value=_),"user-data":t.value,onSuccess:E},null,8,["visible","user-data"]),l(Oe,{visible:q.value,"onUpdate:visible":g[5]||(g[5]=_=>q.value=_),"user-data":t.value,onSuccess:E},null,8,["visible","user-data"]),l(Ee,{visible:V.value,"onUpdate:visible":g[6]||(g[6]=_=>V.value=_),"user-data":t.value,onSuccess:E},null,8,["visible","user-data"]),l(dt,{ref_key:"dispatchOrderRef",ref:y,uid:C.value},null,8,["uid"])]),_:1})}}});export{Bt as default};
