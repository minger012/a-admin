var W=Object.defineProperty;var z=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var C=(l,n,a)=>n in l?W(l,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[n]=a,D=(l,n)=>{for(var a in n||(n={}))A.call(n,a)&&C(l,a,n[a]);if(z)for(var a of z(n))G.call(n,a)&&C(l,a,n[a]);return l};var P=(l,n,a)=>new Promise((s,v)=>{var _=u=>{try{p(a.next(u))}catch(c){v(c)}},b=u=>{try{p(a.throw(u))}catch(c){v(c)}},p=u=>u.done?s(u.value):Promise.resolve(u.value).then(_,b);p((a=a.apply(l,n)).next())});import{B as H}from"./Table-BcXbUTxg.js";import{s as i,B as r,D as x,v as J,d as K,u as O,r as d,b as Q,x as X,w as Y,q as Z,o as ee,j as m,h as g,a5 as te}from"./index-FB6W5mBG.js";import{_ as ae}from"./BasicForm-BufV-4It.js";import{u as le}from"./useForm-C7YbISyA.js";import{_ as ne}from"./EditUserModal.vue_vue_type_script_setup_true_lang-Be_j37Wb.js";import{_ as se}from"./EditPwdModal.vue_vue_type_script_setup_true_lang-CiCx2lSR.js";import{_ as oe}from"./EditPayPwdModal.vue_vue_type_script_setup_true_lang-ZOC7_5hL.js";import{_ as ie}from"./EditBankModal.vue_vue_type_script_setup_true_lang-CjxELRpj.js";import{_ as re}from"./RechargeModal.vue_vue_type_script_setup_true_lang-Doz1xwEF.js";import{_ as ue}from"./DeductModal.vue_vue_type_script_setup_true_lang-Cca8yA6Q.js";import{_ as de}from"./SendCouponModal.vue_vue_type_script_setup_true_lang-CCkM3iML.js";import"./vuedraggable.umd-C_5yRcwU.js";import"./useDesignSetting-BvT0Exi7.js";import"./propTypes-j0pcPl7w.js";import"./componentSetting-CQq0JJwW.js";import"./index-BgGIYSO9.js";import"./DownOutlined-BL5GVzwF.js";import"./coupon-BBAaYDg3.js";const me={0:"停用",1:"正常",2:"未激活"},pe={0:"error",1:"success",2:"warning"},ce=[{title:"用户ID",key:"id",width:100,fixed:"left"},{title:"用户名",key:"username",width:120,fixed:"left"},{title:"用户昵称",key:"name",width:120},{title:"用户简称",key:"short_name",width:120},{title:"头像",key:"image",width:120},{title:"手机号",key:"phone",width:130},{title:"所属管理者",key:"admin_name",width:120},{title:"授权码",key:"code",width:120},{title:"上级用户ID",key:"pid",width:120},{title:"代理管理",key:"agent_management",width:100,render(l){return i(r,{text:!0,type:"primary",size:"small"},{default:()=>"查看"})}},{title:"语言偏好",key:"lang",width:100},{title:"FB_ID",key:"fb_id",width:150},{title:"提现方式",key:"bank",width:150,render(l){var a;const n=((a=l.bank)==null?void 0:a.length)||0;return i(x,{size:"small"},{default:()=>[i(r,{text:!0,type:"primary",size:"small"},{default:()=>`查看(${n})`}),i(r,{text:!0,type:"info",size:"small"},{default:()=>"编辑"})]})}},{title:"可用余额",key:"money",width:120,render(l){return`¥${(l.money||0).toFixed(2)}`}},{title:"状态",key:"state",width:100,render(l){return i(J,{type:pe[l.state]||"default",bordered:!1},{default:()=>me[l.state]||"未知"})}},{title:"用户视角",key:"user_perspective",width:180,render(l){return i(x,{size:"small"},{default:()=>[i(r,{text:!0,type:"primary",size:"small"},{default:()=>"广告中心"}),i(r,{text:!0,type:"info",size:"small"},{default:()=>"计划管理"})]})}},{title:"用户IP",key:"last_login_ip",width:140}],Be=K({__name:"index",setup(l){const n=O(),a=d(),s=d(null),v=d(!1),_=d(!1),b=d(!1),p=d(!1),u=d(!1),c=d(!1),y=d(!1),w=d({}),S=[{field:"uid",component:"NInput",label:"用户ID",componentProps:{placeholder:"请输入用户ID"}},{field:"fb_id",component:"NInput",label:"FB_ID",componentProps:{placeholder:"请输入FB_ID"}},{field:"username",component:"NInput",label:"用户名",componentProps:{placeholder:"请输入用户名"}},{field:"admin_username",component:"NInput",label:"所属管理者",componentProps:{placeholder:"请输入所属管理者"}},{field:"name",component:"NInput",label:"用户昵称",componentProps:{placeholder:"请输入用户昵称"}},{field:"short_name",component:"NInput",label:"用户简称",componentProps:{placeholder:"请输入用户简称"}},{field:"lang",component:"NInput",label:"语言偏好",componentProps:{placeholder:"请输入语言偏好"}},{field:"timeRange",component:"NDatePicker",label:"创建时间",componentProps:{type:"daterange",clearable:!0,shortcuts:{一周内:[Date.now()-7*24*60*60*1e3,Date.now()],一个月内:[Date.now()-30*24*60*60*1e3,Date.now()],三个月内:[Date.now()-90*24*60*60*1e3,Date.now()]}}}],I=Q({width:120,title:"操作",key:"action",fixed:"right",render(e){return i(x,{vertical:!0,size:"small"},{default:()=>[i(r,{text:!0,type:"primary",size:"small",onClick:()=>N(e)},{default:()=>"编辑"}),i(r,{text:!0,type:"info",size:"small",onClick:()=>B(e)},{default:()=>"修改密码"}),i(r,{text:!0,size:"small",onClick:()=>U(e)},{default:()=>"修改支付密码"}),i(r,{text:!0,size:"small",onClick:()=>$(e)},{default:()=>"修改提现方式"}),i(r,{text:!0,type:"success",size:"small",onClick:()=>F(e)},{default:()=>"充值"}),i(r,{text:!0,type:"error",size:"small",onClick:()=>T(e)},{default:()=>"扣款"}),i(r,{text:!0,type:"warning",size:"small",onClick:()=>E(e)},{default:()=>"发优惠券"})]})}}),[R]=le({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:120,schemas:S});function M(L){return P(this,arguments,function*({page:e,pageSize:o}){const t=D({page:String(e),pageSize:String(o)},w.value);t.timeRange&&t.timeRange.length===2&&(t.sTime=Math.floor(t.timeRange[0]/1e3),t.eTime=Math.floor(t.timeRange[1]/1e3),delete t.timeRange);try{const h=(yield te(t)).data;return{list:h.list||[],page:Number(h.page)||1,pageCount:Number(h.total_page)||0,pageSize:Number(h.page_size)||10,itemCount:Number(h.total)||0}}catch(V){return n.error("获取用户列表失败"),{list:[],page:1,pageCount:0,pageSize:10,itemCount:0}}})}function k(){a.value.reload()}function N(e){s.value=e,v.value=!0}function B(e){s.value=e,_.value=!0}function U(e){s.value=e,b.value=!0}function $(e){s.value=e,p.value=!0}function F(e){s.value=e,u.value=!0}function T(e){s.value=e,c.value=!0}function E(e){s.value=e,y.value=!0}function f(){k()}function q(e){w.value=e,k()}function j(){w.value={},k()}return(e,o)=>{const L=Z;return ee(),X(L,{bordered:!1,class:"proCard"},{default:Y(()=>[m(g(ae),{onRegister:g(R),onSubmit:q,onReset:j},null,8,["onRegister"]),m(g(H),{columns:g(ce),request:M,"row-key":t=>t.id,ref_key:"actionRef",ref:a,actionColumn:I,"scroll-x":2e3,striped:!0},null,8,["columns","row-key","actionColumn"]),m(ne,{visible:v.value,"onUpdate:visible":o[0]||(o[0]=t=>v.value=t),"user-data":s.value,onSuccess:f},null,8,["visible","user-data"]),m(se,{visible:_.value,"onUpdate:visible":o[1]||(o[1]=t=>_.value=t),"user-data":s.value,onSuccess:f},null,8,["visible","user-data"]),m(oe,{visible:b.value,"onUpdate:visible":o[2]||(o[2]=t=>b.value=t),"user-data":s.value,onSuccess:f},null,8,["visible","user-data"]),m(ie,{visible:p.value,"onUpdate:visible":o[3]||(o[3]=t=>p.value=t),"user-data":s.value,onSuccess:f},null,8,["visible","user-data"]),m(re,{visible:u.value,"onUpdate:visible":o[4]||(o[4]=t=>u.value=t),"user-data":s.value,onSuccess:f},null,8,["visible","user-data"]),m(ue,{visible:c.value,"onUpdate:visible":o[5]||(o[5]=t=>c.value=t),"user-data":s.value,onSuccess:f},null,8,["visible","user-data"]),m(de,{visible:y.value,"onUpdate:visible":o[6]||(o[6]=t=>y.value=t),"user-data":s.value,onSuccess:f},null,8,["visible","user-data"])]),_:1})}}});export{Be as default};
