var y=(f,v,u)=>new Promise((p,d)=>{var o=e=>{try{i(u.next(e))}catch(c){d(c)}},r=e=>{try{i(u.throw(e))}catch(c){d(c)}},i=e=>e.done?p(e.value):Promise.resolve(e.value).then(o,r);i((u=u.apply(f,v)).next())});import{d as C,u as R,r as g,b as q,aa as h,o as M,x as E,w as l,j as s,i as w,dU as N,k as V,l as j,_ as z,B as P,D as S,E as T}from"./index-BUaCiTCS.js";const G=C({__name:"EditBankModal",props:{visible:{type:Boolean},userData:{}},emits:["update:visible","success"],setup(f,{emit:v}){const u=R(),p=g(),d=g(!1),o=g(!1),r=f,i=v,e=q({id:0,methods:"",currency:"",address:""}),c={methods:{required:!0,message:"请输入提现模式",trigger:["blur","input"]},currency:{required:!0,message:"请输入货币类型",trigger:["blur","input"]},address:{required:!0,message:"请输入钱包地址",trigger:["blur","input"]}};h(()=>r.visible,n=>{o.value=n,n&&r.userData&&(e.id=r.userData.id,e.methods=r.userData.methods||"",e.currency=r.userData.currency||"",e.address=r.userData.address||"")}),h(o,n=>{i("update:visible",n)});const k=()=>{o.value=!1},D=()=>y(this,null,function*(){var n;try{yield(n=p.value)==null?void 0:n.validate(),d.value=!0;const a=yield N(e);a.code===1?(u.success("提现方式修改成功"),o.value=!1,i("success")):u.error(a.msg||"提现方式修改失败")}catch(a){console.error("表单提交错误:",a)}finally{d.value=!1}});return(n,a)=>{const m=V,_=j,x=z,b=P,B=S,U=T;return M(),E(U,{show:o.value,"onUpdate:show":a[3]||(a[3]=t=>o.value=t),"show-icon":!1,preset:"dialog",title:"修改提现方式",style:{width:"500px"}},{action:l(()=>[s(B,null,{default:l(()=>[s(b,{onClick:k},{default:l(()=>a[4]||(a[4]=[w("取消")])),_:1}),s(b,{type:"primary",loading:d.value,onClick:D},{default:l(()=>a[5]||(a[5]=[w("确定")])),_:1},8,["loading"])]),_:1})]),default:l(()=>[s(x,{model:e,rules:c,ref_key:"formRef",ref:p,"label-placement":"left","label-width":100,class:"py-4"},{default:l(()=>[s(_,{label:"用户名"},{default:l(()=>{var t;return[s(m,{value:(t=n.userData)==null?void 0:t.username,disabled:""},null,8,["value"])]}),_:1}),s(_,{label:"提现模式",path:"methods"},{default:l(()=>[s(m,{placeholder:"请输入提现模式",value:e.methods,"onUpdate:value":a[0]||(a[0]=t=>e.methods=t)},null,8,["value"])]),_:1}),s(_,{label:"货币类型",path:"currency"},{default:l(()=>[s(m,{placeholder:"请输入货币类型",value:e.currency,"onUpdate:value":a[1]||(a[1]=t=>e.currency=t)},null,8,["value"])]),_:1}),s(_,{label:"钱包地址",path:"address"},{default:l(()=>[s(m,{type:"textarea",placeholder:"请输入钱包地址",value:e.address,"onUpdate:value":a[2]||(a[2]=t=>e.address=t),autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}});export{G as _};
