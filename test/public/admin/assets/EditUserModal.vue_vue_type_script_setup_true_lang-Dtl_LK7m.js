var R=(g,w,p)=>new Promise((f,i)=>{var r=u=>{try{n(p.next(u))}catch(m){i(m)}},y=u=>{try{n(p.throw(u))}catch(m){i(m)}},n=u=>u.done?f(u.value):Promise.resolve(u.value).then(r,y);n((p=p.apply(g,w)).next())});import{d as j,u as z,r as D,b as E,aa as C,o as N,x as T,w as s,j as a,i as v,dR as V,k as $,l as q,C as G,U as P,F as S,D as A,G as H,_ as J,B as K,E as L}from"./index-C4bwFPRU.js";const X=j({__name:"EditUserModal",props:{visible:{type:Boolean},userData:{}},emits:["update:visible","success"],setup(g,{emit:w}){const p=z(),f=D(),i=D(!1),r=D(!1),y=[{label:"内嵌",value:1},{label:"跳转app",value:2}],n=g,u=w,m=[{label:"星级1",value:1},{label:"星级2",value:2},{label:"星级3",value:3},{label:"星级4",value:4},{label:"星级5",value:5}],l=E({id:0,short_name:"",phone:"",name:"",fb_id:"",lv:1,state:1,pledge_money:0,pledge_refund:0,score:0,withdraw_disabled:"",service_address:"",service_type:0,operate:"",remarks:""}),B={phone:{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:["blur"]},fb_id:{required:!0,message:"请输入Facebook ID",trigger:["blur","input"]}};C(()=>n.visible,d=>{r.value=d,d&&n.userData&&Object.assign(l,{id:n.userData.id,short_name:n.userData.short_name,phone:n.userData.phone||"",name:n.userData.name||"",fb_id:n.userData.fb_id||"",lv:n.userData.lv||1,state:n.userData.state||1,pledge_money:n.userData.pledge_money||0,pledge_refund:n.userData.pledge_refund||0,score:n.userData.score||0,withdraw_disabled:n.userData.withdraw_disabled||"",service_address:n.userData.service_address||"",service_type:n.userData.service_type||0,operate:n.userData.operate||"",remarks:n.userData.remarks||""})}),C(r,d=>{u("update:visible",d)});const F=()=>{r.value=!1},I=()=>R(this,null,function*(){var d;try{yield(d=f.value)==null?void 0:d.validate(),i.value=!0;const e=yield V(l);e.code===1?(p.success("修改成功"),r.value=!1,u("success")):p.error(e.msg||"修改失败")}catch(e){console.error("表单提交错误:",e)}finally{i.value=!1}});return(d,e)=>{const _=$,o=q,U=G,h=P,b=S,c=A,k=H,M=J,x=K,O=L;return N(),T(O,{show:r.value,"onUpdate:show":e[13]||(e[13]=t=>r.value=t),"show-icon":!1,preset:"dialog",title:"编辑用户信息",style:{width:"600px"}},{action:s(()=>[a(c,null,{default:s(()=>[a(x,{onClick:F},{default:s(()=>e[18]||(e[18]=[v("取消")])),_:1}),a(x,{type:"primary",loading:i.value,onClick:I},{default:s(()=>e[19]||(e[19]=[v("确定")])),_:1},8,["loading"])]),_:1})]),default:s(()=>[a(M,{model:l,rules:B,ref_key:"formRef",ref:f,"label-placement":"left","label-width":120,class:"py-4"},{default:s(()=>[a(o,{label:"用户简称",path:"short_name"},{default:s(()=>[a(_,{placeholder:"请输入用户简称",value:l.short_name,"onUpdate:value":e[0]||(e[0]=t=>l.short_name=t)},null,8,["value"])]),_:1}),a(o,{label:"店铺星级",path:"lv"},{default:s(()=>[a(U,{value:l.lv,"onUpdate:value":e[1]||(e[1]=t=>l.lv=t),options:m},null,8,["value"])]),_:1}),a(o,{label:"保证金",path:"pledge_money"},{default:s(()=>[a(h,{value:l.pledge_money,"onUpdate:value":e[2]||(e[2]=t=>l.pledge_money=t),min:0,precision:2,style:{width:"100%"}},null,8,["value"])]),_:1}),a(o,{label:"手机号",path:"phone"},{default:s(()=>[a(_,{placeholder:"请输入手机号",value:l.phone,"onUpdate:value":e[3]||(e[3]=t=>l.phone=t)},null,8,["value"])]),_:1}),a(o,{label:"姓名",path:"name"},{default:s(()=>[a(_,{placeholder:"请输入姓名",value:l.name,"onUpdate:value":e[4]||(e[4]=t=>l.name=t)},null,8,["value"])]),_:1}),a(o,{label:"Facebook ID",path:"fb_id"},{default:s(()=>[a(_,{placeholder:"请输入Facebook ID",value:l.fb_id,"onUpdate:value":e[5]||(e[5]=t=>l.fb_id=t)},null,8,["value"])]),_:1}),a(o,{label:"是否激活",path:"state"},{default:s(()=>[a(k,{value:l.state,"onUpdate:value":e[6]||(e[6]=t=>l.state=t)},{default:s(()=>[a(c,null,{default:s(()=>[a(b,{value:1},{default:s(()=>e[14]||(e[14]=[v("激活")])),_:1}),a(b,{value:2},{default:s(()=>e[15]||(e[15]=[v("未激活")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),a(o,{label:"是否退还保证金",path:"pledge_refund"},{default:s(()=>[a(k,{value:l.pledge_refund,"onUpdate:value":e[7]||(e[7]=t=>l.pledge_refund=t)},{default:s(()=>[a(c,null,{default:s(()=>[a(b,{value:0},{default:s(()=>e[16]||(e[16]=[v("否")])),_:1}),a(b,{value:1},{default:s(()=>e[17]||(e[17]=[v("是")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),a(o,{label:"积分",path:"score"},{default:s(()=>[a(h,{value:l.score,"onUpdate:value":e[8]||(e[8]=t=>l.score=t),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(o,{label:"提现禁用原因",path:"withdraw_disabled"},{default:s(()=>[a(_,{type:"textarea",placeholder:"请输入提现禁用原因",value:l.withdraw_disabled,"onUpdate:value":e[9]||(e[9]=t=>l.withdraw_disabled=t),autosize:{minRows:1,maxRows:3}},null,8,["value"])]),_:1}),a(o,{label:"客服地址",path:"service_address"},{default:s(()=>[a(_,{placeholder:"请输入客服地址",value:l.service_address,"onUpdate:value":e[10]||(e[10]=t=>l.service_address=t)},null,8,["value"])]),_:1}),a(o,{label:"客服类型",path:"service_type"},{default:s(()=>[a(U,{value:l.service_type,"onUpdate:value":e[11]||(e[11]=t=>l.service_type=t),options:y,placeholder:"请选择客服类型"},null,8,["value"])]),_:1}),a(o,{label:"备注",path:"remarks"},{default:s(()=>[a(_,{type:"textarea",placeholder:"请输入备注",value:l.remarks,"onUpdate:value":e[12]||(e[12]=t=>l.remarks=t),autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}});export{X as _};
