var h=(g,w,p)=>new Promise((f,v)=>{var r=u=>{try{m(p.next(u))}catch(l){v(l)}},n=u=>{try{m(p.throw(u))}catch(l){v(l)}},m=u=>u.done?f(u.value):Promise.resolve(u.value).then(r,n);m((p=p.apply(g,w)).next())});import{d as j,u as z,r as c,b as E,aa as x,o as N,x as O,w as t,j as a,i as _,dR as V,k as $,l as q,C as G,U as P,F as S,D as T,G as A,_ as H,B as J,E as K}from"./index-CoBJkS1T.js";const W=j({__name:"EditUserModal",props:{visible:{type:Boolean},userData:{}},emits:["update:visible","success"],setup(g,{emit:w}){const p=z(),f=c(),v=c(!1),r=c(!1),n=g,m=w,u=[{label:"星级1",value:1},{label:"星级2",value:2},{label:"星级3",value:3},{label:"星级4",value:4},{label:"星级5",value:5}],l=E({id:0,short_name:"",phone:"",name:"",fb_id:"",lv:1,state:1,pledge_money:0,pledge_refund:0,score:0,withdraw_disabled:"",service_address:"",service_type:0,operate:"",remarks:""}),R={phone:{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:["blur"]},fb_id:{required:!0,message:"请输入Facebook ID",trigger:["blur","input"]}};x(()=>n.visible,d=>{r.value=d,d&&n.userData&&Object.assign(l,{id:n.userData.id,short_name:n.userData.short_name,phone:n.userData.phone||"",name:n.userData.name||"",fb_id:n.userData.fb_id||"",lv:n.userData.lv||1,state:n.userData.state||1,pledge_money:n.userData.pledge_money||0,pledge_refund:n.userData.pledge_refund||0,score:n.userData.score||0,withdraw_disabled:n.userData.withdraw_disabled||"",service_address:n.userData.service_address||"",service_type:n.userData.service_type||0,operate:n.userData.operate||"",remarks:n.userData.remarks||""})}),x(r,d=>{m("update:visible",d)});const C=()=>{r.value=!1},B=()=>h(this,null,function*(){var d;try{yield(d=f.value)==null?void 0:d.validate(),v.value=!0;const e=yield V(l);e.code===1?(p.success("修改成功"),r.value=!1,m("success")):p.error(e.msg||"修改失败")}catch(e){console.error("表单提交错误:",e)}finally{v.value=!1}});return(d,e)=>{const i=$,o=q,F=G,y=P,b=S,D=T,U=A,I=H,k=J,M=K;return N(),O(M,{show:r.value,"onUpdate:show":e[13]||(e[13]=s=>r.value=s),"show-icon":!1,preset:"dialog",title:"编辑用户信息",style:{width:"600px"}},{action:t(()=>[a(D,null,{default:t(()=>[a(k,{onClick:C},{default:t(()=>e[19]||(e[19]=[_("取消")])),_:1}),a(k,{type:"primary",loading:v.value,onClick:B},{default:t(()=>e[20]||(e[20]=[_("确定")])),_:1},8,["loading"])]),_:1})]),default:t(()=>[a(I,{model:l,rules:R,ref_key:"formRef",ref:f,"label-placement":"left","label-width":120,class:"py-4"},{default:t(()=>[a(o,{label:"用户简称",path:"short_name"},{default:t(()=>[a(i,{placeholder:"请输入用户简称",value:l.short_name,"onUpdate:value":e[0]||(e[0]=s=>l.short_name=s)},null,8,["value"])]),_:1}),a(o,{label:"店铺星级",path:"lv"},{default:t(()=>[a(F,{value:l.lv,"onUpdate:value":e[1]||(e[1]=s=>l.lv=s),options:u},null,8,["value"])]),_:1}),a(o,{label:"保证金",path:"pledge_money"},{default:t(()=>[a(y,{value:l.pledge_money,"onUpdate:value":e[2]||(e[2]=s=>l.pledge_money=s),min:0,precision:2,style:{width:"100%"}},{prefix:t(()=>e[14]||(e[14]=[_("¥")])),_:1},8,["value"])]),_:1}),a(o,{label:"手机号",path:"phone"},{default:t(()=>[a(i,{placeholder:"请输入手机号",value:l.phone,"onUpdate:value":e[3]||(e[3]=s=>l.phone=s)},null,8,["value"])]),_:1}),a(o,{label:"姓名",path:"name"},{default:t(()=>[a(i,{placeholder:"请输入姓名",value:l.name,"onUpdate:value":e[4]||(e[4]=s=>l.name=s)},null,8,["value"])]),_:1}),a(o,{label:"Facebook ID",path:"fb_id"},{default:t(()=>[a(i,{placeholder:"请输入Facebook ID",value:l.fb_id,"onUpdate:value":e[5]||(e[5]=s=>l.fb_id=s)},null,8,["value"])]),_:1}),a(o,{label:"是否激活",path:"state"},{default:t(()=>[a(U,{value:l.state,"onUpdate:value":e[6]||(e[6]=s=>l.state=s)},{default:t(()=>[a(D,null,{default:t(()=>[a(b,{value:1},{default:t(()=>e[15]||(e[15]=[_("激活")])),_:1}),a(b,{value:2},{default:t(()=>e[16]||(e[16]=[_("未激活")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),a(o,{label:"是否退还保证金",path:"pledge_refund"},{default:t(()=>[a(U,{value:l.pledge_refund,"onUpdate:value":e[7]||(e[7]=s=>l.pledge_refund=s)},{default:t(()=>[a(D,null,{default:t(()=>[a(b,{value:0},{default:t(()=>e[17]||(e[17]=[_("否")])),_:1}),a(b,{value:1},{default:t(()=>e[18]||(e[18]=[_("是")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),a(o,{label:"积分",path:"score"},{default:t(()=>[a(y,{value:l.score,"onUpdate:value":e[8]||(e[8]=s=>l.score=s),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(o,{label:"提现禁用原因",path:"withdraw_disabled"},{default:t(()=>[a(i,{type:"textarea",placeholder:"请输入提现禁用原因",value:l.withdraw_disabled,"onUpdate:value":e[9]||(e[9]=s=>l.withdraw_disabled=s),autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1}),a(o,{label:"客服地址",path:"service_address"},{default:t(()=>[a(i,{placeholder:"请输入客服地址",value:l.service_address,"onUpdate:value":e[10]||(e[10]=s=>l.service_address=s)},null,8,["value"])]),_:1}),a(o,{label:"客服类型",path:"service_type"},{default:t(()=>[a(y,{value:l.service_type,"onUpdate:value":e[11]||(e[11]=s=>l.service_type=s),min:0,style:{width:"100%"}},null,8,["value"])]),_:1}),a(o,{label:"备注",path:"remarks"},{default:t(()=>[a(i,{type:"textarea",placeholder:"请输入备注",value:l.remarks,"onUpdate:value":e[12]||(e[12]=s=>l.remarks=s),autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}});export{W as _};
