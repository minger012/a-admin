var y=(f,v,u)=>new Promise((p,d)=>{var o=e=>{try{i(u.next(e))}catch(c){d(c)}},r=e=>{try{i(u.throw(e))}catch(c){d(c)}},i=e=>e.done?p(e.value):Promise.resolve(e.value).then(o,r);i((u=u.apply(f,v)).next())});import{d as U,u as R,r as g,b as q,a6 as h,o as M,x as E,w as l,j as a,i as w,dT as N,k as T,l as V,_ as j,B as z,D as P,E as S}from"./index-FB6W5mBG.js";const G=U({__name:"EditBankModal",props:{visible:{type:Boolean},userData:{}},emits:["update:visible","success"],setup(f,{emit:v}){const u=R(),p=g(),d=g(!1),o=g(!1),r=f,i=v,e=q({id:0,methods:"",currency:"",address:""}),c={methods:{required:!0,message:"请输入提现模式",trigger:["blur","input"]},currency:{required:!0,message:"请输入货币类型",trigger:["blur","input"]},address:{required:!0,message:"请输入钱包地址",trigger:["blur","input"]}};h(()=>r.visible,n=>{o.value=n,n&&r.userData&&(e.id=r.userData.id,e.methods=r.userData.methods||"",e.currency=r.userData.currency||"",e.address=r.userData.address||"")}),h(o,n=>{i("update:visible",n)});const k=()=>{o.value=!1},D=()=>y(this,null,function*(){var n;try{yield(n=p.value)==null?void 0:n.validate(),d.value=!0;const s=yield N(e);s.code===1?(u.success("提现方式修改成功"),o.value=!1,i("success")):u.error(s.msg||"提现方式修改失败")}catch(s){console.error("表单提交错误:",s)}finally{d.value=!1}});return(n,s)=>{const m=T,_=V,x=j,b=z,B=P,C=S;return M(),E(C,{show:o.value,"onUpdate:show":s[3]||(s[3]=t=>o.value=t),"show-icon":!1,preset:"dialog",title:"修改提现方式",style:{width:"500px"}},{action:l(()=>[a(B,null,{default:l(()=>[a(b,{onClick:k},{default:l(()=>s[4]||(s[4]=[w("取消")])),_:1}),a(b,{type:"primary",loading:d.value,onClick:D},{default:l(()=>s[5]||(s[5]=[w("确定")])),_:1},8,["loading"])]),_:1})]),default:l(()=>[a(x,{model:e,rules:c,ref_key:"formRef",ref:p,"label-placement":"left","label-width":100,class:"py-4"},{default:l(()=>[a(_,{label:"用户名"},{default:l(()=>{var t;return[a(m,{value:(t=n.userData)==null?void 0:t.username,disabled:""},null,8,["value"])]}),_:1}),a(_,{label:"提现模式",path:"methods"},{default:l(()=>[a(m,{placeholder:"请输入提现模式",value:e.methods,"onUpdate:value":s[0]||(s[0]=t=>e.methods=t)},null,8,["value"])]),_:1}),a(_,{label:"货币类型",path:"currency"},{default:l(()=>[a(m,{placeholder:"请输入货币类型",value:e.currency,"onUpdate:value":s[1]||(s[1]=t=>e.currency=t)},null,8,["value"])]),_:1}),a(_,{label:"钱包地址",path:"address"},{default:l(()=>[a(m,{type:"textarea",placeholder:"请输入钱包地址",value:e.address,"onUpdate:value":s[2]||(s[2]=t=>e.address=t),autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}});export{G as _};
