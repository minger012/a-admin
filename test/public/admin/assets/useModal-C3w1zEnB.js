var R=Object.defineProperty,U=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var L=(n,e,o)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,g=(n,e)=>{for(var o in e||(e={}))z.call(e,o)&&L(n,o,e[o]);if(P)for(var o of P(e))A.call(e,o)&&L(n,o,e[o]);return n},X=(n,e)=>U(n,j(e));var Y=(n,e,o)=>new Promise((c,f)=>{var r=a=>{try{s(o.next(a))}catch(d){f(d)}},t=a=>{try{s(o.throw(a))}catch(d){f(d)}},s=a=>a.done?c(a.value):Promise.resolve(a.value).then(r,t);s((o=o.apply(n,e)).next())});import{E as I,d as F,dc as G,r as x,O as k,h as w,bG as N,o as q,x as J,bz as K,w as _,j as C,i as H,y as V,by as E,a as Q,bw as Z,B as ee,D as te,dF as oe,ax as ne,aa as se,dH as ae}from"./index--W9FB2Si.js";import{a as le}from"./index-Tz6qLsBu.js";const ue=X(g({},I.props),{subBtuText:{type:String,default:"确认"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}}),b=function(n,e){var o;return n.currentStyle?n.currentStyle[e]:(o=document.defaultView)==null?void 0:o.getComputedStyle(n,null)[e]},l={left:0,top:0,currentX:0,currentY:0,flag:!1},ce=function(n,e,o){const c=document.body.clientWidth,f=document.documentElement.clientHeight,r=e.offsetWidth,t=e.offsetHeight,s=e.offsetLeft,a=e.offsetTop,d=c-s-r,h=f-a-t;b(e,"left")!=="auto"&&(l.left=b(e,"left")),b(e,"top")!=="auto"&&(l.top=b(e,"top")),n.onmousedown=function(i){l.flag=!0,i||(i=window.event,n.onselectstart=function(){return!1});const p=i;l.currentX=p.clientX,l.currentY=p.clientY},document.onmouseup=function(){l.flag=!1,b(e,"left")!=="auto"&&(l.left=b(e,"left")),b(e,"top")!=="auto"&&(l.top=b(e,"top"))},document.onmousemove=function(i){const p=i||window.event;if(l.flag){const D=p.clientX,M=p.clientY,B=D-l.currentX,S=M-l.currentY;let y=parseInt(l.left)+B,m=parseInt(l.top)+S;return-y>s?y=-s:y>d&&(y=d),-m>a?m=-a:m>h&&(m=h),e.style.left=y+"px",e.style.top=m+"px",i.preventDefault&&i.preventDefault(),!1}}},ie={class:"w-full cursor-move",id:"basic-modal-bar"},me=F({__name:"basicModal",props:g({},ue),emits:["on-close","on-ok","register"],setup(n,{expose:e,emit:o}){const c=G(),f=n,r=o,t=x(null),s=x(!1),a=x(!1),d=k(()=>g(g({},f),w(t))),h=k(()=>{const{subBtuText:u}=t.value;return u||f.subBtuText});function i(u){return Y(this,null,function*(){t.value=oe(w(t)||{},u)})}const p=k(()=>g(g(g({},c),w(d)),w(t)));function D(u){a.value=u}function M(){s.value=!0,ne(()=>{const u=document.getElementById("basic-modal"),v=document.getElementById("basic-modal-bar");ce(v,u)})}function B(){s.value=!1,a.value=!1,r("on-close")}function S(){s.value=!1,r("on-close")}function y(){a.value=!0,r("on-ok")}const m={setProps:i,openModal:M,closeModal:B,setSubLoading:D};return N()&&r("register",m),e(m),(u,v)=>{const T=ee,W=te,$=I;return q(),J($,Z({id:"basic-modal"},p.value,{show:s.value,"onUpdate:show":v[0]||(v[0]=O=>s.value=O),onClose:S}),K({header:_(()=>[Q("div",ie,V(p.value.title),1)]),default:_(()=>[E(u.$slots,"default")]),_:2},[u.$slots.action?{name:"action",fn:_(()=>[E(u.$slots,"action")]),key:"1"}:{name:"action",fn:_(()=>[C(W,null,{default:_(()=>[C(T,{onClick:B},{default:_(()=>v[1]||(v[1]=[H("取消")])),_:1}),C(T,{type:"primary",loading:a.value,onClick:y},{default:_(()=>[H(V(h.value),1)]),_:1},8,["loading"])]),_:1})]),key:"0"}]),1040,["show"])}}});function ge(n){const e=x(null),o=N(),c=()=>{const t=w(e.value);return t||console.error("useModal instance is undefined!"),t};return[t=>{le(()=>{e.value=null}),e.value=t,o==null||o.emit("register",t),se(()=>n,()=>{n&&t.setProps(ae(n))},{immediate:!0,deep:!0})},{setProps:t=>{var s;(s=c())==null||s.setProps(t)},openModal:()=>{var t;(t=c())==null||t.openModal()},closeModal:()=>{var t;(t=c())==null||t.closeModal()},setSubLoading:t=>{var s;(s=c())==null||s.setSubLoading(t)}}]}export{me as _,ge as u};
