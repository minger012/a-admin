import{_ as F,B as I,A as d,ae as U}from"./CpNavBar-BEpOqNwz.js";import"./index-D7SfZyv_.js";import{F as N}from"./index-DbElvG5H.js";import{d as S,u as A,G as D,a as o,E,l as J,b as u,q as v,y as s,s as _,F as T,B as G,D as H,x as L,H as M,C as f,_ as O}from"./index-CS2Ya4Ki.js";import{F as W}from"./index-DmQqm3Pv.js";import"./use-id-sX8ZKSaD.js";const $={class:"page"},j={class:"mt-8 px-8"},z={class:"text-base"},K=S({__name:"paypassword",setup(Q){const{t:e}=A(),g=E(),h=M(),b=D(),n=o(!1),i=o(!1),c=o(!1),p=o(""),a=o(""),m=o(""),t=o(!1),P=g.query.isJump||0,V=()=>{n.value=!n.value},k=()=>{i.value=!i.value},x=()=>{c.value=!c.value},q=async()=>{if(!t.value){if(a.value!==m.value){d(e("payPassword.rules.passwordMismatch"));return}if(a.value.length!==6||!/^\d+$/.test(a.value)){d(e("payPassword.rules.passwordLength"));return}if(P==0&&p.value===a.value){d(e("payPassword.rules.sameAsOld"));return}t.value=!0;try{await U(p.value,a.value,m.value).then(w=>{d(w.msg),b.setUserPayPassword(1),setTimeout(()=>{h.back()},1e3)})}catch(w){d(w.message||"修改失败")}finally{t.value=!1}}};return(w,l)=>{const B=F,y=N,C=I,R=W;return f(),J(T,null,[u(B,{title:s(e)("payPassword.title")},null,8,["title"]),v("div",$,[u(R,{onSubmit:q},{default:_(()=>[s(P)==0?(f(),G(y,{key:0,"left-icon":"lock",modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=r=>p.value=r),type:n.value?"text":"password","right-icon":n.value?"eye-o":"closed-eye",onClickRightIcon:V,label:s(e)("payPassword.oldPassword"),placeholder:s(e)("payPassword.oldPasswordPlaceholder"),rules:[{required:!0,message:s(e)("payPassword.rules.oldPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"])):H("",!0),u(y,{"left-icon":"lock",modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value=r),type:i.value?"text":"password","right-icon":i.value?"eye-o":"closed-eye",onClickRightIcon:k,label:s(e)("payPassword.newPassword"),placeholder:s(e)("payPassword.newPasswordPlaceholder"),rules:[{required:!0,message:s(e)("payPassword.rules.newPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),u(y,{"left-icon":"lock",modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=r=>m.value=r),type:c.value?"text":"password","right-icon":c.value?"eye-o":"closed-eye",onClickRightIcon:x,label:s(e)("payPassword.confirmPassword"),placeholder:s(e)("payPassword.confirmPasswordPlaceholder"),rules:[{required:!0,message:s(e)("payPassword.rules.confirmPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),v("div",j,[u(C,{round:"",block:"",type:"primary","native-type":"submit",loading:t.value,disabled:t.value},{default:_(()=>[v("span",z,L(s(e)("payPassword.submit")),1)]),_:1},8,["loading","disabled"])])]),_:1})])],64)}}}),oe=O(K,[["__scopeId","data-v-0850193d"]]);export{oe as default};
