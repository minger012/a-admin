import{d as M,V as O,a as l,w as U,v as E,W as f,f as i,Y as t,$ as g,Z as N,a1 as a,_ as W,a9 as X,a0 as o,a8 as w,aa as Y}from"./index-B3NfTy9c.js";import{P as Z,L as j}from"./index-BCKYGgDA.js";import{_ as q,b as G,B as H,e as k}from"./CpNavBar-Bw6InvSq.js";import{P as J}from"./index-akODjGxm.js";import{_ as K}from"./CpImage.vue_vue_type_script_setup_true_lang-Dt07-cwu.js";import{a as Q}from"./common-DUQeBoE8.js";import{C as tt}from"./CpPutin-BPomToWz.js";import{T as et,a as st}from"./index-rZp8Za-Y.js";import"./use-tab-status-Cha-vPpV.js";import"./index-DDJIM9jg.js";import"./use-id-BST6_XeV.js";import"./index-DKdzqhdG.js";const at={class:"page"},ot={class:"tab-wrap"},nt={class:"p-4"},it=["onClick"],lt={class:"push-tag"},dt={class:"title-line"},rt={class:"title"},ct={class:"status"},_t={class:"plan-content"},pt={class:"banner"},mt={class:"van-swipe my-swipe"},ut={class:"van-swipe__track",style:{"transition-duration":"0ms",transform:"translateX(0px)",width:"165px"}},ht={class:"van-swipe-item",style:{width:"165px"}},vt={class:"app-content"},ft={class:"app-title"},gt={class:"logo"},wt={class:"app-title-wrap"},yt={class:"app-name"},bt={class:"app-desc"},xt={class:"app-tag"},Ct={class:"tag"},Pt={class:"tag"},Nt={class:"plan-text"},kt={class:"put-wrap"},Bt={class:"put-item"},Lt={class:"label"},St={class:"value"},Vt={class:"put-item"},Dt={class:"label"},Tt={class:"progress"},At={class:"progress-text"},Rt={class:"title-line mt-2"},$t={class:"title"},zt={key:0,class:"btn-wrap"},Ft={class:"text-[3.2vw]"},It=M({__name:"order",setup(Mt){const B=Q(),{t:e}=O(),m=l(0),r=l({page:0,pageSize:10,type:m.value}),p=l(!1),u=l(!1),h=l([]),y=l(0),b=async()=>{u.value||(p.value=!0,r.value.page++,await k(r.value).then(n=>{h.value.push(...n.data.list),y.value=n.data.waitSendNum,r.value.page>=n.data.total_page&&(u.value=!0),p.value=!1}).catch(()=>{p.value=!1}))},v=l(!1),L=async()=>{r.value.page=1,await k(r.value).then(n=>{h.value=n.data.list,y.value=n.data.waitSendNum,v.value=!1}).catch(()=>{v.value=!1})};U(m,async n=>{r.value.page=0,r.value.type=n,h.value=[],u.value=!1,b()});const c=l(null),S=(n,d)=>{d.stopPropagation(),c.value&&(c.value.showBottom3=!0,c.value.order_id=n.id,c.value.min=n.min,c.value.max=n.max)},x=l([]),V=async()=>{await G("1").then(n=>{x.value=n.data})};let D={1:e("order.officialPush"),2:e("order.unofficialPush")},T={0:e("order.pendingPlacement"),1:e("order.matching"),2:e("order.placing"),3:e("order.placementFailed"),4:e("order.waitingSettlement"),5:e("order.settlementSuccess")};return E(()=>{Promise.all([V()])}),(n,d)=>{const A=q,_=st,R=et,C=K,$=J,z=H,F=j,I=Z;return w(),f(N,null,[i(A,{isLoginOut:!0}),t("div",at,[t("div",ot,[i(R,{active:m.value,"onUpdate:active":d[0]||(d[0]=s=>m.value=s)},{default:g(()=>[i(_,{title:a(e)("order.all")},null,8,["title"]),i(_,{title:a(e)("order.pendingPlacement"),badge:y.value||""},null,8,["title","badge"]),i(_,{title:a(e)("order.matching")},null,8,["title"]),i(_,{title:a(e)("order.placing")},null,8,["title"]),i(_,{title:a(e)("order.placementFailed")},null,8,["title"]),i(_,{title:a(e)("order.placementCompleted")},null,8,["title"])]),_:1},8,["active"])]),t("div",nt,[i(I,{modelValue:v.value,"onUpdate:modelValue":d[2]||(d[2]=s=>v.value=s),onRefresh:L},{default:g(()=>[i(F,{loading:p.value,"onUpdate:loading":d[1]||(d[1]=s=>p.value=s),finished:u.value,onLoad:b,"finished-text":a(e)("common.noMore")},{default:g(()=>[(w(!0),f(N,null,W(h.value,s=>(w(),f("div",{class:"plan-item",onClick:P=>n.$router.push("orderDetail?id="+s.id)},[t("div",lt,o(a(D)[s.form]),1),t("div",dt,[t("span",rt,o(a(e)("order.planNumber"))+": "+o(s.order_no),1),t("span",ct,o(a(T)[s.state]),1)]),t("div",_t,[t("div",pt,[t("div",mt,[t("div",ut,[t("div",ht,[i(C,{name:s.image,width:"10.3rem",height:"5.75rem",radius:"10%"},null,8,["name"])])])])]),t("div",vt,[t("div",ft,[t("div",gt,[i(C,{name:s.goods_logo,width:"1.875rem",height:"1.875rem",radius:"10%"},null,8,["name"])]),t("div",wt,[t("div",yt,o(s.goods_name),1),t("div",bt,o(s.type_name),1)])]),t("div",xt,[t("div",Ct,o(a(e)("order.video")),1),t("div",Pt,o(a(e)("order.landingPage")),1)])])]),t("div",Nt,o(s.goods_intro),1),t("div",kt,[t("div",Bt,[t("span",Lt,o(a(e)("order.placementAmount")),1),t("span",St,o(x.value[1])+" "+o(s.money),1)]),t("div",Vt,[t("span",Dt,o(a(e)("order.placementProgress")),1),t("div",Tt,[i($,{percentage:s.schedule,"pivot-text":"",style:{height:"5px",width:"100%"}},null,8,["percentage"]),t("span",At,o(s.schedule)+"%",1)])])]),t("div",Rt,[t("span",$t,o(a(e)("order.createTime"))+": "+o(a(B).formatToMonthDay(s.create_time,2)),1)]),s.state==0?(w(),f("div",zt,[i(z,{type:"primary",size:"small",round:"",class:"button",onClick:P=>S(s,P),style:{width:"6.5rem",height:"2.125rem","z-index":"999"}},{default:g(()=>[t("span",Ft,o(a(e)("order.placement")),1)]),_:2},1032,["onClick"])])):X("",!0)],8,it))),256))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])])]),i(tt,{ref_key:"childRef",ref:c},null,512)],64)}}}),Kt=Y(It,[["__scopeId","data-v-9ac367f1"]]);export{Kt as default};
