import{d as U,V as k,a as c,w as z,W as f,f as u,X as t,Y as h,a0 as y,_ as o,a1 as D,ah as E,Z as d,a5 as g,a7 as I}from"./index-ukjrOXmD.js";import{P as M,L as P}from"./index-3tmxSALO.js";import{_ as R,j as x}from"./CpNavBar-CJ_J_C6V.js";import{a as S}from"./common-DRmPW0fO.js";import{T as j,a as F}from"./index-D-HXxA9e.js";import"./use-tab-status-Chvd7XOz.js";import"./use-id-Bo6MzUit.js";import"./index-BVv6S0i2.js";const W={class:"tab-wrap"},X={class:"coupon-list"},Y={role:"feed",class:"van-list","aria-busy":"false"},Z={class:"item-left"},q={class:"coupon-type"},G={class:"item-content"},H={class:"title-line"},J={class:"title"},K={class:"text"},O={class:"name"},Q={class:"time"},$=U({__name:"coupons",setup(ee){const{t:e}=k(),b=S(),n=c({page:0,pageSize:10}),p=c(0),r=c(!1),_=c(!1),v=c([]),w=async()=>{_.value||(r.value=!0,n.value.page++,await x(n.value,p.value).then(i=>{v.value.push(...i.data.list),n.value.page>=i.data.total_page&&(_.value=!0),r.value=!1}).catch(()=>{r.value=!1}))},l=c(!1),C=async()=>{n.value.page=1,await x(n.value,p.value).then(i=>{v.value=i.data.list,l.value=!1}).catch(()=>{l.value=!1})};z(p,async i=>{n.value.page=1,v.value=[],l.value=!0,await x(n.value,i).then(a=>{v.value=a.data.list,l.value=!1}).catch(()=>{l.value=!1})});let L={1:e("coupons.valueAdded"),2:e("coupons.deduction"),3:e("coupons.team"),4:e("coupons.custom"),5:e("coupons.fixedAmount")},T={1:e("coupons.unused"),2:e("coupons.used"),3:e("coupons.isExpired")};return(i,a)=>{const V=R,m=F,N=j,A=P,B=M;return g(),f(y,null,[u(V),t("div",W,[u(N,{active:p.value,"onUpdate:active":a[0]||(a[0]=s=>p.value=s),"line-width":"5.625rem"},{default:h(()=>[u(m,{title:o(e)("coupons.all")},null,8,["title"]),u(m,{title:o(e)("coupons.unused")},null,8,["title"]),u(m,{title:o(e)("coupons.used")},null,8,["title"])]),_:1},8,["active"])]),u(B,{modelValue:l.value,"onUpdate:modelValue":a[2]||(a[2]=s=>l.value=s),onRefresh:C},{default:h(()=>[u(A,{loading:r.value,"onUpdate:loading":a[1]||(a[1]=s=>r.value=s),finished:_.value,onLoad:w,"finished-text":o(e)("common.noMore")},{default:h(()=>[t("div",X,[t("div",Y,[(g(!0),f(y,null,D(v.value,s=>(g(),f("div",{class:E(["coupon-item",s.state==1?"":"used"])},[t("div",Z,[t("div",q,d(o(L)[s.type]),1),a[3]||(a[3]=t("div",{class:"tag"},null,-1))]),t("div",G,[t("div",H,[t("div",J,d(s.name),1),t("span",K,d(o(T)[s.state]),1)]),t("div",O,d(s.intro),1),t("div",Q,d(o(b).formatToMonthDay(s.create_time,1))+" "+d(o(e)("coupons.expired")),1)])],2))),256)),a[4]||(a[4]=t("div",{class:"van-list__placeholder"},null,-1))])])]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])],64)}}}),ce=I($,[["__scopeId","data-v-05f11be2"]]);export{ce as default};
