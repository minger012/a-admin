import{_ as I,D as M,B as O,T as b}from"./CpNavBar-BEpOqNwz.js";import{P as U,L as q}from"./index-DSnf37WV.js";import{P as E}from"./index-CVGIRAMq.js";import{_ as X}from"./CpImage.vue_vue_type_script_setup_true_lang-CHeeNF9Z.js";import{a as j}from"./common-MFFV5Eot.js";import{C as G}from"./CpPutin-DxuQi98z.js";import{d as H,u as J,a as l,w as K,o as Q,l as f,b as n,q as e,s as g,F as P,y as a,A as W,D as Y,x as o,C as w,_ as Z}from"./index-CS2Ya4Ki.js";import{T as ee,a as te}from"./index-CIBNaqdH.js";import"./use-tab-status-DADCZxH9.js";import"./index-CIPAbOIm.js";import"./use-id-sX8ZKSaD.js";import"./index-MO7IvCiQ.js";const se={class:"page"},ae={class:"tab-wrap"},oe={class:"p-4"},ne=["onClick"],ie={class:"push-tag"},le={class:"title-line"},de={class:"title"},re={class:"status"},ce={class:"plan-content"},_e={class:"banner"},pe={class:"van-swipe my-swipe"},me={class:"van-swipe__track",style:{"transition-duration":"0ms",transform:"translateX(0px)",width:"165px"}},ue={class:"van-swipe-item",style:{width:"165px"}},he={class:"app-content"},ve={class:"app-title"},fe={class:"logo"},ge={class:"app-title-wrap"},we={class:"app-name"},ye={class:"app-desc"},Ce={class:"app-tag"},xe={class:"tag"},be={class:"tag"},Pe={class:"plan-text"},ke={class:"put-wrap"},De={class:"put-item"},Be={class:"label"},Le={class:"value"},Ne={class:"put-item"},Te={class:"label"},Ve={class:"progress"},Ae={class:"progress-text"},Fe={class:"title-line mt-2"},Re={class:"title"},Se={key:0,class:"btn-wrap"},$e={class:"text-[3.2vw]"},ze=H({__name:"order",setup(Ie){const k=j(),{t}=J(),m=l(0),d=l({page:0,pageSize:10,type:m.value}),_=l(!1),u=l(!1),h=l([]),y=async()=>{u.value||(_.value=!0,d.value.page++,await b(d.value).then(i=>{h.value.push(...i.data.list),d.value.page>=i.data.total_page&&(u.value=!0),_.value=!1}).catch(()=>{_.value=!1}))},v=l(!1),D=async()=>{d.value.page=1,await b(d.value).then(i=>{h.value=i.data.list,v.value=!1}).catch(()=>{v.value=!1})};K(m,async i=>{d.value.page=0,d.value.type=i,h.value=[],u.value=!1,y()});const p=l(null),B=(i,r)=>{p.value&&(p.value.showBottom3=!0,p.value.plan_id=i,p.value.plan_name=i)},C=l([]),L=async()=>{await M("1").then(i=>{C.value=i.data})};let N={1:t("order.officialPush"),2:t("order.unofficialPush")},T={0:t("order.pendingPlacement"),1:t("order.matching"),2:t("order.placing"),3:t("order.placementFailed"),4:t("order.waitingSettlement"),5:t("order.settlementSuccess")};return Q(()=>{Promise.all([L()])}),(i,r)=>{const V=I,c=te,A=ee,x=X,F=E,R=O,S=q,$=U;return w(),f(P,null,[n(V,{isLoginOut:!0}),e("div",se,[e("div",ae,[n(A,{active:m.value,"onUpdate:active":r[0]||(r[0]=s=>m.value=s)},{default:g(()=>[n(c,{title:a(t)("order.all")},null,8,["title"]),n(c,{title:a(t)("order.pendingPlacement")},null,8,["title"]),n(c,{title:a(t)("order.matching")},null,8,["title"]),n(c,{title:a(t)("order.placing")},null,8,["title"]),n(c,{title:a(t)("order.placementFailed")},null,8,["title"]),n(c,{title:a(t)("order.placementCompleted")},null,8,["title"])]),_:1},8,["active"])]),e("div",oe,[n($,{modelValue:v.value,"onUpdate:modelValue":r[2]||(r[2]=s=>v.value=s),onRefresh:D},{default:g(()=>[n(S,{loading:_.value,"onUpdate:loading":r[1]||(r[1]=s=>_.value=s),finished:u.value,onLoad:y,"finished-text":a(t)("common.noMore")},{default:g(()=>[(w(!0),f(P,null,W(h.value,s=>(w(),f("div",{class:"plan-item",onClick:z=>i.$router.push("orderDetail?id="+s.id)},[e("div",ie,o(a(N)[s.form]),1),e("div",le,[e("span",de,o(a(t)("order.planNumber"))+": "+o(s.order_no),1),e("span",re,o(a(T)[s.state]),1)]),e("div",ce,[e("div",_e,[e("div",pe,[e("div",me,[e("div",ue,[n(x,{name:s.image,width:"10.3rem",height:"5.75rem",radius:"10%"},null,8,["name"])])])])]),e("div",he,[e("div",ve,[e("div",fe,[n(x,{name:s.goods_logo,width:"1.875rem",height:"1.875rem",radius:"10%"},null,8,["name"])]),e("div",ge,[e("div",we,o(s.goods_name),1),e("div",ye,o(s.type_name),1)])]),e("div",Ce,[e("div",xe,o(a(t)("order.video")),1),e("div",be,o(a(t)("order.landingPage")),1)])])]),e("div",Pe,o(s.goods_intro),1),e("div",ke,[e("div",De,[e("span",Be,o(a(t)("order.placementAmount")),1),e("span",Le,o(C.value[1])+" "+o(s.money),1)]),e("div",Ne,[e("span",Te,o(a(t)("order.placementProgress")),1),e("div",Ve,[n(F,{percentage:s.schedule,"pivot-text":"",style:{height:"5px",width:"100%"}},null,8,["percentage"]),e("span",Ae,o(s.schedule)+"%",1)])])]),e("div",Fe,[e("span",Re,o(a(t)("order.createTime"))+": "+o(a(k).formatToMonthDay(s.create_time,2)),1)]),s.state==0?(w(),f("div",Se,[n(R,{type:"primary",size:"small",round:"",class:"button",onClick:z=>B(s.plan_id,s.name),style:{width:"6.5rem",height:"2.125rem","z-index":"999"}},{default:g(()=>[e("span",$e,o(a(t)("order.placement")),1)]),_:2},1032,["onClick"])])):Y("",!0)],8,ne))),256))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])])]),n(G,{ref_key:"childRef",ref:p},null,512)],64)}}}),We=Z(ze,[["__scopeId","data-v-05d3f0d5"]]);export{We as default};
