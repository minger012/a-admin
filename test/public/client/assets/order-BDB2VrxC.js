import{_ as M,D as O,B as U,T as P}from"./CpNavBar-n7MbzKf8.js";import{P as q,L as E}from"./index-Dc2O9QY3.js";import{P as X}from"./index-C-ALrl3N.js";import{_ as j}from"./CpImage.vue_vue_type_script_setup_true_lang-Cf7femAU.js";import{a as G}from"./common-5rSUidVe.js";import{C as H}from"./CpPutin-D16H-wfP.js";import{d as J,u as K,a as l,w as Q,o as W,l as g,b as i,q as e,s as f,F as N,y as a,A as Y,D as Z,x as o,C as w,_ as ee}from"./index-BDHkMs_b.js";import{T as te,a as se}from"./index-BrZsSCVf.js";import"./use-tab-status-TafqOlit.js";import"./index-tOWxoHPY.js";import"./use-id-CeQUJRjB.js";import"./index-Dw1tlGII.js";const ae={class:"page"},oe={class:"tab-wrap"},ne={class:"p-4"},ie={class:"plan-item"},le={class:"push-tag"},de={class:"title-line"},re={class:"title"},ce={class:"status"},_e=["onClick"],pe={class:"banner"},me={class:"van-swipe my-swipe"},ue={class:"van-swipe__track",style:{"transition-duration":"0ms",transform:"translateX(0px)",width:"165px"}},he={class:"van-swipe-item",style:{width:"165px"}},ve={class:"app-content"},ge={class:"app-title"},fe={class:"logo"},we={class:"app-title-wrap"},ye={class:"app-name"},be={class:"app-desc"},xe={class:"app-tag"},Ce={class:"tag"},Pe={class:"tag"},Ne={class:"plan-text"},ke={class:"put-wrap"},De={class:"put-item"},Be={class:"label"},Le={class:"value"},Se={class:"put-item"},Te={class:"label"},Ve={class:"progress"},Ae={class:"progress-text"},Fe={class:"title-line mt-2"},Re={class:"title"},$e={key:0,class:"btn-wrap"},ze={class:"text-[3.2vw]"},Ie=J({__name:"order",setup(Me){const k=G(),{t}=K(),m=l(0),d=l({page:0,pageSize:10,type:m.value}),p=l(!1),u=l(!1),h=l([]),y=l(0),b=async()=>{u.value||(p.value=!0,d.value.page++,await P(d.value).then(n=>{h.value.push(...n.data.list),y.value=n.data.waitSendNum,d.value.page>=n.data.total_page&&(u.value=!0),p.value=!1}).catch(()=>{p.value=!1}))},v=l(!1),D=async()=>{d.value.page=1,await P(d.value).then(n=>{h.value=n.data.list,y.value=n.data.waitSendNum,v.value=!1}).catch(()=>{v.value=!1})};Q(m,async n=>{d.value.page=0,d.value.type=n,h.value=[],u.value=!1,b()});const r=l(null),B=n=>{r.value&&(r.value.showBottom3=!0,r.value.order_id=n.id,r.value.min=n.min,r.value.max=n.max)},x=l([]),L=async()=>{await O("1").then(n=>{x.value=n.data})};let S={1:t("order.officialPush"),2:t("order.unofficialPush")},T={0:t("order.pendingPlacement"),1:t("order.matching"),2:t("order.placing"),3:t("order.placementFailed"),4:t("order.waitingSettlement"),5:t("order.settlementSuccess")};return W(()=>{Promise.all([L()])}),(n,c)=>{const V=M,_=se,A=te,C=j,F=X,R=U,$=E,z=q;return w(),g(N,null,[i(V,{isLoginOut:!0}),e("div",ae,[e("div",oe,[i(A,{active:m.value,"onUpdate:active":c[0]||(c[0]=s=>m.value=s)},{default:f(()=>[i(_,{title:a(t)("order.all")},null,8,["title"]),i(_,{title:a(t)("order.pendingPlacement"),badge:y.value||""},null,8,["title","badge"]),i(_,{title:a(t)("order.matching")},null,8,["title"]),i(_,{title:a(t)("order.placing")},null,8,["title"]),i(_,{title:a(t)("order.placementFailed")},null,8,["title"]),i(_,{title:a(t)("order.placementCompleted")},null,8,["title"])]),_:1},8,["active"])]),e("div",ne,[i(z,{modelValue:v.value,"onUpdate:modelValue":c[2]||(c[2]=s=>v.value=s),onRefresh:D},{default:f(()=>[i($,{loading:p.value,"onUpdate:loading":c[1]||(c[1]=s=>p.value=s),finished:u.value,onLoad:b,"finished-text":a(t)("common.noMore")},{default:f(()=>[(w(!0),g(N,null,Y(h.value,s=>(w(),g("div",ie,[e("div",le,o(a(S)[s.form]),1),e("div",de,[e("span",re,o(a(t)("order.planNumber"))+": "+o(s.order_no),1),e("span",ce,o(a(T)[s.state]),1)]),e("div",{class:"plan-content",onClick:I=>n.$router.push("orderDetail?id="+s.id)},[e("div",pe,[e("div",me,[e("div",ue,[e("div",he,[i(C,{name:s.image,width:"10.3rem",height:"5.75rem",radius:"10%"},null,8,["name"])])])])]),e("div",ve,[e("div",ge,[e("div",fe,[i(C,{name:s.goods_logo,width:"1.875rem",height:"1.875rem",radius:"10%"},null,8,["name"])]),e("div",we,[e("div",ye,o(s.goods_name),1),e("div",be,o(s.type_name),1)])]),e("div",xe,[e("div",Ce,o(a(t)("order.video")),1),e("div",Pe,o(a(t)("order.landingPage")),1)])])],8,_e),e("div",Ne,o(s.goods_intro),1),e("div",ke,[e("div",De,[e("span",Be,o(a(t)("order.placementAmount")),1),e("span",Le,o(x.value[1])+" "+o(s.money),1)]),e("div",Se,[e("span",Te,o(a(t)("order.placementProgress")),1),e("div",Ve,[i(F,{percentage:s.schedule,"pivot-text":"",style:{height:"5px",width:"100%"}},null,8,["percentage"]),e("span",Ae,o(s.schedule)+"%",1)])])]),e("div",Fe,[e("span",Re,o(a(t)("order.createTime"))+": "+o(a(k).formatToMonthDay(s.create_time,2)),1)]),s.state==0?(w(),g("div",$e,[i(R,{type:"primary",size:"small",round:"",class:"button",onClick:I=>B(s),style:{width:"6.5rem",height:"2.125rem","z-index":"999"}},{default:f(()=>[e("span",ze,o(a(t)("order.placement")),1)]),_:2},1032,["onClick"])])):Z("",!0)]))),256))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])])]),i(H,{ref_key:"childRef",ref:r},null,512)],64)}}}),Ye=ee(Ie,[["__scopeId","data-v-4c6cb217"]]);export{Ye as default};
