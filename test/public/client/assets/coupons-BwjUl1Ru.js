import{_ as R,E as f}from"./CpNavBar-YKSWdiMH.js";import{P as D,L as E}from"./index-B93TrPKR.js";import{a as U}from"./common-C6QzqCjM.js";import{d as k,u as z,r as c,w as F,c as g,a as u,b as t,i as h,e as s,F as b,g as I,x as M,t as d,j as x,_ as P}from"./index-DZ_urxbV.js";import{T as S,a as j}from"./index-ts9YvAcl.js";import"./use-tab-status-DgQygf_o.js";import"./use-id-CwjrKIfK.js";import"./index-CUD9baFC.js";const q={class:"tab-wrap"},G={class:"coupon-list"},H={role:"feed",class:"van-list","aria-busy":"false"},J={class:"item-left"},K={class:"coupon-type"},O={class:"item-content"},Q={class:"title-line"},W={class:"title"},X={class:"text"},Y={class:"name"},Z={class:"time"},$=k({__name:"coupons",setup(ee){const{t:e}=z(),w=U(),n=c({page:0,pageSize:10}),p=c(0),r=c(!1),v=c(!1),m=c([]),y=async()=>{v.value||(r.value=!0,n.value.page++,await f(n.value,p.value).then(i=>{m.value.push(...i.data.list),n.value.page>=i.data.total_page&&(v.value=!0),r.value=!1}).catch(()=>{r.value=!1}))},l=c(!1),C=async()=>{n.value.page=1,await f(n.value,p.value).then(i=>{m.value=i.data.list,l.value=!1}).catch(()=>{l.value=!1})};F(p,async i=>{n.value.page=1,m.value=[],l.value=!0,await f(n.value,i).then(a=>{m.value=a.data.list,l.value=!1}).catch(()=>{l.value=!1})});let L={1:e("coupons.valueAdded"),2:e("coupons.deduction"),3:e("coupons.team"),4:e("coupons.custom"),5:e("coupons.fixedAmount")},T={1:e("coupons.unused"),2:e("coupons.used"),3:e("coupons.isExpired")};return(i,a)=>{const N=R,_=j,V=S,A=E,B=D;return x(),g(b,null,[u(N),t("div",q,[u(V,{active:p.value,"onUpdate:active":a[0]||(a[0]=o=>p.value=o),"line-width":"5.625rem"},{default:h(()=>[u(_,{title:s(e)("coupons.all")},null,8,["title"]),u(_,{title:s(e)("coupons.unused")},null,8,["title"]),u(_,{title:s(e)("coupons.used")},null,8,["title"])]),_:1},8,["active"])]),u(B,{modelValue:l.value,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value=o),onRefresh:C,"pulling-text":s(e)("common.pullDownRefresh"),"loosing-text":s(e)("common.releaseRefresh"),"loading-text":s(e)("common.loading")},{default:h(()=>[u(A,{loading:r.value,"onUpdate:loading":a[1]||(a[1]=o=>r.value=o),finished:v.value,"finished-text":s(e)("common.noMore"),"loading-text":s(e)("common.loading"),"error-text":s(e)("common.fail"),onLoad:y},{default:h(()=>[t("div",G,[t("div",H,[(x(!0),g(b,null,I(m.value,o=>(x(),g("div",{class:M(["coupon-item",o.state==1?"":"used"])},[t("div",J,[t("div",K,d(s(L)[o.type]),1),a[3]||(a[3]=t("div",{class:"tag"},null,-1))]),t("div",O,[t("div",Q,[t("div",W,d(o.name),1),t("span",X,d(s(T)[o.state]),1)]),t("div",Y,d(o.intro),1),t("div",Z,d(s(w).formatToMonthDay(o.create_time,1))+" "+d(s(e)("coupons.expired")),1)])],2))),256)),a[4]||(a[4]=t("div",{class:"van-list__placeholder"},null,-1))])])]),_:1},8,["loading","finished","finished-text","loading-text","error-text"])]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"])],64)}}}),ce=P($,[["__scopeId","data-v-9b2d53be"]]);export{ce as default};
