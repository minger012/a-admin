import{_ as P,E as v}from"./CpNavBar-IE_RTttE.js";import{P as R,L as U}from"./index-AsGJPBTu.js";import{a as k}from"./common-qoeIF8Hz.js";import{d as z,r as i,w as A,c as m,a as n,b as e,h as f,F as x,f as D,x as E,t as r,u as h,i as g,_ as F}from"./index-C8vOelEV.js";import{T as S,a as I}from"./index-DvXOVefQ.js";import"./use-tab-status-C1KnTicq.js";import"./use-id-CrmrtZtk.js";import"./index-C_Kx7o3o.js";const M={class:"tab-wrap"},j={class:"coupon-list"},q={role:"feed",class:"van-list","aria-busy":"false"},G={class:"item-left"},H={class:"coupon-type"},J={class:"item-content"},K={class:"title-line"},O={class:"title"},Q={class:"text"},W={class:"name"},X={class:"time"},Y=z({__name:"coupons",setup(Z){const b=k(),s=i({page:0,pageSize:10}),u=i(0),d=i(!1),p=i(!1),c=i([]),w=async()=>{p.value||(d.value=!0,s.value.page++,await v(s.value,u.value).then(l=>{c.value.push(...l.data.list),s.value.page>=l.data.total_page&&(p.value=!0),d.value=!1}).catch(()=>{d.value=!1}))},o=i(!1),y=async()=>{s.value.page=1,await v(s.value,u.value).then(l=>{c.value=l.data.list,o.value=!1}).catch(()=>{o.value=!1})};A(u,async l=>{s.value.page=1,c.value=[],o.value=!0,await v(s.value,l).then(t=>{c.value=t.data.list,o.value=!1}).catch(()=>{o.value=!1})});let C={1:"增值",2:"抵扣",3:"团队",4:"自定义",5:"固定金额"},L={1:"未使用",2:"已使用",3:"已过期"};return(l,t)=>{const T=P,_=I,N=S,V=U,B=R;return g(),m(x,null,[n(T),e("div",M,[n(N,{active:u.value,"onUpdate:active":t[0]||(t[0]=a=>u.value=a),"line-width":"5.625rem"},{default:f(()=>[n(_,{title:"全部"}),n(_,{title:"未使用"}),n(_,{title:"已使用"})]),_:1},8,["active"])]),n(B,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value=a),onRefresh:y,"pulling-text":"Pull down to refresh...","loosing-text":"Release to refresh...","loading-text":"loading..."},{default:f(()=>[n(V,{loading:d.value,"onUpdate:loading":t[1]||(t[1]=a=>d.value=a),finished:p.value,"finished-text":"no more","loading-text":"loading...","error-text":"fail",onLoad:w},{default:f(()=>[e("div",j,[e("div",q,[(g(!0),m(x,null,D(c.value,a=>(g(),m("div",{class:E(["coupon-item",a.state==1?"":"used"])},[e("div",G,[e("div",H,r(h(C)[a.type]),1),t[3]||(t[3]=e("div",{class:"tag"},null,-1))]),e("div",J,[e("div",K,[e("div",O,r(a.name),1),e("span",Q,r(h(L)[a.state]),1)]),e("div",W,r(a.intro),1),e("div",X,r(h(b).formatToMonthDay(a.create_time,1))+" 過期 ",1)])],2))),256)),t[4]||(t[4]=e("div",{class:"van-list__placeholder"},null,-1))])])]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])],64)}}}),ie=F(Y,[["__scopeId","data-v-e0bfd4b8"]]);export{ie as default};
