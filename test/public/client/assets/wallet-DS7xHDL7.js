import{d as et,V as at,ac as ot,a as d,w as R,v as lt,W as I,f as i,Y as t,a1 as a,$ as u,P as nt,Z as W,a0 as s,I as it,a3 as dt,_ as rt,a5 as J,a7 as ct,aj as ut,a8 as P,aa as _t}from"./index-mtBof0yq.js";import"./index-B7Ul_2s7.js";import{F as pt}from"./index-DYTsFS2o.js";import{P as vt,N as mt}from"./index-2ioFuMJJ.js";import{P as wt,L as ht}from"./index-RWGloPYG.js";import{E as ft}from"./index-DKEPJXHn.js";import{m as K,_ as yt,b as gt,a as bt,B as kt,w as xt,n as Ct}from"./CpNavBar-BFiFX_0Y.js";import Bt from"./recharge-banner-Bkr9lTMK-FM_NWu-G.js";import{a as Dt,u as Mt}from"./common-DNA5xOtU.js";import"./use-id-BBD2yuxk.js";import"./use-tab-status-D-yfOB2G.js";const Pt={class:"page"},$t={class:"section"},Tt={class:"title-line"},Vt={class:"title"},Ut={class:"tag"},St={class:"money"},At={class:"currency"},Lt={class:"amount"},It={class:"money-content"},Nt={class:"money-item"},Ft={class:"label"},jt={class:"text"},zt={class:"money-item"},Et={class:"label"},Rt={class:"text"},Wt={class:"money-item"},Jt={class:"label"},Kt={class:"text"},Yt={class:"btn-wrap space-x-3"},Zt={class:"text-sm"},qt={class:"text-sm"},Gt={class:"link-list"},Ht={class:"link-title"},Ot={class:"label"},Qt={class:"link-title"},Xt={class:"label"},ts={class:"record-wrap"},ss={class:"record-title"},es={class:"record-list"},as=["onClick"],os={class:"record-content"},ls={class:"time"},ns={class:"dialog-wrap"},is={class:"dialog-title",style:{margin:"0px"}},ds={class:"content-wrap"},rs={class:"content-item"},cs={class:"label"},us={class:"text"},_s={class:"content-item"},ps={class:"label"},vs={class:"text"},ms={class:"content-item"},ws={class:"label"},hs={class:"text"},fs={class:"content-item"},ys={class:"label"},gs={class:"text"},bs={class:"dialog-wrap"},ks={class:"dialog-title"},xs={class:"desc"},Cs={class:"text-sm"},Bs={class:"dialog-wrap"},Ds={class:"dialog-title"},Ms={class:"form-wrap"},Ps={class:"label"},$s={class:"input-wrap"},Ts={class:"label"},Vs={class:"form-tips"},Us={class:"count-money"},Ss={class:"flex justify-center"},As={class:"text-sm"},Ls={class:"dialog-wrap"},Is={class:"dialog-title",style:{margin:"0px"}},Ns={class:"text"},Fs={class:"text"},js={class:"text"},zs={class:"flex justify-center"},Es={class:"text-sm"},Rs=et({__name:"wallet",setup(Ws){const{t:o}=at(),N=Dt(),w=Mt(),F=ct(),j=ot(),x=d({page:0,pageSize:10}),y=d(!1),C=d(!1),$=d([]),z=async()=>{C.value||(y.value=!0,x.value.page++,await Ct(x.value).then(l=>{$.value.push(...l.data.list),x.value.page>=l.data.total_page&&(C.value=!0),y.value=!1}).catch(()=>{y.value=!1}))},h=d(!1),Y=()=>{K().then(l=>{r.value=l.data,h.value=!1}).catch(()=>h.value=!1),x.value.page=0,C.value=!1,$.value=[],z()},T=d(!1),B=d(!1),D=d(!1),V=d(!1),_=d(""),U=d(!0);R(_,l=>{const e=l.replace(/[^\d]/g,"").slice(0,6);e!==l&&(_.value=e),_.value.length==6?U.value=!1:U.value=!0});const f=d(),S=d(!0);R(f,l=>{l>0&&l<=r.value.money?S.value=!1:S.value=!0});const Z=()=>{var l,e;if(r!=null&&r.value){if(((l=j.user)==null?void 0:l.set_card)!=1){J(o("wallet.withdrawal.rules.bindCardFirst")),F.push("bindCard");return}if(((e=j.user)==null?void 0:e.set_pay_password)!=1){J(o("wallet.withdrawal.rules.setPasswordFirst")),F.push("paypassword?isJump=1");return}D.value=!0}},E=async()=>{if(!_.value){B.value=!0;return}B.value=!1,await xt(f.value,_.value).then(l=>{D.value=!1,f.value="",location.reload(),ut(l.msg)}).finally(()=>{_.value=""})},q=l=>{l&&window.open(l)},r=d(),g=d(),c=d([]),G=async()=>{await gt("1,2,4").then(l=>{c.value=l.data})};return lt(async()=>{h.value=!0,Promise.all([G(),await K().then(l=>{r.value=l.data,h.value=!1}).catch(()=>h.value=!1)])}),(l,e)=>{const H=yt,A=bt,b=kt,L=it,Js=ft,O=ht,Q=wt,M=nt,X=vt,tt=mt,st=pt;return P(),I(W,null,[i(H,{title:a(o)("wallet.title")},null,8,["title"]),t("div",Pt,[i(Q,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=n=>h.value=n),onRefresh:Y},{default:u(()=>{var n,p,v,k;return[t("div",$t,[t("div",Tt,[t("div",Vt,[t("span",null,s(a(o)("wallet.totalAssets")),1),i(A,{name:"eye"})]),t("div",Ut,s(c.value[2]),1)]),t("div",St,[t("span",At,s(c.value[1]),1),t("span",Lt,s(a(w).formatMoney((n=r.value)==null?void 0:n.money)),1)]),t("div",It,[t("div",Nt,[t("span",Ft,s(a(o)("wallet.availableBalance")),1),t("span",jt,s(c.value[1])+" "+s(a(w).formatMoney((p=r.value)==null?void 0:p.money)),1)]),t("div",zt,[t("span",Et,s(a(o)("wallet.pendingConsumption")),1),t("span",Rt,s(c.value[1])+" "+s(a(w).formatMoney((v=r.value)==null?void 0:v.wait_putIn)),1)]),t("div",Wt,[t("span",Jt,s(a(o)("wallet.pendingSettlement")),1),t("span",Kt,s(c.value[1])+" "+s(a(w).formatMoney((k=r.value)==null?void 0:k.wait_money)),1)])]),t("div",Yt,[i(b,{type:"primary",block:"",plain:"",round:"",onClick:e[0]||(e[0]=m=>Z())},{default:u(()=>[t("span",Zt,s(a(o)("wallet.withdraw")),1)]),_:1}),i(b,{type:"primary",round:"",onClick:e[1]||(e[1]=m=>V.value=!0),block:""},{default:u(()=>[t("span",qt,s(a(o)("wallet.deposit")),1)]),_:1})]),t("div",Gt,[t("div",{class:"link-item",onClick:e[2]||(e[2]=m=>l.$router.push("bindCard"))},[t("div",Ht,[i(A,{name:"card-pos-2",size:"5vw"}),t("span",Ot,s(a(o)("wallet.bindBankCard")),1)]),i(L,{name:"arrow"})]),t("div",{class:"link-item",onClick:e[3]||(e[3]=m=>l.$router.push("paypassword"))},[t("div",Qt,[i(A,{name:"edit-password",size:"5vw"}),t("span",Xt,s(a(o)("wallet.changePaymentPassword")),1)]),i(L,{name:"arrow"})])])]),t("div",ts,[t("div",ss,s(a(o)("wallet.fundDetails")),1),t("div",es,[(P(),dt(O,{key:1,loading:y.value,"onUpdate:loading":e[4]||(e[4]=m=>y.value=m),finished:C.value,onLoad:z,"finished-text":a(o)("common.noMore")},{default:u(()=>[(P(!0),I(W,null,rt($.value,m=>(P(),I("div",{class:"record-item",onClick:Ks=>{T.value=!0,g.value=m}},[t("div",os,[e[16]||(e[16]=t("div",{class:"label"},null,-1)),t("div",ls,s(a(N).formatToMonthDay(m.create_time,1)),1)]),i(L,{name:"arrow"})],8,as))),256))]),_:1},8,["loading","finished","finished-text"]))])])]}),_:1},8,["modelValue"])]),i(M,{show:T.value,"onUpdate:show":e[6]||(e[6]=n=>T.value=n),position:"bottom",round:"",style:{height:"55%"}},{default:u(()=>{var n,p,v,k;return[t("div",ns,[t("div",is,s(a(o)("wallet.flowDetail.title")),1),t("div",ds,[t("div",rs,[t("div",cs,s(a(o)("wallet.flowDetail.id")),1),t("div",us,s((n=g.value)==null?void 0:n.id),1)]),t("div",_s,[t("div",ps,s(a(o)("wallet.flowDetail.time")),1),t("div",vs,s(a(N).formatToMonthDay((p=g.value)==null?void 0:p.create_time,1)),1)]),t("div",ms,[t("div",ws,s(a(o)("wallet.flowDetail.amount")),1),t("div",hs,s(c.value[1])+" "+s(a(w).formatMoney((v=g.value)==null?void 0:v.cha)),1)]),t("div",fs,[t("div",ys,s(a(o)("wallet.flowDetail.remarks")),1),t("div",gs,s((k=g.value)==null?void 0:k.remarks),1)])])])]}),_:1},8,["show"]),i(M,{show:B.value,"onUpdate:show":e[9]||(e[9]=n=>B.value=n),position:"bottom",round:"",style:{height:"95%"}},{default:u(()=>[t("div",bs,[t("div",ks,s(a(o)("wallet.paymentPassword.title")),1),t("div",xs,s(a(o)("wallet.paymentPassword.desc")),1),i(X,{value:_.value,length:6},null,8,["value"]),i(tt,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=n=>_.value=n),show:!0},null,8,["modelValue"]),i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},disabled:U.value,onClick:e[8]||(e[8]=n=>E())},{default:u(()=>[t("span",Cs,s(a(o)("wallet.paymentPassword.confirm")),1)]),_:1},8,["disabled"])])]),_:1},8,["show"]),i(M,{show:D.value,"onUpdate:show":e[13]||(e[13]=n=>D.value=n),position:"bottom",round:"",style:{height:"50%"}},{default:u(()=>{var n;return[t("div",Bs,[t("div",Ds,s(a(o)("wallet.withdrawal.title")),1),t("div",Ms,[t("div",Ps,s(a(o)("wallet.withdrawal.enterAmount")),1),t("div",$s,[t("span",Ts,s(c.value[1]),1),i(st,{modelValue:f.value,"onUpdate:modelValue":e[10]||(e[10]=p=>f.value=p)},null,8,["modelValue"])]),t("div",Vs,[t("span",Us,s(a(o)("wallet.withdrawal.available"))+" "+s(c.value[1])+" "+s(a(w).formatMoney((n=r.value)==null?void 0:n.money)),1),t("span",{class:"all-text",onClick:e[11]||(e[11]=p=>{var v;return f.value=a(w).formatMoney((v=r.value)==null?void 0:v.money)})},s(a(o)("wallet.withdrawal.withdrawAll")),1)])]),t("div",Ss,[i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},disabled:S.value,onClick:e[12]||(e[12]=p=>E())},{default:u(()=>[t("span",As,s(a(o)("wallet.withdraw")),1)]),_:1},8,["disabled"])])])]}),_:1},8,["show"]),i(M,{show:V.value,"onUpdate:show":e[15]||(e[15]=n=>V.value=n),position:"bottom",round:"",style:{height:"60%"}},{default:u(()=>[t("div",Ls,[t("div",Is,s(a(o)("wallet.depositTips.title")),1),e[17]||(e[17]=t("img",{class:"banner",width:"343",src:Bt,alt:""},null,-1)),t("p",Ns,s(a(o)("wallet.depositTips.text1")),1),t("p",Fs,s(a(o)("wallet.depositTips.text2")),1),t("p",js,s(a(o)("wallet.depositTips.text3")),1),t("div",zs,[i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},onClick:e[14]||(e[14]=n=>q(r.value.service_address||c.value[4][Math.floor(Math.random()*c.value[4].length)].link))},{default:u(()=>[t("span",Es,s(a(o)("wallet.depositTips.contactService")),1)]),_:1})])])]),_:1},8,["show"])],64)}}}),ae=_t(Rs,[["__scopeId","data-v-951aadc9"]]);export{ae as default};
