import{_ as U,Y as f}from"./CpNavBar-BEpOqNwz.js";import{P as k,L as z}from"./index-DSnf37WV.js";import{a as D}from"./common-MFFV5Eot.js";import{d as E,u as F,a as c,w as I,l as h,b as u,q as t,s as g,F as y,y as o,A as M,J as P,x as d,C as x,_ as R}from"./index-CS2Ya4Ki.js";import{T as S,a as q}from"./index-CIBNaqdH.js";import"./use-tab-status-DADCZxH9.js";import"./use-id-sX8ZKSaD.js";import"./index-MO7IvCiQ.js";const J={class:"tab-wrap"},Y={class:"coupon-list"},j={role:"feed",class:"van-list","aria-busy":"false"},G={class:"item-left"},H={class:"coupon-type"},K={class:"item-content"},O={class:"title-line"},Q={class:"title"},W={class:"text"},X={class:"name"},Z={class:"time"},$=E({__name:"coupons",setup(ee){const{t:e}=F(),b=D(),n=c({page:0,pageSize:10}),p=c(0),r=c(!1),_=c(!1),v=c([]),w=async()=>{_.value||(r.value=!0,n.value.page++,await f(n.value,p.value).then(i=>{v.value.push(...i.data.list),n.value.page>=i.data.total_page&&(_.value=!0),r.value=!1}).catch(()=>{r.value=!1}))},l=c(!1),C=async()=>{n.value.page=1,await f(n.value,p.value).then(i=>{v.value=i.data.list,l.value=!1}).catch(()=>{l.value=!1})};I(p,async i=>{n.value.page=1,v.value=[],l.value=!0,await f(n.value,i).then(s=>{v.value=s.data.list,l.value=!1}).catch(()=>{l.value=!1})});let L={1:e("coupons.valueAdded"),2:e("coupons.deduction"),3:e("coupons.team"),4:e("coupons.custom"),5:e("coupons.fixedAmount")},T={1:e("coupons.unused"),2:e("coupons.used"),3:e("coupons.isExpired")};return(i,s)=>{const A=U,m=q,N=S,V=z,B=k;return x(),h(y,null,[u(A),t("div",J,[u(N,{active:p.value,"onUpdate:active":s[0]||(s[0]=a=>p.value=a),"line-width":"5.625rem"},{default:g(()=>[u(m,{title:o(e)("coupons.all")},null,8,["title"]),u(m,{title:o(e)("coupons.unused")},null,8,["title"]),u(m,{title:o(e)("coupons.used")},null,8,["title"])]),_:1},8,["active"])]),u(B,{modelValue:l.value,"onUpdate:modelValue":s[2]||(s[2]=a=>l.value=a),onRefresh:C},{default:g(()=>[u(V,{loading:r.value,"onUpdate:loading":s[1]||(s[1]=a=>r.value=a),finished:_.value,onLoad:w,"finished-text":o(e)("common.noMore")},{default:g(()=>[t("div",Y,[t("div",j,[(x(!0),h(y,null,M(v.value,a=>(x(),h("div",{class:P(["coupon-item",a.state==1?"":"used"])},[t("div",G,[t("div",H,d(o(L)[a.type]),1),s[3]||(s[3]=t("div",{class:"tag"},null,-1))]),t("div",K,[t("div",O,[t("div",Q,d(a.name),1),t("span",W,d(o(T)[a.state]),1)]),t("div",X,d(a.intro),1),t("div",Z,d(o(b).formatToMonthDay(a.create_time,1))+" "+d(o(e)("coupons.expired")),1)])],2))),256)),s[4]||(s[4]=t("div",{class:"van-list__placeholder"},null,-1))])])]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])],64)}}}),ce=R($,[["__scopeId","data-v-05f11be2"]]);export{ce as default};
