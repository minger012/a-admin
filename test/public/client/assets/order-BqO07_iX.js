import{_ as I,D as M,B as O,T as b}from"./CpNavBar-CrmPb7d6.js";import{P as U,L as q}from"./index-Crbkh05F.js";import{P as E}from"./index-CnVTM7Xj.js";import{_ as X}from"./CpImage.vue_vue_type_script_setup_true_lang-BipI8DzU.js";import{a as j}from"./common-CcLOc8oO.js";import{C as G}from"./CpPutin-DcK3S8Z_.js";import{d as H,u as J,a as l,w as K,o as Q,l as f,b as n,q as e,s as g,F as P,y as a,A as W,D as Y,x as o,C as w,_ as Z}from"./index-DxAKgVpU.js";import{T as ee,a as te}from"./index-gZM99trD.js";import"./use-tab-status-DTffKy9P.js";import"./index-s1Ddf5_x.js";import"./use-id-BJ_zPNln.js";import"./index-DDZggjgO.js";const se={class:"page"},ae={class:"tab-wrap"},oe={class:"p-4"},ne={class:"plan-item"},ie={class:"push-tag"},le={class:"title-line"},re={class:"title"},de={class:"status"},ce=["onClick"],_e={class:"banner"},pe={class:"van-swipe my-swipe"},me={class:"van-swipe__track",style:{"transition-duration":"0ms",transform:"translateX(0px)",width:"165px"}},ue={class:"van-swipe-item",style:{width:"165px"}},he={class:"app-content"},ve={class:"app-title"},fe={class:"logo"},ge={class:"app-title-wrap"},we={class:"app-name"},ye={class:"app-desc"},xe={class:"app-tag"},Ce={class:"tag"},be={class:"tag"},Pe={class:"plan-text"},ke={class:"put-wrap"},De={class:"put-item"},Be={class:"label"},Le={class:"value"},Ne={class:"put-item"},Te={class:"label"},Ve={class:"progress"},Ae={class:"progress-text"},Fe={class:"title-line mt-2"},Re={class:"title"},Se={key:0,class:"btn-wrap"},$e={class:"text-[3.2vw]"},ze=H({__name:"order",setup(Ie){const k=j(),{t}=J(),m=l(0),r=l({page:0,pageSize:10,type:m.value}),p=l(!1),u=l(!1),h=l([]),y=async()=>{u.value||(p.value=!0,r.value.page++,await b(r.value).then(i=>{h.value.push(...i.data.list),r.value.page>=i.data.total_page&&(u.value=!0),p.value=!1}).catch(()=>{p.value=!1}))},v=l(!1),D=async()=>{r.value.page=1,await b(r.value).then(i=>{h.value=i.data.list,v.value=!1}).catch(()=>{v.value=!1})};K(m,async i=>{r.value.page=0,r.value.type=i,h.value=[],u.value=!1,y()});const d=l(null),B=i=>{d.value&&(d.value.showBottom3=!0,d.value.order_id=i.id,d.value.min=i.min,d.value.max=i.max)},x=l([]),L=async()=>{await M("1").then(i=>{x.value=i.data})};let N={1:t("order.officialPush"),2:t("order.unofficialPush")},T={0:t("order.pendingPlacement"),1:t("order.matching"),2:t("order.placing"),3:t("order.placementFailed"),4:t("order.waitingSettlement"),5:t("order.settlementSuccess")};return Q(()=>{Promise.all([L()])}),(i,c)=>{const V=I,_=te,A=ee,C=X,F=E,R=O,S=q,$=U;return w(),f(P,null,[n(V,{isLoginOut:!0}),e("div",se,[e("div",ae,[n(A,{active:m.value,"onUpdate:active":c[0]||(c[0]=s=>m.value=s)},{default:g(()=>[n(_,{title:a(t)("order.all")},null,8,["title"]),n(_,{title:a(t)("order.pendingPlacement")},null,8,["title"]),n(_,{title:a(t)("order.matching")},null,8,["title"]),n(_,{title:a(t)("order.placing")},null,8,["title"]),n(_,{title:a(t)("order.placementFailed")},null,8,["title"]),n(_,{title:a(t)("order.placementCompleted")},null,8,["title"])]),_:1},8,["active"])]),e("div",oe,[n($,{modelValue:v.value,"onUpdate:modelValue":c[2]||(c[2]=s=>v.value=s),onRefresh:D},{default:g(()=>[n(S,{loading:p.value,"onUpdate:loading":c[1]||(c[1]=s=>p.value=s),finished:u.value,onLoad:y,"finished-text":a(t)("common.noMore")},{default:g(()=>[(w(!0),f(P,null,W(h.value,s=>(w(),f("div",ne,[e("div",ie,o(a(N)[s.form]),1),e("div",le,[e("span",re,o(a(t)("order.planNumber"))+": "+o(s.order_no),1),e("span",de,o(a(T)[s.state]),1)]),e("div",{class:"plan-content",onClick:z=>i.$router.push("orderDetail?id="+s.id)},[e("div",_e,[e("div",pe,[e("div",me,[e("div",ue,[n(C,{name:s.image,width:"10.3rem",height:"5.75rem",radius:"10%"},null,8,["name"])])])])]),e("div",he,[e("div",ve,[e("div",fe,[n(C,{name:s.goods_logo,width:"1.875rem",height:"1.875rem",radius:"10%"},null,8,["name"])]),e("div",ge,[e("div",we,o(s.goods_name),1),e("div",ye,o(s.type_name),1)])]),e("div",xe,[e("div",Ce,o(a(t)("order.video")),1),e("div",be,o(a(t)("order.landingPage")),1)])])],8,ce),e("div",Pe,o(s.goods_intro),1),e("div",ke,[e("div",De,[e("span",Be,o(a(t)("order.placementAmount")),1),e("span",Le,o(x.value[1])+" "+o(s.money),1)]),e("div",Ne,[e("span",Te,o(a(t)("order.placementProgress")),1),e("div",Ve,[n(F,{percentage:s.schedule,"pivot-text":"",style:{height:"5px",width:"100%"}},null,8,["percentage"]),e("span",Ae,o(s.schedule)+"%",1)])])]),e("div",Fe,[e("span",Re,o(a(t)("order.createTime"))+": "+o(a(k).formatToMonthDay(s.create_time,2)),1)]),s.state==0?(w(),f("div",Se,[n(R,{type:"primary",size:"small",round:"",class:"button",onClick:z=>B(s),style:{width:"6.5rem",height:"2.125rem","z-index":"999"}},{default:g(()=>[e("span",$e,o(a(t)("order.placement")),1)]),_:2},1032,["onClick"])])):Y("",!0)]))),256))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])])]),n(G,{ref_key:"childRef",ref:d},null,512)],64)}}}),We=Z(ze,[["__scopeId","data-v-edad73e5"]]);export{We as default};
