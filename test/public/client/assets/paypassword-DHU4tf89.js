import{_ as F,B as I,b as d,a9 as U}from"./CpNavBar-DfOiz7u7.js";import"./index-B4ui1F6Q.js";import{F as N}from"./index-BTkzeEyc.js";import{d as S,u as A,m as J,r as o,k as T,c as j,a as n,b as v,e as s,i as _,F as D,h as E,l as L,t as M,n as O,j as f,_ as W}from"./index-CzDm-LUc.js";import{F as $}from"./index-DLOXjh-G.js";import"./use-id-4VHI0Q40.js";const z={class:"page"},G={class:"mt-8 px-8"},H={class:"text-base"},K=S({__name:"paypassword",setup(Q){const{t:e}=A(),g=T(),h=O(),b=J(),u=o(!1),i=o(!1),c=o(!1),p=o(""),a=o(""),m=o(""),t=o(!1),P=g.query.isJump||0,V=()=>{u.value=!u.value},k=()=>{i.value=!i.value},x=()=>{c.value=!c.value},R=async()=>{if(!t.value){if(a.value!==m.value){d(e("payPassword.rules.passwordMismatch"));return}if(a.value.length!==6||!/^\d+$/.test(a.value)){d(e("payPassword.rules.passwordLength"));return}if(P==0&&p.value===a.value){d(e("payPassword.rules.sameAsOld"));return}t.value=!0;try{await U(p.value,a.value,m.value).then(w=>{d(w.msg),b.setUserPayPassword(1),setTimeout(()=>{h.back()},1e3)})}catch(w){d(w.message||"修改失败")}finally{t.value=!1}}};return(w,l)=>{const q=F,y=N,B=I,C=$;return f(),j(D,null,[n(q,{title:s(e)("payPassword.title")},null,8,["title"]),v("div",z,[n(C,{onSubmit:R},{default:_(()=>[s(P)==0?(f(),E(y,{key:0,"left-icon":"lock",modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=r=>p.value=r),type:u.value?"text":"password","right-icon":u.value?"eye-o":"closed-eye",onClickRightIcon:V,label:s(e)("payPassword.oldPassword"),placeholder:s(e)("payPassword.oldPasswordPlaceholder"),rules:[{required:!0,message:s(e)("payPassword.rules.oldPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"])):L("",!0),n(y,{"left-icon":"lock",modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value=r),type:i.value?"text":"password","right-icon":i.value?"eye-o":"closed-eye",onClickRightIcon:k,label:s(e)("payPassword.newPassword"),placeholder:s(e)("payPassword.newPasswordPlaceholder"),rules:[{required:!0,message:s(e)("payPassword.rules.newPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),n(y,{"left-icon":"lock",modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=r=>m.value=r),type:c.value?"text":"password","right-icon":c.value?"eye-o":"closed-eye",onClickRightIcon:x,label:s(e)("payPassword.confirmPassword"),placeholder:s(e)("payPassword.confirmPasswordPlaceholder"),rules:[{required:!0,message:s(e)("payPassword.rules.confirmPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),v("div",G,[n(B,{round:"",block:"",type:"primary","native-type":"submit",loading:t.value,disabled:t.value},{default:_(()=>[v("span",H,M(s(e)("payPassword.submit")),1)]),_:1},8,["loading","disabled"])])]),_:1})])],64)}}}),oe=W(K,[["__scopeId","data-v-0850193d"]]);export{oe as default};
