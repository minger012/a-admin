import{d as T,r as m,y as S,p as O,w as R,z as $,o as A,A as w,a as c,s as V,B as x,q as I,C as s,h as j,i as C,j as N}from"./index-CzDm-LUc.js";import{d as q,G as P,t as b,n as g,f as _,H as M,J as U,I as F,w as G,L as H}from"./CpNavBar-DfOiz7u7.js";const[K,d]=q("image"),Q={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:g,height:g,radius:g,lazyLoad:Boolean,iconSize:g,showError:b,errorIcon:P("photo-fail"),iconPrefix:String,showLoading:b,loadingIcon:P("photo"),crossorigin:String,referrerpolicy:String};var J=T({name:K,props:Q,emits:["load","error"],setup(e,{emit:a,slots:o}){const n=m(!1),t=m(!0),i=m(),{$Lazyload:l}=S().proxy,k=O(()=>{const r={width:_(e.width),height:_(e.height)};return M(e.radius)&&(r.overflow="hidden",r.borderRadius=_(e.radius)),r});R(()=>e.src,()=>{n.value=!1,t.value=!0});const f=r=>{t.value&&(t.value=!1,a("load",r))},v=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:i.value,enumerable:!0}),f(r)},h=r=>{n.value=!0,t.value=!1,a("error",r)},y=(r,u,L)=>L?L():c(F,{name:r,size:e.iconSize,class:u,classPrefix:e.iconPrefix},null),z=()=>{if(t.value&&e.showLoading)return c("div",{class:d("loading")},[y(e.loadingIcon,d("loading-icon"),o.loading)]);if(n.value&&e.showError)return c("div",{class:d("error")},[y(e.errorIcon,d("error-icon"),o.error)])},B=()=>{if(n.value||!e.src)return;const r={alt:e.alt,class:d("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?V(c("img",I({ref:i},r),null),[[x("lazy"),e.src]]):c("img",I({ref:i,src:e.src,onLoad:f,onError:h},r),null)},p=({el:r})=>{const u=()=>{r===i.value&&t.value&&v()};i.value?u():w(u)},E=({el:r})=>{r===i.value&&!n.value&&h()};return l&&U&&(l.$on("loaded",p),l.$on("error",E),$(()=>{l.$off("loaded",p),l.$off("error",E)})),A(()=>{w(()=>{var r;(r=i.value)!=null&&r.complete&&!e.lazyLoad&&v()})}),()=>{var r;return c("div",{class:d({round:e.round,block:e.block}),style:k.value},[B(),z(),(r=o.default)==null?void 0:r.call(o)])}}});const W=G(J),D=(e,a,o)=>{const n=e[a];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((t,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+a+(a.split("/").length!==o?". Note that variables only represent file names one level deep.":""))))})},Z=T({__name:"CpImage",props:{name:{},src:{},width:{},height:{},round:{type:Boolean},radius:{},fileType:{},dir:{}},setup(e){const a=e,o=m();return a.src?o.value=a.src:a.name&&a.name.includes("http")?o.value=a.name:a.dir?D(Object.assign({}),`../assets/img/${a.dir}/${a.name}.${a.fileType||"png"}`,5).then(n=>{o.value=n.default}):D(Object.assign({"../assets/img/apple-store-Da3dkSd7.png":()=>s(()=>import("./apple-store-Da3dkSd7-D2fWyQEp.js"),[]),"../assets/img/banner1-D_iNypES.png":()=>s(()=>import("./banner1-D_iNypES-Dn8QxXaG.js"),[]),"../assets/img/banner2-FQGNIWdl.png":()=>s(()=>import("./banner2-FQGNIWdl-B3UULuQ7.js"),[]),"../assets/img/goods-detail-header-bg-BbrPUqL6.png":()=>s(()=>import("./goods-detail-header-bg-BbrPUqL6-JVAIxD3x.js"),[]),"../assets/img/google-play-nQbvKhbh.png":()=>s(()=>import("./google-play-nQbvKhbh-BflS0lCL.js"),[]),"../assets/img/logo-C8lBymrN.png":()=>s(()=>import("./logo-C8lBymrN-D98xDfTA.js"),[]),"../assets/img/recharge-banner-Bkr9lTMK.png":()=>s(()=>import("./recharge-banner-Bkr9lTMK-FM_NWu-G.js"),[]),"../assets/img/star.png":()=>s(()=>import("./star-iUIxs2Pw.js"),[])}),`../assets/img/${a.name}.${a.fileType||"png"}`,4).then(n=>{o.value=n.default}),(n,t)=>{const i=H,l=W;return N(),j(l,{src:o.value,width:a.width,height:a.height,round:a.round,radius:a.radius},{loading:C(()=>[c(i,{type:"spinner",size:"20"})]),_:1},8,["src","width","height","round","radius"])}}});export{W as I,Z as _};
