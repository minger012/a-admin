import{d as U,V as k,a as c,w as z,W as f,f as u,Y as t,$ as h,Z as y,a1 as o,_ as D,a4 as E,a0 as v,a8 as g,aa as I}from"./index-YE2psqqH.js";import{P as M,L as P}from"./index-DhojwZUU.js";import{_ as R,j as x}from"./CpNavBar-DF-_LF7D.js";import{a as S}from"./common-B3TmWd0J.js";import{T as j,a as F}from"./index-BFyK8197.js";import"./use-tab-status-C8p54YtO.js";import"./use-id-UcQghhl8.js";import"./index-qmKyu2UC.js";const W={class:"tab-wrap"},Y={class:"coupon-list"},Z={role:"feed",class:"van-list","aria-busy":"false"},$={class:"item-left"},q={class:"coupon-type"},G={class:"item-content"},H={class:"title-line"},J={class:"title"},K={class:"text"},O={class:"name"},Q={class:"time"},X=U({__name:"coupons",setup(ee){const{t:e}=k(),w=S(),n=c({page:0,pageSize:10}),d=c(0),p=c(!1),_=c(!1),r=c([]),b=async()=>{_.value||(p.value=!0,n.value.page++,await x(n.value,d.value).then(i=>{r.value.push(...i.data.list),n.value.page>=i.data.total_page&&(_.value=!0),p.value=!1}).catch(()=>{p.value=!1}))},l=c(!1),C=async()=>{n.value.page=1,await x(n.value,d.value).then(i=>{r.value=i.data.list,l.value=!1}).catch(()=>{l.value=!1})};z(d,async i=>{n.value.page=1,r.value=[],l.value=!0,await x(n.value,i).then(a=>{r.value=a.data.list,l.value=!1}).catch(()=>{l.value=!1})});let L={1:e("coupons.valueAdded"),2:e("coupons.deduction"),3:e("coupons.team"),4:e("coupons.custom"),5:e("coupons.fixedAmount")},T={1:e("coupons.unused"),2:e("coupons.used"),3:e("coupons.isExpired")};return(i,a)=>{const V=R,m=F,N=j,A=P,B=M;return g(),f(y,null,[u(V),t("div",W,[u(N,{active:d.value,"onUpdate:active":a[0]||(a[0]=s=>d.value=s),"line-width":"5.625rem"},{default:h(()=>[u(m,{title:o(e)("coupons.all")},null,8,["title"]),u(m,{title:o(e)("coupons.unused")},null,8,["title"]),u(m,{title:o(e)("coupons.used")},null,8,["title"])]),_:1},8,["active"])]),u(B,{modelValue:l.value,"onUpdate:modelValue":a[2]||(a[2]=s=>l.value=s),onRefresh:C},{default:h(()=>[u(A,{loading:p.value,"onUpdate:loading":a[1]||(a[1]=s=>p.value=s),finished:_.value,onLoad:b,"finished-text":o(e)("common.noMore")},{default:h(()=>[t("div",Y,[t("div",Z,[(g(!0),f(y,null,D(r.value,s=>(g(),f("div",{class:E(["coupon-item",s.state==1?"":"used"])},[t("div",$,[t("div",q,v(o(L)[s.type]),1),a[3]||(a[3]=t("div",{class:"tag"},null,-1))]),t("div",G,[t("div",H,[t("div",J,v(s.name),1),t("span",K,v(o(T)[s.state]),1)]),t("div",O,v(s.intro),1),t("div",Q,v(o(e)("coupons.validUntil",{date:o(w).formatToMonthDay(s.create_time,1)})),1)])],2))),256)),a[4]||(a[4]=t("div",{class:"van-list__placeholder"},null,-1))])])]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])],64)}}}),ce=I(X,[["__scopeId","data-v-94aa5284"]]);export{ce as default};
