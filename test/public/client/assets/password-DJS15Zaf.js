import{d as R,V as q,a as o,W as B,f as t,X as f,_ as s,Y as g,a0 as C,Z as F,ab as I,a5 as N,a3 as n,a7 as S}from"./index-Cf1uNEXX.js";import{_ as T,B as U,v as A}from"./CpNavBar-D9_JXCr5.js";import"./index-SY_CZBad.js";import{F as W}from"./index-wIK-1jWi.js";import{F as D}from"./index-6uLmiHzL.js";import"./use-id-BKHLxYDt.js";const E={class:"page"},M={class:"mt-8 px-8"},O={class:"text-base"},X=R({__name:"password",setup(Y){const{t:e}=q(),_=I(),u=o(!1),i=o(!1),c=o(!1),p=o(""),a=o(""),w=o(""),l=o(!1),h=()=>{u.value=!u.value},y=()=>{i.value=!i.value},b=()=>{c.value=!c.value},P=async()=>{if(!l.value){if(a.value!==w.value){n(e("password.rules.passwordMismatch"));return}if(a.value.length<6){n(e("password.rules.passwordTooShort"));return}if(p.value===a.value){n(e("password.rules.sameAsOld"));return}l.value=!0;try{await A(p.value,a.value,w.value).then(m=>{n(m.msg||e("password.messages.success")),setTimeout(()=>{_.back()},1e3)})}catch(m){n(m.message||e("password.messages.error"))}finally{l.value=!1}}};return(m,r)=>{const V=T,v=W,k=U,x=D;return N(),B(C,null,[t(V,{title:s(e)("password.title")},null,8,["title"]),f("div",E,[t(x,{onSubmit:P},{default:g(()=>[t(v,{"left-icon":"lock",modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=d=>p.value=d),type:u.value?"text":"password","right-icon":u.value?"eye-o":"closed-eye",onClickRightIcon:h,label:s(e)("password.oldPassword"),placeholder:s(e)("password.oldPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.oldPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),t(v,{"left-icon":"lock",modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=d=>a.value=d),type:i.value?"text":"password","right-icon":i.value?"eye-o":"closed-eye",onClickRightIcon:y,label:s(e)("password.newPassword"),placeholder:s(e)("password.newPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.newPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),t(v,{"left-icon":"lock",modelValue:w.value,"onUpdate:modelValue":r[2]||(r[2]=d=>w.value=d),type:c.value?"text":"password","right-icon":c.value?"eye-o":"closed-eye",onClickRightIcon:b,label:s(e)("password.confirmPassword"),placeholder:s(e)("password.confirmPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.confirmPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),f("div",M,[t(k,{round:"",block:"",type:"primary","native-type":"submit",loading:l.value,disabled:l.value},{default:g(()=>[f("span",O,F(l.value?s(e)("password.changing"):s(e)("password.submit")),1)]),_:1},8,["loading","disabled"])])]),_:1})])],64)}}}),K=S(X,[["__scopeId","data-v-936b969f"]]);export{K as default};
