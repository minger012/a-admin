import{i as J,aZ as de,a_ as ue,a$ as He,a as C,b0 as Ne,D as Oe,b1 as Ee,Q as Le,b2 as fe,d as Z,o as N,l as ve,n as z,g as M,aI as be,r as he,c as R,b3 as me,E as ge,aE as De,w as $,b as we,f as g,b4 as Q,j as O,z as A,x as ye,y as We,J as p,m as K,v as Ze,e as ee,t as W,aH as Me,b5 as Ue,b6 as je,N as G,b7 as Fe,aU as Ve,b8 as ie,C as Xe,aj as oe,b9 as qe,ak as Ke,ba as Ye,S as Je,T as Qe,A as Ge,B as re,bb as pe,q as et,a4 as tt,bc as nt,bd as at,be as lt,aX as it}from"./index-DoQrIYf3.js";import{u as xe}from"./use-id-ciVahQ9Q.js";import{b as ot,r as rt}from"./CpNavBar-DsDodjpW.js";import{T as st}from"./use-tab-status-DZcp3qnL.js";import{a as ct,S as dt}from"./index-B5O2t1wD.js";function ut(e,a,o){let l,s=0;const t=e.scrollLeft,r=o===0?1:Math.round(o*1e3/16);let c=t;function b(){de(l)}function m(){c+=(a-t)/r,e.scrollLeft=c,++s<r&&(l=J(m))}return m(),b}function ft(e,a,o,l){let s,t=ue(e);const r=t<a,c=o===0?1:Math.round(o*1e3/16),b=(a-t)/c;function m(){de(s)}function y(){t+=b,(r&&t>a||!r&&t<a)&&(t=a),He(e,t),r&&t<a||!r&&t>a?s=J(y):l&&(s=J(l))}return y(),m}function vt(){const e=C([]),a=[];return Ne(()=>{e.value=[]}),[e,l=>(a[l]||(a[l]=s=>{e.value[l]=s}),a[l])]}function Te(e,a){if(!Oe||!window.IntersectionObserver)return;const o=new IntersectionObserver(t=>{a(t[0].intersectionRatio>0)},{root:document.body}),l=()=>{e.value&&o.observe(e.value)},s=()=>{e.value&&o.unobserve(e.value)};Ee(s),Le(s),fe(l)}const[bt,ht]=M("sticky"),mt={zIndex:z,position:ve("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var gt=Z({name:bt,props:mt,emits:["scroll","change"],setup(e,{emit:a,slots:o}){const l=C(),s=be(l),t=he({fixed:!1,width:0,height:0,transform:0}),r=C(!1),c=R(()=>me(e.position==="top"?e.offsetTop:e.offsetBottom)),b=R(()=>{if(r.value)return;const{fixed:f,height:S,width:u}=t;if(f)return{width:`${u}px`,height:`${S}px`}}),m=R(()=>{if(!t.fixed||r.value)return;const f=ge(De(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${c.value}px`});return t.transform&&(f.transform=`translate3d(0, ${t.transform}px, 0)`),f}),y=f=>a("scroll",{scrollTop:f,isFixed:t.fixed}),k=()=>{if(!l.value||Q(l))return;const{container:f,position:S}=e,u=O(l),T=ue(window);if(t.width=u.width,t.height=u.height,S==="top")if(f){const d=O(f),B=d.bottom-c.value-t.height;t.fixed=c.value>u.top&&d.bottom>0,t.transform=B<0?B:0}else t.fixed=c.value>u.top;else{const{clientHeight:d}=document.documentElement;if(f){const B=O(f),h=d-B.top-c.value-t.height;t.fixed=d-c.value<u.bottom&&d>B.top,t.transform=h<0?-h:0}else t.fixed=d-c.value<u.bottom}y(T)};return $(()=>t.fixed,f=>a("change",f)),we("scroll",k,{target:s,passive:!0}),Te(l,k),$([ye,We],()=>{!l.value||Q(l)||!t.fixed||(r.value=!0,A(()=>{const f=O(l);t.width=f.width,t.height=f.height,r.value=!1}))}),()=>{var f;return g("div",{ref:l,style:b.value},[g("div",{class:ht({fixed:t.fixed&&!r.value}),style:m.value},[(f=o.default)==null?void 0:f.call(o)])])}}});const wt=p(gt),[yt,se]=M("tabs");var xt=Z({name:yt,props:{count:K(Number),inited:Boolean,animated:Boolean,duration:K(z),swipeable:Boolean,lazyRender:Boolean,currentIndex:K(Number)},emits:["change"],setup(e,{emit:a,slots:o}){const l=C(),s=c=>a("change",c),t=()=>{var c;const b=(c=o.default)==null?void 0:c.call(o);return e.animated||e.swipeable?g(ct,{ref:l,loop:!1,class:se("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:s},{default:()=>[b]}):b},r=c=>{const b=l.value;b&&b.state.active!==c&&b.swipeTo(c,{immediate:!e.inited})};return $(()=>e.currentIndex,r),Ze(()=>{r(e.currentIndex)}),ee({swipeRef:l}),()=>g("div",{class:se("content",{animated:e.animated||e.swipeable})},[t()])}});const[Se,q]=M("tabs"),Tt={type:ve("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:W,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:W,showHeader:W,lineWidth:z,lineHeight:z,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},Ce=Symbol(Se);var St=Z({name:Se,props:Tt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:o}){let l,s,t,r,c;const b=C(),m=C(),y=C(),k=C(),f=xe(),S=be(b),[u,T]=vt(),{children:d,linkChildren:B}=Me(Ce),h=he({inited:!1,position:"",lineStyle:{},currentIndex:-1}),E=R(()=>d.length>+e.swipeThreshold||!e.ellipsis||e.shrink),U=R(()=>({borderColor:e.color,background:e.background})),L=(n,i)=>{var v;return(v=n.name)!=null?v:i},j=R(()=>{const n=d[h.currentIndex];if(n)return L(n,h.currentIndex)}),H=R(()=>me(e.offsetTop)),te=R(()=>e.sticky?H.value+l:0),D=n=>{const i=m.value,v=u.value;if(!E.value||!i||!v||!v[h.currentIndex])return;const x=v[h.currentIndex].$el,w=x.offsetLeft-(i.offsetWidth-x.offsetWidth)/2;r&&r(),r=ut(i,w,n?0:+e.duration)},_=()=>{const n=h.inited;A(()=>{const i=u.value;if(!i||!i[h.currentIndex]||e.type!=="line"||Q(b.value))return;const v=i[h.currentIndex].$el,{lineWidth:x,lineHeight:w}=e,I=v.offsetLeft+v.offsetWidth/2,P={width:oe(x),backgroundColor:e.color,transform:`translateX(${I}px) translateX(-50%)`};if(n&&(P.transitionDuration=`${e.duration}s`),G(w)){const X=oe(w);P.height=X,P.borderRadius=X}h.lineStyle=P})},Ie=n=>{const i=n<h.currentIndex?-1:1;for(;n>=0&&n<d.length;){if(!d[n].disabled)return n;n+=i}},F=(n,i)=>{const v=Ie(n);if(!G(v))return;const x=d[v],w=L(x,v),I=h.currentIndex!==null;h.currentIndex!==v&&(h.currentIndex=v,i||D(),_()),w!==e.active&&(a("update:active",w),I&&a("change",w,x.title)),t&&!e.scrollspy&&Ve(Math.ceil(ie(b.value)-H.value))},V=(n,i)=>{const v=d.find((w,I)=>L(w,I)===n),x=v?d.indexOf(v):0;F(x,i)},ne=(n=!1)=>{if(e.scrollspy){const i=d[h.currentIndex].$el;if(i&&S.value){const v=ie(i,S.value)-te.value;s=!0,c&&c(),c=ft(S.value,v,n?0:+e.duration,()=>{s=!1})}}},Re=(n,i,v)=>{const{title:x,disabled:w}=d[i],I=L(d[i],i);w||(Xe(e.beforeChange,{args:[I],done:()=>{F(i),ne()}}),ot(n)),a("clickTab",{name:I,title:x,event:v,disabled:w})},ke=n=>{t=n.isFixed,a("scroll",n)},Be=n=>{A(()=>{V(n),ne(!0)})},$e=()=>{for(let n=0;n<d.length;n++){const{top:i}=O(d[n].$el);if(i>te.value)return n===0?0:n-1}return d.length-1},_e=()=>{if(e.scrollspy&&!s){const n=$e();F(n)}},Pe=()=>{if(e.type==="line"&&d.length)return g("div",{class:q("line"),style:h.lineStyle},null)},ae=()=>{var n,i,v;const{type:x,border:w,sticky:I}=e,P=[g("div",{ref:I?void 0:y,class:[q("wrap"),{[Fe]:x==="line"&&w}]},[g("div",{ref:m,role:"tablist",class:q("nav",[x,{shrink:e.shrink,complete:E.value}]),style:U.value,"aria-orientation":"horizontal"},[(n=o["nav-left"])==null?void 0:n.call(o),d.map(X=>X.renderTitle(Re)),Pe(),(i=o["nav-right"])==null?void 0:i.call(o)])]),(v=o["nav-bottom"])==null?void 0:v.call(o)];return I?g("div",{ref:y},[P]):P},le=()=>{_(),A(()=>{var n,i;D(!0),(i=(n=k.value)==null?void 0:n.swipeRef.value)==null||i.resize()})};$(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],_),$(ye,le),$(()=>e.active,n=>{n!==j.value&&V(n)}),$(()=>d.length,()=>{h.inited&&(V(e.active),_(),A(()=>{D(!0)}))});const Ae=()=>{V(e.active,!0),A(()=>{h.inited=!0,y.value&&(l=O(y.value).height),D(!0)})},ze=(n,i)=>a("rendered",n,i);return ee({resize:le,scrollTo:Be}),Ue(_),je(_),fe(Ae),Te(b,_),we("scroll",_e,{target:S,passive:!0}),B({id:f,props:e,setLine:_,scrollable:E,onRendered:ze,currentName:j,setTitleRefs:T,scrollIntoView:D}),()=>g("div",{ref:b,class:q([e.type])},[e.showHeader?e.sticky?g(wt,{container:b.value,offsetTop:H.value,onScroll:ke},{default:()=>[ae()]}):ae():null,g(xt,{ref:k,count:d.length,inited:h.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:h.currentIndex,onChange:F},{default:()=>{var n;return[(n=o.default)==null?void 0:n.call(o)]}})])}});const[Ct,ce]=M("tab"),It=Z({name:Ct,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:z,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:W},setup(e,{slots:a}){const o=R(()=>{const s={},{type:t,color:r,disabled:c,isActive:b,activeColor:m,inactiveColor:y}=e;r&&t==="card"&&(s.borderColor=r,c||(b?s.backgroundColor=r:s.color=r));const f=b?m:y;return f&&(s.color=f),s}),l=()=>{const s=g("span",{class:ce("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||G(e.badge)&&e.badge!==""?g(qe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[s]}):s};return()=>g("div",{id:e.id,role:"tab",class:[ce([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:o.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[l()])}}),[Rt,Y]=M("tab"),kt=ge({},rt,{dot:Boolean,name:z,badge:z,title:String,disabled:Boolean,titleClass:et,titleStyle:[String,Object],showZeroBadge:W});var Bt=Z({name:Rt,props:kt,setup(e,{slots:a}){const o=xe(),l=C(!1),s=pe(),{parent:t,index:r}=Ke(Ce);if(!t)return;const c=()=>{var u;return(u=e.name)!=null?u:r.value},b=()=>{l.value=!0,t.props.lazyRender&&A(()=>{t.onRendered(c(),e.title)})},m=R(()=>{const u=c()===t.currentName.value;return u&&!l.value&&b(),u}),y=C(""),k=C("");Ye(()=>{const{titleClass:u,titleStyle:T}=e;y.value=u?tt(u):"",k.value=T&&typeof T!="string"?nt(at(T)):T});const f=u=>g(It,Ge({key:o,id:`${t.id}-${r.value}`,ref:t.setTitleRefs(r.value),style:k.value,class:y.value,isActive:m.value,controls:o,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:T=>u(s.proxy,r.value,T)},re(t.props,["type","color","shrink"]),re(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),S=C(!m.value);return $(m,u=>{u?S.value=!1:lt(()=>{S.value=!0})}),$(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),it(st,m),ee({id:o,renderTitle:f}),()=>{var u;const T=`${t.id}-${r.value}`,{animated:d,swipeable:B,scrollspy:h,lazyRender:E}=t.props;if(!a.default&&!d)return;const U=h||m.value;if(d||B)return g(dt,{id:o,role:"tabpanel",class:Y("panel-wrapper",{inactive:S.value}),tabindex:m.value?0:-1,"aria-hidden":!m.value,"aria-labelledby":T,"data-allow-mismatch":"attribute"},{default:()=>{var H;return[g("div",{class:Y("panel")},[(H=a.default)==null?void 0:H.call(a)])]}});const j=l.value||h||!E?(u=a.default)==null?void 0:u.call(a):null;return Je(g("div",{id:o,role:"tabpanel",class:Y("panel"),tabindex:U?0:-1,"aria-labelledby":T,"data-allow-mismatch":"attribute"},[j]),[[Qe,U]])}}});const Ht=p(Bt),Nt=p(St);export{Nt as T,Ht as a};
