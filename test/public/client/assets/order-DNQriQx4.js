import{d as M,V as O,a as l,w as U,v as q,W as f,f as i,Y as e,$ as g,Z as N,a8 as E,a1 as s,_ as W,ad as Y,a0 as o,aq as k,aa as w,af as Z}from"./index-CW24Rrz8.js";import{P as j,L as G}from"./index-BBUYrgRD.js";import{_ as H,B as J}from"./CpNavBar-CJHi_sXB.js";import{P as K}from"./index-mbd7Im4v.js";import{_ as Q}from"./CpImage.vue_vue_type_script_setup_true_lang-CVqbusnH.js";import{a as X}from"./common-BcFkYjCN.js";import{C as ee}from"./CpPutin-DzfYoDlm.js";import{T as te,a as ae}from"./index-v8X3Y7zx.js";import"./use-tab-status-CltZDvE3.js";import"./index-DOtTy489.js";import"./use-id-DPpD5rJm.js";import"./index-D0F-GHzh.js";const se={class:"page"},oe={class:"tab-wrap"},ne={class:"p-4"},ie=["onClick"],le={class:"push-tag"},de={class:"title-line"},re={class:"title"},ce={class:"status"},_e={class:"plan-content"},pe={class:"banner"},me={class:"app-content"},ue={class:"app-title"},he={class:"logo"},ve={class:"app-title-wrap"},fe={class:"app-name"},ge={class:"app-desc"},we={class:"app-tag"},be={class:"tag"},ye={class:"tag"},Ce={class:"plan-text"},xe={class:"put-wrap"},Pe={class:"put-item"},Ne={class:"label"},ke={class:"value"},Be={class:"put-item"},Le={class:"label"},Se={class:"progress"},Ve={class:"progress-text"},De={class:"title-line mt-2"},Te={class:"title"},Ae={key:0,class:"btn-wrap"},Re={class:"text-[0.7500rem]"},$e=M({__name:"order",setup(ze){const B=X(),{t}=O(),m=l(0),r=l({page:0,pageSize:10,type:m.value}),p=l(!1),u=l(!1),h=l([]),b=l(0),y=async()=>{u.value||(p.value=!0,r.value.page++,await k(r.value).then(n=>{h.value.push(...n.data.list),b.value=n.data.waitSendNum,r.value.page>=n.data.total_page&&(u.value=!0),p.value=!1}).catch(()=>{p.value=!1}))},v=l(!1),L=async()=>{r.value.page=1,await k(r.value).then(n=>{h.value=n.data.list,b.value=n.data.waitSendNum,v.value=!1}).catch(()=>{v.value=!1})};U(m,async n=>{r.value.page=0,r.value.type=n,h.value=[],u.value=!1,y()});const c=l(null),S=(n,d)=>{d.stopPropagation(),c.value&&(c.value.showBottom3=!0,c.value.order_id=n.id,c.value.min=n.min,c.value.max=n.max)},C=l([]),V=async()=>{await E("1").then(n=>{C.value=n.data})};let D={1:t("order.officialPush"),2:t("order.unofficialPush")},T={0:t("order.pendingPlacement"),1:t("order.matching"),2:t("order.placing"),3:t("order.placementFailed"),4:t("order.waitingSettlement"),5:t("order.settlementSuccess")};return q(()=>{Promise.all([V()])}),(n,d)=>{const A=H,_=ae,R=te,x=Q,$=K,z=J,F=G,I=j;return w(),f(N,null,[i(A,{isLoginOut:!0}),e("div",se,[e("div",oe,[i(R,{active:m.value,"onUpdate:active":d[0]||(d[0]=a=>m.value=a)},{default:g(()=>[i(_,{title:s(t)("order.all")},null,8,["title"]),i(_,{title:s(t)("order.pendingPlacement"),badge:b.value||""},null,8,["title","badge"]),i(_,{title:s(t)("order.matching")},null,8,["title"]),i(_,{title:s(t)("order.placing")},null,8,["title"]),i(_,{title:s(t)("order.placementFailed")},null,8,["title"]),i(_,{title:s(t)("order.placementCompleted")},null,8,["title"])]),_:1},8,["active"])]),e("div",ne,[i(I,{modelValue:v.value,"onUpdate:modelValue":d[2]||(d[2]=a=>v.value=a),onRefresh:L},{default:g(()=>[i(F,{loading:p.value,"onUpdate:loading":d[1]||(d[1]=a=>p.value=a),finished:u.value,onLoad:y,"finished-text":s(t)("common.noMore")},{default:g(()=>[(w(!0),f(N,null,W(h.value,a=>(w(),f("div",{class:"plan-item",onClick:P=>n.$router.push("orderDetail?id="+a.id)},[e("div",le,o(s(D)[a.form]),1),e("div",de,[e("span",re,o(s(t)("order.planNumber"))+": "+o(a.order_no),1),e("span",ce,o(s(T)[a.state]),1)]),e("div",_e,[e("div",pe,[i(x,{name:a.image,width:"8.3rem",height:"5.75rem",radius:"10%"},null,8,["name"])]),e("div",me,[e("div",ue,[e("div",he,[i(x,{name:a.goods_logo,width:"1.875rem",height:"1.875rem",radius:"10%"},null,8,["name"])]),e("div",ve,[e("div",fe,o(a.goods_name),1),e("div",ge,o(a.type_name),1)])]),e("div",we,[e("div",be,o(s(t)("order.video")),1),e("div",ye,o(s(t)("order.landingPage")),1)])])]),e("div",Ce,o(a.intro),1),e("div",xe,[e("div",Pe,[e("span",Ne,o(s(t)("order.placementAmount")),1),e("span",ke,o(C.value[1])+" "+o(a.money),1)]),e("div",Be,[e("span",Le,o(s(t)("order.placementProgress")),1),e("div",Se,[i($,{percentage:a.schedule,"pivot-text":"",style:{height:"5px",width:"100%"}},null,8,["percentage"]),e("span",Ve,o(a.schedule)+"%",1)])])]),e("div",De,[e("span",Te,o(s(t)("order.createTime"))+": "+o(s(B).formatToMonthDay(a.create_time,2)),1)]),a.state==0?(w(),f("div",Ae,[i(z,{type:"primary",size:"small",round:"",class:"button",onClick:P=>S(a,P),style:{width:"6.5rem",height:"2.125rem","z-index":"999"}},{default:g(()=>[e("span",Re,o(s(t)("order.placement")),1)]),_:2},1032,["onClick"])])):Y("",!0)],8,ie))),256))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])])]),i(ee,{ref_key:"childRef",ref:c},null,512)],64)}}}),He=Z($e,[["__scopeId","data-v-dcbc6684"]]);export{He as default};
