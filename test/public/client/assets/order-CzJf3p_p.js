import{n as P,t as O,c as M,R as W,y as j,_ as q,F as E,Z as S}from"./CpNavBar-BGhrA26v.js";import{P as X,L as Z}from"./index-BOOpFCIE.js";import{_ as G}from"./CpImage.vue_vue_type_script_setup_true_lang-Dq2vc4qh.js";import{a as H}from"./common-VvLUS-WY.js";import{C as J}from"./CpPutin-C3PIiUpT.js";import{d as N,c as K,b as a,u as Q,a as m,w as Y,g as w,h as t,i as y,j as s,F as $,l as tt,x as et,t as n,q as b,_ as st}from"./index-DqBSD0aN.js";import{T as ot,a as at}from"./index-D2Ubb90o.js";import"./use-tab-status-DAeoIkwI.js";import"./index-BV2B6MZl.js";import"./use-id-BHI6m-7i.js";import"./index-BalXGief.js";const[nt,C]=M("progress"),it={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:O,pivotColor:String,trackColor:String,strokeWidth:P,percentage:{type:P,default:0,validator:l=>+l>=0&&+l<=100}};var lt=N({name:nt,props:it,setup(l){const v=K(()=>l.inactive?void 0:l.color),e=()=>{const{textColor:_,pivotText:i,pivotColor:d,percentage:r}=l,p=i??`${r}%`;if(l.showPivot&&p){const g={color:_,left:`${+r}%`,transform:`translate(-${+r}%,-50%)`,background:d||v.value};return a("span",{style:g,class:C("pivot",{inactive:l.inactive})},[p])}};return()=>{const{trackColor:_,percentage:i,strokeWidth:d}=l,r={background:_,height:W(d)},p={width:`${i}%`,background:v.value};return a("div",{class:C(),style:r},[a("span",{class:C("portion",{inactive:l.inactive}),style:p},null),e()])}}});const rt=j(lt),ct={class:"page"},dt={class:"tab-wrap"},pt={class:"p-4"},_t=["onClick"],mt={class:"push-tag"},ut={class:"title-line"},ht={class:"title"},vt={class:"status"},gt={class:"plan-content"},ft={class:"banner"},xt={class:"van-swipe my-swipe"},wt={class:"van-swipe__track",style:{"transition-duration":"0ms",transform:"translateX(0px)",width:"165px"}},yt={class:"van-swipe-item",style:{width:"165px"}},bt={class:"app-content"},Ct={class:"app-title"},kt={class:"logo"},Pt={class:"app-title-wrap"},St={class:"app-name"},$t={class:"app-desc"},Nt={class:"app-tag"},Tt={class:"tag"},Bt={class:"tag"},Lt={class:"plan-text"},Rt={class:"put-wrap"},Vt={class:"put-item"},Dt={class:"label"},Ft={class:"value"},It={class:"put-item"},Ut={class:"label"},zt={class:"progress"},At={class:"progress-text"},Ot={class:"title-line mt-2"},Mt={class:"title"},Wt={key:0,class:"btn-wrap"},jt={class:"text-[3.2vw]"},qt=N({__name:"order",setup(l){const v=H(),{t:e}=Q(),_=m(0),i=m({page:0,pageSize:10,type:_.value}),d=m(!1),r=m(!1),p=m([]),g=async()=>{r.value||(d.value=!0,i.value.page++,await S(i.value).then(c=>{p.value.push(...c.data.list),i.value.page>=c.data.total_page&&(r.value=!0),d.value=!1}).catch(()=>{d.value=!1}))},f=m(!1),T=async()=>{i.value.page=1,await S(i.value).then(c=>{p.value=c.data.list,f.value=!1}).catch(()=>{f.value=!1})};Y(_,async c=>{i.value.page=0,i.value.type=c,p.value=[],r.value=!1,g()});const x=m(null),B=c=>{x.value&&(x.value.showBottom3=!0,x.value.plan_id=c)};let L={1:e("order.officialPush"),2:e("order.unofficialPush")},R={0:e("order.pendingPlacement"),1:e("order.matching"),2:e("order.placing"),3:e("order.placementFailed"),4:e("order.waitingSettlement"),5:e("order.settlementSuccess")};return(c,u)=>{const V=q,h=at,D=ot,k=G,F=rt,I=E,U=Z,z=X;return b(),w($,null,[a(V,{isLoginOut:!0}),t("div",ct,[t("div",dt,[a(D,{active:_.value,"onUpdate:active":u[0]||(u[0]=o=>_.value=o)},{default:y(()=>[a(h,{title:s(e)("order.all")},null,8,["title"]),a(h,{title:s(e)("order.pendingPlacement")},null,8,["title"]),a(h,{title:s(e)("order.matching")},null,8,["title"]),a(h,{title:s(e)("order.placing")},null,8,["title"]),a(h,{title:s(e)("order.placementFailed")},null,8,["title"]),a(h,{title:s(e)("order.placementCompleted")},null,8,["title"])]),_:1},8,["active"])]),t("div",pt,[a(z,{modelValue:f.value,"onUpdate:modelValue":u[2]||(u[2]=o=>f.value=o),onRefresh:T,"pulling-text":s(e)("common.pullDownRefresh"),"loosing-text":s(e)("common.releaseRefresh"),"loading-text":s(e)("common.loading")},{default:y(()=>[a(U,{loading:d.value,"onUpdate:loading":u[1]||(u[1]=o=>d.value=o),finished:r.value,"finished-text":s(e)("common.noMore"),"loading-text":s(e)("common.loading"),"error-text":s(e)("common.fail"),onLoad:g},{default:y(()=>[(b(!0),w($,null,tt(p.value,o=>(b(),w("div",{class:"plan-item",onClick:A=>c.$router.push("orderDetail?id="+o.id)},[t("div",mt,n(s(L)[o.form]),1),t("div",ut,[t("span",ht,n(s(e)("order.planNumber"))+": "+n(o.order_no),1),t("span",vt,n(s(R)[o.state]),1)]),t("div",gt,[t("div",ft,[t("div",xt,[t("div",wt,[t("div",yt,[a(k,{name:o.image,width:"10.3rem",height:"5.75rem",radius:"10%"},null,8,["name"])])])])]),t("div",bt,[t("div",Ct,[t("div",kt,[a(k,{name:o.goods_logo,width:"1.875rem",height:"1.875rem",radius:"10%"},null,8,["name"])]),t("div",Pt,[t("div",St,n(o.goods_name),1),t("div",$t,n(o.type_name),1)])]),t("div",Nt,[t("div",Tt,n(s(e)("order.video")),1),t("div",Bt,n(s(e)("order.landingPage")),1)])])]),t("div",Lt,n(o.goods_intro),1),t("div",Rt,[t("div",Vt,[t("span",Dt,n(s(e)("order.placementAmount")),1),t("span",Ft,"$ "+n(o.money),1)]),t("div",It,[t("span",Ut,n(s(e)("order.placementProgress")),1),t("div",zt,[a(F,{percentage:100,style:{height:"5px"}}),t("span",At,n(o.schedule)+"%",1)])])]),t("div",Ot,[t("span",Mt,n(s(e)("order.createTime"))+": "+n(s(v).formatToMonthDay(o.create_time,2)),1)]),o.state==0?(b(),w("div",Wt,[a(I,{type:"primary",size:"small",round:"",class:"button",onClick:A=>B(o.plan_id),style:{width:"6.5rem",height:"2.125rem","z-index":"999"}},{default:y(()=>[t("span",jt,n(s(e)("order.placement")),1)]),_:2},1032,["onClick"])])):et("",!0)],8,_t))),256))]),_:1},8,["loading","finished","finished-text","loading-text","error-text"])]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"])])]),a(J,{ref_key:"childRef",ref:x},null,512)],64)}}}),se=st(qt,[["__scopeId","data-v-10a163cc"]]);export{se as default};
