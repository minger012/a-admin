import{d as T,a as m,R as S,c as z,g as O,w as $,i as V,h as x,o as A,n as b,b as c,j,X as C,m as I,Y as s,B as N,s as M,C as U}from"./index-B6wOA8lt.js";import{g as P,t as w,n as g,c as q,J as _,I as F,s as K,L as Q}from"./CpNavBar-djel9aZ1.js";const[G,d]=q("image"),H={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:g,height:g,radius:g,lazyLoad:Boolean,iconSize:g,showError:w,errorIcon:P("photo-fail"),iconPrefix:String,showLoading:w,loadingIcon:P("photo"),crossorigin:String,referrerpolicy:String};var J=T({name:G,props:H,emits:["load","error"],setup(e,{emit:n,slots:o}){const a=m(!1),t=m(!0),i=m(),{$Lazyload:l}=S().proxy,k=z(()=>{const r={width:_(e.width),height:_(e.height)};return O(e.radius)&&(r.overflow="hidden",r.borderRadius=_(e.radius)),r});$(()=>e.src,()=>{a.value=!1,t.value=!0});const f=r=>{t.value&&(t.value=!1,n("load",r))},v=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:i.value,enumerable:!0}),f(r)},h=r=>{a.value=!0,t.value=!1,n("error",r)},y=(r,u,L)=>L?L():c(F,{name:r,size:e.iconSize,class:u,classPrefix:e.iconPrefix},null),B=()=>{if(t.value&&e.showLoading)return c("div",{class:d("loading")},[y(e.loadingIcon,d("loading-icon"),o.loading)]);if(a.value&&e.showError)return c("div",{class:d("error")},[y(e.errorIcon,d("error-icon"),o.error)])},R=()=>{if(a.value||!e.src)return;const r={alt:e.alt,class:d("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?j(c("img",I({ref:i},r),null),[[C("lazy"),e.src]]):c("img",I({ref:i,src:e.src,onLoad:f,onError:h},r),null)},E=({el:r})=>{const u=()=>{r===i.value&&t.value&&v()};i.value?u():b(u)},p=({el:r})=>{r===i.value&&!a.value&&h()};return l&&V&&(l.$on("loaded",E),l.$on("error",p),x(()=>{l.$off("loaded",E),l.$off("error",p)})),A(()=>{b(()=>{var r;(r=i.value)!=null&&r.complete&&!e.lazyLoad&&v()})}),()=>{var r;return c("div",{class:d({round:e.round,block:e.block}),style:k.value},[R(),B(),(r=o.default)==null?void 0:r.call(o)])}}});const W=K(J),D=(e,n,o)=>{const a=e[n];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((t,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==o?". Note that variables only represent file names one level deep.":""))))})},Z=T({__name:"CpImage",props:{name:{},src:{},width:{},height:{},round:{type:Boolean},radius:{},fileType:{},dir:{}},setup(e){const n=e,o=m();return n.src?o.value=n.src:n.name&&n.name.includes("http")?o.value=n.name:n.dir?D(Object.assign({}),`../assets/img/${n.dir}/${n.name}.${n.fileType||"png"}`,5).then(a=>{o.value=a.default}):D(Object.assign({"../assets/img/apple-store-Da3dkSd7.png":()=>s(()=>import("./apple-store-Da3dkSd7-D2fWyQEp.js"),[]),"../assets/img/banner1-D_iNypES.png":()=>s(()=>import("./banner1-D_iNypES-D1OTGBsF.js"),[]),"../assets/img/banner2-FQGNIWdl.png":()=>s(()=>import("./banner2-FQGNIWdl-DkseoFNC.js"),[]),"../assets/img/goods-detail-header-bg-BbrPUqL6.png":()=>s(()=>import("./goods-detail-header-bg-BbrPUqL6-JVAIxD3x.js"),[]),"../assets/img/google-play-nQbvKhbh.png":()=>s(()=>import("./google-play-nQbvKhbh-BflS0lCL.js"),[]),"../assets/img/logo-C8lBymrN.png":()=>s(()=>import("./logo-C8lBymrN-D98xDfTA.js"),[]),"../assets/img/recharge-banner-Bkr9lTMK.png":()=>s(()=>import("./recharge-banner-Bkr9lTMK-FM_NWu-G.js"),[]),"../assets/img/star.png":()=>s(()=>import("./star-iUIxs2Pw.js"),[])}),`../assets/img/${n.name}.${n.fileType||"png"}`,4).then(a=>{o.value=a.default}),(a,t)=>{const i=Q,l=W;return U(),N(l,{src:o.value,width:n.width,height:n.height,round:n.round,radius:n.radius},{loading:M(()=>[c(i,{type:"spinner",size:"20"})]),_:1},8,["src","width","height","round","radius"])}}});export{W as I,Z as _};
