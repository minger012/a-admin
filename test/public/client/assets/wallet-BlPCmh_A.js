import{d as et,V as at,ag as ot,a as d,w as W,v as lt,az as j,W as I,f as i,Y as t,a1 as a,$ as u,P as nt,Z as J,a9 as it,a0 as s,I as dt,a3 as rt,_ as ct,a6 as K,aa as ut,aA as _t,av as vt,ab as P,aB as pt,ae as mt}from"./index-CyuuB1M6.js";import"./index-BYtDS21d.js";import{F as wt}from"./index-d4hoqJyy.js";import{P as ht,N as ft}from"./index-BWUqMBM5.js";import{P as yt,L as gt}from"./index-B94b41DW.js";import{E as bt}from"./index-DPiXAjQT.js";import{_ as kt,a as xt,B as Ct}from"./CpNavBar-fTwR2mKR.js";import Bt from"./recharge-banner-Bkr9lTMK-FM_NWu-G.js";import{a as Dt,u as Mt}from"./common-CNO51FtN.js";import"./use-id-erQ3pgZO.js";import"./use-tab-status-Dj4hn7Vs.js";const Pt={class:"page"},$t={class:"section"},Tt={class:"title-line"},Vt={class:"title"},Ut={class:"tag"},At={class:"money"},St={class:"currency"},Lt={class:"amount"},It={class:"money-content"},Nt={class:"money-item"},Ft={class:"label"},zt={class:"text"},Et={class:"money-item"},Rt={class:"label"},Wt={class:"text"},jt={class:"money-item"},Jt={class:"label"},Kt={class:"text"},Yt={class:"btn-wrap space-x-3"},Zt={class:"text-sm"},qt={class:"text-sm"},Gt={class:"link-list"},Ht={class:"link-title"},Ot={class:"label"},Qt={class:"link-title"},Xt={class:"label"},ts={class:"record-wrap"},ss={class:"record-title"},es={class:"record-list"},as=["onClick"],os={class:"record-content"},ls={class:"time"},ns={class:"dialog-wrap"},is={class:"dialog-title",style:{margin:"0px"}},ds={class:"content-wrap"},rs={class:"content-item"},cs={class:"label"},us={class:"text"},_s={class:"content-item"},vs={class:"label"},ps={class:"text"},ms={class:"content-item"},ws={class:"label"},hs={class:"text"},fs={class:"content-item"},ys={class:"label"},gs={class:"text"},bs={class:"dialog-wrap"},ks={class:"dialog-title"},xs={class:"desc"},Cs={class:"text-sm"},Bs={class:"dialog-wrap"},Ds={class:"dialog-title"},Ms={class:"form-wrap"},Ps={class:"label"},$s={class:"input-wrap"},Ts={class:"label"},Vs={class:"form-tips"},Us={class:"count-money"},As={class:"flex justify-center"},Ss={class:"text-sm"},Ls={class:"dialog-wrap"},Is={class:"dialog-title",style:{margin:"0px"}},Ns={class:"text"},Fs={class:"text"},zs={class:"text"},Es={class:"flex justify-center"},Rs={class:"text-sm"},Ws=et({__name:"wallet",setup(js){const{t:o}=at(),N=Dt(),w=Mt(),F=ut(),z=ot(),x=d({page:0,pageSize:10}),y=d(!1),C=d(!1),$=d([]),E=async()=>{C.value||(y.value=!0,x.value.page++,await pt(x.value).then(l=>{$.value.push(...l.data.list),x.value.page>=l.data.total_page&&(C.value=!0),y.value=!1}).catch(()=>{y.value=!1}))},h=d(!1),Y=()=>{j().then(l=>{r.value=l.data,h.value=!1}).catch(()=>h.value=!1),x.value.page=0,C.value=!1,$.value=[],E()},T=d(!1),B=d(!1),D=d(!1),V=d(!1),_=d(""),U=d(!0);W(_,l=>{const e=l.replace(/[^\d]/g,"").slice(0,6);e!==l&&(_.value=e),_.value.length==6?U.value=!1:U.value=!0});const f=d(),A=d(!0);W(f,l=>{l>0&&l<=r.value.money?A.value=!1:A.value=!0});const Z=()=>{var l,e;if(r!=null&&r.value){if(((l=z.user)==null?void 0:l.set_card)!=1){K(o("wallet.withdrawal.rules.bindCardFirst")),F.push("bindCard");return}if(((e=z.user)==null?void 0:e.set_pay_password)!=1){K(o("wallet.withdrawal.rules.setPasswordFirst")),F.push("paypassword?isJump=1");return}D.value=!0}},R=async()=>{if(!_.value){B.value=!0;return}B.value=!1,await _t(f.value,_.value).then(l=>{D.value=!1,f.value="",location.reload(),vt(l.msg)}).finally(()=>{_.value=""})},q=l=>{l&&window.open(l)},r=d(),g=d(),c=d([]),G=async()=>{await it("1,2,4").then(l=>{c.value=l.data})};return lt(async()=>{h.value=!0,Promise.all([G(),await j().then(l=>{r.value=l.data,h.value=!1}).catch(()=>h.value=!1)])}),(l,e)=>{const H=kt,S=xt,b=Ct,L=dt,Js=bt,O=gt,Q=yt,M=nt,X=ht,tt=ft,st=wt;return P(),I(J,null,[i(H,{title:a(o)("wallet.title")},null,8,["title"]),t("div",Pt,[i(Q,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=n=>h.value=n),onRefresh:Y},{default:u(()=>{var n,v,p,k;return[t("div",$t,[t("div",Tt,[t("div",Vt,[t("span",null,s(a(o)("wallet.totalAssets")),1),i(S,{name:"eye"})]),t("div",Ut,s(c.value[2]),1)]),t("div",At,[t("span",St,s(c.value[1]),1),t("span",Lt,s(a(w).formatMoney((n=r.value)==null?void 0:n.money)),1)]),t("div",It,[t("div",Nt,[t("span",Ft,s(a(o)("wallet.availableBalance")),1),t("span",zt,s(c.value[1])+" "+s(a(w).formatMoney((v=r.value)==null?void 0:v.money)),1)]),t("div",Et,[t("span",Rt,s(a(o)("wallet.pendingConsumption")),1),t("span",Wt,s(c.value[1])+" "+s(a(w).formatMoney((p=r.value)==null?void 0:p.wait_putIn)),1)]),t("div",jt,[t("span",Jt,s(a(o)("wallet.pendingSettlement")),1),t("span",Kt,s(c.value[1])+" "+s(a(w).formatMoney((k=r.value)==null?void 0:k.wait_money)),1)])]),t("div",Yt,[i(b,{type:"primary",block:"",plain:"",round:"",onClick:e[0]||(e[0]=m=>Z())},{default:u(()=>[t("span",Zt,s(a(o)("wallet.withdraw")),1)]),_:1}),i(b,{type:"primary",round:"",onClick:e[1]||(e[1]=m=>V.value=!0),block:""},{default:u(()=>[t("span",qt,s(a(o)("wallet.deposit")),1)]),_:1})]),t("div",Gt,[t("div",{class:"link-item",onClick:e[2]||(e[2]=m=>l.$router.push("bindCard"))},[t("div",Ht,[i(S,{name:"card-pos-2",size:"5vw"}),t("span",Ot,s(a(o)("wallet.bindBankCard")),1)]),i(L,{name:"arrow"})]),t("div",{class:"link-item",onClick:e[3]||(e[3]=m=>l.$router.push("paypassword"))},[t("div",Qt,[i(S,{name:"edit-password",size:"5vw"}),t("span",Xt,s(a(o)("wallet.changePaymentPassword")),1)]),i(L,{name:"arrow"})])])]),t("div",ts,[t("div",ss,s(a(o)("wallet.fundDetails")),1),t("div",es,[(P(),rt(O,{key:1,loading:y.value,"onUpdate:loading":e[4]||(e[4]=m=>y.value=m),finished:C.value,onLoad:E,"finished-text":a(o)("common.noMore")},{default:u(()=>[(P(!0),I(J,null,ct($.value,m=>(P(),I("div",{class:"record-item",onClick:Ks=>{T.value=!0,g.value=m}},[t("div",os,[e[16]||(e[16]=t("div",{class:"label"},null,-1)),t("div",ls,s(a(N).formatToMonthDay(m.create_time,1)),1)]),i(L,{name:"arrow"})],8,as))),256))]),_:1},8,["loading","finished","finished-text"]))])])]}),_:1},8,["modelValue"])]),i(M,{show:T.value,"onUpdate:show":e[6]||(e[6]=n=>T.value=n),position:"bottom",round:"",style:{height:"55%"}},{default:u(()=>{var n,v,p,k;return[t("div",ns,[t("div",is,s(a(o)("wallet.flowDetail.title")),1),t("div",ds,[t("div",rs,[t("div",cs,s(a(o)("wallet.flowDetail.id")),1),t("div",us,s((n=g.value)==null?void 0:n.id),1)]),t("div",_s,[t("div",vs,s(a(o)("wallet.flowDetail.time")),1),t("div",ps,s(a(N).formatToMonthDay((v=g.value)==null?void 0:v.create_time,1)),1)]),t("div",ms,[t("div",ws,s(a(o)("wallet.flowDetail.amount")),1),t("div",hs,s(c.value[1])+" "+s(a(w).formatMoney((p=g.value)==null?void 0:p.cha)),1)]),t("div",fs,[t("div",ys,s(a(o)("wallet.flowDetail.remarks")),1),t("div",gs,s((k=g.value)==null?void 0:k.remarks),1)])])])]}),_:1},8,["show"]),i(M,{show:B.value,"onUpdate:show":e[9]||(e[9]=n=>B.value=n),position:"bottom",round:"",style:{height:"95%"}},{default:u(()=>[t("div",bs,[t("div",ks,s(a(o)("wallet.paymentPassword.title")),1),t("div",xs,s(a(o)("wallet.paymentPassword.desc")),1),i(X,{value:_.value,length:6},null,8,["value"]),i(tt,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=n=>_.value=n),show:!0},null,8,["modelValue"]),i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},disabled:U.value,onClick:e[8]||(e[8]=n=>R())},{default:u(()=>[t("span",Cs,s(a(o)("wallet.paymentPassword.confirm")),1)]),_:1},8,["disabled"])])]),_:1},8,["show"]),i(M,{show:D.value,"onUpdate:show":e[13]||(e[13]=n=>D.value=n),position:"bottom",round:"",style:{height:"50%"}},{default:u(()=>{var n;return[t("div",Bs,[t("div",Ds,s(a(o)("wallet.withdrawal.title")),1),t("div",Ms,[t("div",Ps,s(a(o)("wallet.withdrawal.enterAmount")),1),t("div",$s,[t("span",Ts,s(c.value[1]),1),i(st,{modelValue:f.value,"onUpdate:modelValue":e[10]||(e[10]=v=>f.value=v)},null,8,["modelValue"])]),t("div",Vs,[t("span",Us,s(a(o)("wallet.withdrawal.available"))+" "+s(c.value[1])+" "+s(a(w).formatMoney((n=r.value)==null?void 0:n.money)),1),t("span",{class:"all-text",onClick:e[11]||(e[11]=v=>{var p;return f.value=a(w).formatMoney((p=r.value)==null?void 0:p.money)})},s(a(o)("wallet.withdrawal.withdrawAll")),1)])]),t("div",As,[i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},disabled:A.value,onClick:e[12]||(e[12]=v=>R())},{default:u(()=>[t("span",Ss,s(a(o)("wallet.withdraw")),1)]),_:1},8,["disabled"])])])]}),_:1},8,["show"]),i(M,{show:V.value,"onUpdate:show":e[15]||(e[15]=n=>V.value=n),position:"bottom",round:"",style:{height:"60%"}},{default:u(()=>[t("div",Ls,[t("div",Is,s(a(o)("wallet.depositTips.title")),1),e[17]||(e[17]=t("img",{class:"banner",width:"343",src:Bt,alt:""},null,-1)),t("p",Ns,s(a(o)("wallet.depositTips.text1")),1),t("p",Fs,s(a(o)("wallet.depositTips.text2")),1),t("p",zs,s(a(o)("wallet.depositTips.text3")),1),t("div",Es,[i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},onClick:e[14]||(e[14]=n=>q(r.value.service_address||c.value[4][Math.floor(Math.random()*c.value[4].length)].link))},{default:u(()=>[t("span",Rs,s(a(o)("wallet.depositTips.contactService")),1)]),_:1})])])]),_:1},8,["show"])],64)}}}),ae=mt(Ws,[["__scopeId","data-v-951aadc9"]]);export{ae as default};
