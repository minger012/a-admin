import{_ as q,B as C,A as n,ad as R}from"./CpNavBar-BEpOqNwz.js";import"./index-D7SfZyv_.js";import{F as B}from"./index-DbElvG5H.js";import{d as F,u as I,a as o,l as A,b as t,q as g,y as s,s as f,F as N,x as S,H as T,C as U,_ as D}from"./index-CS2Ya4Ki.js";import{F as E}from"./index-DmQqm3Pv.js";import"./use-id-sX8ZKSaD.js";const H={class:"page"},M={class:"mt-8 px-8"},O={class:"text-base"},W=F({__name:"password",setup(j){const{t:e}=I(),_=T(),u=o(!1),i=o(!1),c=o(!1),p=o(""),a=o(""),w=o(""),l=o(!1),h=()=>{u.value=!u.value},y=()=>{i.value=!i.value},b=()=>{c.value=!c.value},P=async()=>{if(!l.value){if(a.value!==w.value){n(e("password.rules.passwordMismatch"));return}if(a.value.length<6){n(e("password.rules.passwordTooShort"));return}if(p.value===a.value){n(e("password.rules.sameAsOld"));return}l.value=!0;try{await R(p.value,a.value,w.value).then(m=>{n(m.msg||e("password.messages.success")),setTimeout(()=>{_.back()},1e3)})}catch(m){n(m.message||e("password.messages.error"))}finally{l.value=!1}}};return(m,r)=>{const V=q,v=B,k=C,x=E;return U(),A(N,null,[t(V,{title:s(e)("password.title")},null,8,["title"]),g("div",H,[t(x,{onSubmit:P},{default:f(()=>[t(v,{"left-icon":"lock",modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=d=>p.value=d),type:u.value?"text":"password","right-icon":u.value?"eye-o":"closed-eye",onClickRightIcon:h,label:s(e)("password.oldPassword"),placeholder:s(e)("password.oldPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.oldPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),t(v,{"left-icon":"lock",modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=d=>a.value=d),type:i.value?"text":"password","right-icon":i.value?"eye-o":"closed-eye",onClickRightIcon:y,label:s(e)("password.newPassword"),placeholder:s(e)("password.newPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.newPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),t(v,{"left-icon":"lock",modelValue:w.value,"onUpdate:modelValue":r[2]||(r[2]=d=>w.value=d),type:c.value?"text":"password","right-icon":c.value?"eye-o":"closed-eye",onClickRightIcon:b,label:s(e)("password.confirmPassword"),placeholder:s(e)("password.confirmPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.confirmPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),g("div",M,[t(k,{round:"",block:"",type:"primary","native-type":"submit",loading:l.value,disabled:l.value},{default:f(()=>[g("span",O,S(l.value?s(e)("password.changing"):s(e)("password.submit")),1)]),_:1},8,["loading","disabled"])])]),_:1})])],64)}}}),X=D(W,[["__scopeId","data-v-936b969f"]]);export{X as default};
