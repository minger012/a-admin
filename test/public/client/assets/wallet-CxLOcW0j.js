import{d as st,V as at,ag as ot,a as d,w as W,v as lt,ax as j,W as I,f as i,Y as t,a1 as a,$ as u,P as nt,Z as J,a8 as it,a0 as e,I as dt,a3 as rt,_ as ct,a6 as K,a9 as ut,ay as _t,at as pt,aa as P,az as vt,ae as mt}from"./index-DoQrIYf3.js";import"./index-B-ICCzxn.js";import{F as wt}from"./index-SwGgnStn.js";import{P as ht,N as ft}from"./index-Ct7HaATF.js";import{P as yt,L as gt}from"./index-BuP-3vSl.js";import{E as bt}from"./index-DPGTOWvj.js";import{_ as kt,a as xt,B as Ct}from"./CpNavBar-DsDodjpW.js";import Bt from"./recharge-banner-Bkr9lTMK-FM_NWu-G.js";import{a as Dt,u as Mt}from"./common-fNtoFq1c.js";import"./use-id-ciVahQ9Q.js";import"./use-tab-status-DZcp3qnL.js";const Pt={class:"page"},$t={class:"section"},Tt={class:"title-line"},Vt={class:"title"},Ut={class:"tag"},St={class:"money"},At={class:"currency"},Lt={class:"amount"},It={class:"money-content"},Nt={class:"money-item"},Ft={class:"label"},zt={class:"text"},Et={class:"money-item"},Rt={class:"label"},Wt={class:"text"},jt={class:"money-item"},Jt={class:"label"},Kt={class:"text"},Yt={class:"btn-wrap space-x-3"},Zt={class:"text-sm"},qt={class:"text-sm"},Gt={class:"link-list"},Ht={class:"link-title"},Ot={class:"label"},Qt={class:"link-title"},Xt={class:"label"},te={class:"record-wrap"},ee={class:"record-title"},se={class:"record-list"},ae=["onClick"],oe={class:"record-content"},le={class:"time"},ne={class:"dialog-wrap"},ie={class:"dialog-title",style:{margin:"0px"}},de={class:"content-wrap"},re={class:"content-item"},ce={class:"label"},ue={class:"text"},_e={class:"content-item"},pe={class:"label"},ve={class:"text"},me={class:"content-item"},we={class:"label"},he={class:"text"},fe={class:"content-item"},ye={class:"label"},ge={class:"text"},be={class:"dialog-wrap"},ke={class:"dialog-title"},xe={class:"desc"},Ce={class:"text-sm"},Be={class:"dialog-wrap"},De={class:"dialog-title"},Me={class:"form-wrap"},Pe={class:"label"},$e={class:"input-wrap"},Te={class:"label"},Ve={class:"form-tips"},Ue={class:"count-money"},Se={class:"flex justify-center"},Ae={class:"text-sm"},Le={class:"dialog-wrap"},Ie={class:"dialog-title",style:{margin:"0px"}},Ne={class:"text"},Fe={class:"text"},ze={class:"text"},Ee={class:"flex justify-center"},Re={class:"text-sm"},We=st({__name:"wallet",setup(je){const{t:o}=at(),N=Dt(),w=Mt(),F=ut(),z=ot(),x=d({page:0,pageSize:10}),y=d(!1),C=d(!1),$=d([]),E=async()=>{C.value||(y.value=!0,x.value.page++,await vt(x.value).then(l=>{$.value.push(...l.data.list),x.value.page>=l.data.total_page&&(C.value=!0),y.value=!1}).catch(()=>{y.value=!1}))},h=d(!1),Y=()=>{j().then(l=>{r.value=l.data,h.value=!1}).catch(()=>h.value=!1),x.value.page=0,C.value=!1,$.value=[],E()},T=d(!1),B=d(!1),D=d(!1),V=d(!1),_=d(""),U=d(!0);W(_,l=>{const s=l.replace(/[^\d]/g,"").slice(0,6);s!==l&&(_.value=s),_.value.length==6?U.value=!1:U.value=!0});const f=d(),S=d(!0);W(f,l=>{l>0&&l<=r.value.money?S.value=!1:S.value=!0});const Z=()=>{var l,s;if(r!=null&&r.value){if(((l=z.user)==null?void 0:l.set_card)!=1){K(o("wallet.withdrawal.rules.bindCardFirst")),F.push("bindCard");return}if(((s=z.user)==null?void 0:s.set_pay_password)!=1){K(o("wallet.withdrawal.rules.setPasswordFirst")),F.push("paypassword?isJump=1");return}D.value=!0}},R=async()=>{if(!_.value){B.value=!0;return}B.value=!1,await _t(f.value,_.value).then(l=>{D.value=!1,f.value="",location.reload(),pt(l.msg)}).finally(()=>{_.value=""})},q=l=>{l&&window.open(l)},r=d(),g=d(),c=d([]),G=async()=>{await it("1,2,4").then(l=>{c.value=l.data})};return lt(async()=>{h.value=!0,Promise.all([G(),await j().then(l=>{r.value=l.data,h.value=!1}).catch(()=>h.value=!1)])}),(l,s)=>{const H=kt,A=xt,b=Ct,L=dt,Je=bt,O=gt,Q=yt,M=nt,X=ht,tt=ft,et=wt;return P(),I(J,null,[i(H,{title:a(o)("wallet.title")},null,8,["title"]),t("div",Pt,[i(Q,{modelValue:h.value,"onUpdate:modelValue":s[5]||(s[5]=n=>h.value=n),onRefresh:Y},{default:u(()=>{var n,p,v,k;return[t("div",$t,[t("div",Tt,[t("div",Vt,[t("span",null,e(a(o)("wallet.totalAssets")),1),i(A,{name:"eye"})]),t("div",Ut,e(c.value[2]),1)]),t("div",St,[t("span",At,e(c.value[1]),1),t("span",Lt,e(a(w).formatMoney((n=r.value)==null?void 0:n.money)),1)]),t("div",It,[t("div",Nt,[t("span",Ft,e(a(o)("wallet.availableBalance")),1),t("span",zt,e(c.value[1])+" "+e(a(w).formatMoney((p=r.value)==null?void 0:p.money)),1)]),t("div",Et,[t("span",Rt,e(a(o)("wallet.pendingConsumption")),1),t("span",Wt,e(c.value[1])+" "+e(a(w).formatMoney((v=r.value)==null?void 0:v.wait_putIn)),1)]),t("div",jt,[t("span",Jt,e(a(o)("wallet.pendingSettlement")),1),t("span",Kt,e(c.value[1])+" "+e(a(w).formatMoney((k=r.value)==null?void 0:k.wait_money)),1)])]),t("div",Yt,[i(b,{type:"primary",block:"",plain:"",round:"",onClick:s[0]||(s[0]=m=>Z())},{default:u(()=>[t("span",Zt,e(a(o)("wallet.withdraw")),1)]),_:1}),i(b,{type:"primary",round:"",onClick:s[1]||(s[1]=m=>V.value=!0),block:""},{default:u(()=>[t("span",qt,e(a(o)("wallet.deposit")),1)]),_:1})]),t("div",Gt,[t("div",{class:"link-item",onClick:s[2]||(s[2]=m=>l.$router.push("bindCard"))},[t("div",Ht,[i(A,{name:"card-pos-2",size:"1.1719rem"}),t("span",Ot,e(a(o)("wallet.bindBankCard")),1)]),i(L,{name:"arrow"})]),t("div",{class:"link-item",onClick:s[3]||(s[3]=m=>l.$router.push("paypassword"))},[t("div",Qt,[i(A,{name:"edit-password",size:"1.1719rem"}),t("span",Xt,e(a(o)("wallet.changePaymentPassword")),1)]),i(L,{name:"arrow"})])])]),t("div",te,[t("div",ee,e(a(o)("wallet.fundDetails")),1),t("div",se,[(P(),rt(O,{key:1,loading:y.value,"onUpdate:loading":s[4]||(s[4]=m=>y.value=m),finished:C.value,onLoad:E,"finished-text":a(o)("common.noMore")},{default:u(()=>[(P(!0),I(J,null,ct($.value,m=>(P(),I("div",{class:"record-item",onClick:Ke=>{T.value=!0,g.value=m}},[t("div",oe,[s[16]||(s[16]=t("div",{class:"label"},null,-1)),t("div",le,e(a(N).formatToMonthDay(m.create_time,1)),1)]),i(L,{name:"arrow"})],8,ae))),256))]),_:1},8,["loading","finished","finished-text"]))])])]}),_:1},8,["modelValue"])]),i(M,{show:T.value,"onUpdate:show":s[6]||(s[6]=n=>T.value=n),position:"bottom",round:"",style:{height:"55%"}},{default:u(()=>{var n,p,v,k;return[t("div",ne,[t("div",ie,e(a(o)("wallet.flowDetail.title")),1),t("div",de,[t("div",re,[t("div",ce,e(a(o)("wallet.flowDetail.id")),1),t("div",ue,e((n=g.value)==null?void 0:n.id),1)]),t("div",_e,[t("div",pe,e(a(o)("wallet.flowDetail.time")),1),t("div",ve,e(a(N).formatToMonthDay((p=g.value)==null?void 0:p.create_time,1)),1)]),t("div",me,[t("div",we,e(a(o)("wallet.flowDetail.amount")),1),t("div",he,e(c.value[1])+" "+e(a(w).formatMoney((v=g.value)==null?void 0:v.cha)),1)]),t("div",fe,[t("div",ye,e(a(o)("wallet.flowDetail.remarks")),1),t("div",ge,e((k=g.value)==null?void 0:k.remarks),1)])])])]}),_:1},8,["show"]),i(M,{show:B.value,"onUpdate:show":s[9]||(s[9]=n=>B.value=n),position:"bottom",round:"",style:{height:"95%"}},{default:u(()=>[t("div",be,[t("div",ke,e(a(o)("wallet.paymentPassword.title")),1),t("div",xe,e(a(o)("wallet.paymentPassword.desc")),1),i(X,{value:_.value,length:6},null,8,["value"]),i(tt,{modelValue:_.value,"onUpdate:modelValue":s[7]||(s[7]=n=>_.value=n),show:!0},null,8,["modelValue"]),i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},disabled:U.value,onClick:s[8]||(s[8]=n=>R())},{default:u(()=>[t("span",Ce,e(a(o)("wallet.paymentPassword.confirm")),1)]),_:1},8,["disabled"])])]),_:1},8,["show"]),i(M,{show:D.value,"onUpdate:show":s[13]||(s[13]=n=>D.value=n),position:"bottom",round:"",style:{height:"50%"}},{default:u(()=>{var n;return[t("div",Be,[t("div",De,e(a(o)("wallet.withdrawal.title")),1),t("div",Me,[t("div",Pe,e(a(o)("wallet.withdrawal.enterAmount")),1),t("div",$e,[t("span",Te,e(c.value[1]),1),i(et,{modelValue:f.value,"onUpdate:modelValue":s[10]||(s[10]=p=>f.value=p)},null,8,["modelValue"])]),t("div",Ve,[t("span",Ue,e(a(o)("wallet.withdrawal.available"))+" "+e(c.value[1])+" "+e(a(w).formatMoney((n=r.value)==null?void 0:n.money)),1),t("span",{class:"all-text",onClick:s[11]||(s[11]=p=>{var v;return f.value=a(w).formatMoney((v=r.value)==null?void 0:v.money)})},e(a(o)("wallet.withdrawal.withdrawAll")),1)])]),t("div",Se,[i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},disabled:S.value,onClick:s[12]||(s[12]=p=>R())},{default:u(()=>[t("span",Ae,e(a(o)("wallet.withdraw")),1)]),_:1},8,["disabled"])])])]}),_:1},8,["show"]),i(M,{show:V.value,"onUpdate:show":s[15]||(s[15]=n=>V.value=n),position:"bottom",round:"",style:{height:"60%"}},{default:u(()=>[t("div",Le,[t("div",Ie,e(a(o)("wallet.depositTips.title")),1),s[17]||(s[17]=t("img",{class:"banner",width:"343",src:Bt,alt:""},null,-1)),t("p",Ne,e(a(o)("wallet.depositTips.text1")),1),t("p",Fe,e(a(o)("wallet.depositTips.text2")),1),t("p",ze,e(a(o)("wallet.depositTips.text3")),1),t("div",Ee,[i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},onClick:s[14]||(s[14]=n=>q(r.value.service_address||c.value[4][Math.floor(Math.random()*c.value[4].length)].link))},{default:u(()=>[t("span",Re,e(a(o)("wallet.depositTips.contactService")),1)]),_:1})])])]),_:1},8,["show"])],64)}}}),as=mt(We,[["__scopeId","data-v-8133e49b"]]);export{as as default};
