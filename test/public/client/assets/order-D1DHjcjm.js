import{d as M,V as O,a as l,w as U,v as E,W as f,f as i,Y as e,$ as g,Z as P,a1 as a,_ as W,a9 as X,a0 as o,a8 as w,aa as Y}from"./index-YE2psqqH.js";import{P as Z,L as j}from"./index-DhojwZUU.js";import{_ as q,b as G,B as H,e as N}from"./CpNavBar-DF-_LF7D.js";import{P as J}from"./index-0AeJwFyo.js";import{_ as K}from"./CpImage.vue_vue_type_script_setup_true_lang-DUqGVnwI.js";import{a as Q}from"./common-B3TmWd0J.js";import{C as ee}from"./CpPutin-BeX1uKXP.js";import{T as te,a as se}from"./index-BFyK8197.js";import"./use-tab-status-C8p54YtO.js";import"./index-B7xk7sTh.js";import"./use-id-UcQghhl8.js";import"./index-qmKyu2UC.js";const ae={class:"page"},oe={class:"tab-wrap"},ne={class:"p-4"},ie={class:"plan-item"},le={class:"push-tag"},de={class:"title-line"},re={class:"title"},ce={class:"status"},_e=["onClick"],pe={class:"banner"},me={class:"van-swipe my-swipe"},ue={class:"van-swipe__track",style:{"transition-duration":"0ms",transform:"translateX(0px)",width:"165px"}},he={class:"van-swipe-item",style:{width:"165px"}},ve={class:"app-content"},fe={class:"app-title"},ge={class:"logo"},we={class:"app-title-wrap"},ye={class:"app-name"},be={class:"app-desc"},xe={class:"app-tag"},Ce={class:"tag"},Pe={class:"tag"},Ne={class:"plan-text"},ke={class:"put-wrap"},Be={class:"put-item"},Le={class:"label"},Se={class:"value"},Ve={class:"put-item"},De={class:"label"},Te={class:"progress"},$e={class:"progress-text"},Ae={class:"title-line mt-2"},Re={class:"title"},ze={key:0,class:"btn-wrap"},Fe={class:"text-[3.2vw]"},Ie=M({__name:"order",setup(Me){const k=Q(),{t}=O(),m=l(0),d=l({page:0,pageSize:10,type:m.value}),p=l(!1),u=l(!1),h=l([]),y=l(0),b=async()=>{u.value||(p.value=!0,d.value.page++,await N(d.value).then(n=>{h.value.push(...n.data.list),y.value=n.data.waitSendNum,d.value.page>=n.data.total_page&&(u.value=!0),p.value=!1}).catch(()=>{p.value=!1}))},v=l(!1),B=async()=>{d.value.page=1,await N(d.value).then(n=>{h.value=n.data.list,y.value=n.data.waitSendNum,v.value=!1}).catch(()=>{v.value=!1})};U(m,async n=>{d.value.page=0,d.value.type=n,h.value=[],u.value=!1,b()});const r=l(null),L=n=>{r.value&&(r.value.showBottom3=!0,r.value.order_id=n.id,r.value.min=n.min,r.value.max=n.max)},x=l([]),S=async()=>{await G("1").then(n=>{x.value=n.data})};let V={1:t("order.officialPush"),2:t("order.unofficialPush")},D={0:t("order.pendingPlacement"),1:t("order.matching"),2:t("order.placing"),3:t("order.placementFailed"),4:t("order.waitingSettlement"),5:t("order.settlementSuccess")};return E(()=>{Promise.all([S()])}),(n,c)=>{const T=q,_=se,$=te,C=K,A=J,R=H,z=j,F=Z;return w(),f(P,null,[i(T,{isLoginOut:!0}),e("div",ae,[e("div",oe,[i($,{active:m.value,"onUpdate:active":c[0]||(c[0]=s=>m.value=s)},{default:g(()=>[i(_,{title:a(t)("order.all")},null,8,["title"]),i(_,{title:a(t)("order.pendingPlacement"),badge:y.value||""},null,8,["title","badge"]),i(_,{title:a(t)("order.matching")},null,8,["title"]),i(_,{title:a(t)("order.placing")},null,8,["title"]),i(_,{title:a(t)("order.placementFailed")},null,8,["title"]),i(_,{title:a(t)("order.placementCompleted")},null,8,["title"])]),_:1},8,["active"])]),e("div",ne,[i(F,{modelValue:v.value,"onUpdate:modelValue":c[2]||(c[2]=s=>v.value=s),onRefresh:B},{default:g(()=>[i(z,{loading:p.value,"onUpdate:loading":c[1]||(c[1]=s=>p.value=s),finished:u.value,onLoad:b,"finished-text":a(t)("common.noMore")},{default:g(()=>[(w(!0),f(P,null,W(h.value,s=>(w(),f("div",ie,[e("div",le,o(a(V)[s.form]),1),e("div",de,[e("span",re,o(a(t)("order.planNumber"))+": "+o(s.order_no),1),e("span",ce,o(a(D)[s.state]),1)]),e("div",{class:"plan-content",onClick:I=>n.$router.push("orderDetail?id="+s.id)},[e("div",pe,[e("div",me,[e("div",ue,[e("div",he,[i(C,{name:s.image,width:"10.3rem",height:"5.75rem",radius:"10%"},null,8,["name"])])])])]),e("div",ve,[e("div",fe,[e("div",ge,[i(C,{name:s.goods_logo,width:"1.875rem",height:"1.875rem",radius:"10%"},null,8,["name"])]),e("div",we,[e("div",ye,o(s.goods_name),1),e("div",be,o(s.type_name),1)])]),e("div",xe,[e("div",Ce,o(a(t)("order.video")),1),e("div",Pe,o(a(t)("order.landingPage")),1)])])],8,_e),e("div",Ne,o(s.goods_intro),1),e("div",ke,[e("div",Be,[e("span",Le,o(a(t)("order.placementAmount")),1),e("span",Se,o(x.value[1])+" "+o(s.money),1)]),e("div",Ve,[e("span",De,o(a(t)("order.placementProgress")),1),e("div",Te,[i(A,{percentage:s.schedule,"pivot-text":"",style:{height:"5px",width:"100%"}},null,8,["percentage"]),e("span",$e,o(s.schedule)+"%",1)])])]),e("div",Ae,[e("span",Re,o(a(t)("order.createTime"))+": "+o(a(k).formatToMonthDay(s.create_time,2)),1)]),s.state==0?(w(),f("div",ze,[i(R,{type:"primary",size:"small",round:"",class:"button",onClick:I=>L(s),style:{width:"6.5rem",height:"2.125rem","z-index":"999"}},{default:g(()=>[e("span",Fe,o(a(t)("order.placement")),1)]),_:2},1032,["onClick"])])):X("",!0)]))),256))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])])]),i(ee,{ref_key:"childRef",ref:r},null,512)],64)}}}),Ke=Y(Ie,[["__scopeId","data-v-4c6cb217"]]);export{Ke as default};
