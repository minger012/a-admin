import{d as R,V as q,a,W as B,f as t,Y as f,a1 as s,$ as g,Z as C,a0 as F,a9 as I,aa as N,a6 as n,aN as S,af as T}from"./index-CW24Rrz8.js";import{_ as U,B as A}from"./CpNavBar-CJHi_sXB.js";import"./index-B90dZW2P.js";import{F as W}from"./index-CKNkarPs.js";import{F as D}from"./index-B51PszVi.js";import"./use-id-DPpD5rJm.js";const E={class:"page"},M={class:"mt-8 px-8"},O={class:"text-base"},Y=R({__name:"password",setup(Z){const{t:e}=q(),_=I(),u=a(!1),i=a(!1),c=a(!1),p=a(""),o=a(""),w=a(""),l=a(!1),h=()=>{u.value=!u.value},y=()=>{i.value=!i.value},b=()=>{c.value=!c.value},P=async()=>{if(!l.value){if(o.value!==w.value){n(e("password.rules.passwordMismatch"));return}if(o.value.length<6){n(e("password.rules.passwordTooShort"));return}if(p.value===o.value){n(e("password.rules.sameAsOld"));return}l.value=!0;try{await S(p.value,o.value,w.value).then(m=>{n(m.msg||e("password.messages.success")),setTimeout(()=>{_.back()},1e3)})}catch(m){n(m.message||e("password.messages.error"))}finally{l.value=!1}}};return(m,r)=>{const V=U,v=W,k=A,x=D;return N(),B(C,null,[t(V,{title:s(e)("password.title")},null,8,["title"]),f("div",E,[t(x,{onSubmit:P},{default:g(()=>[t(v,{"left-icon":"lock",modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=d=>p.value=d),type:u.value?"text":"password","right-icon":u.value?"eye-o":"closed-eye",onClickRightIcon:h,label:s(e)("password.oldPassword"),placeholder:s(e)("password.oldPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.oldPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),t(v,{"left-icon":"lock",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=d=>o.value=d),type:i.value?"text":"password","right-icon":i.value?"eye-o":"closed-eye",onClickRightIcon:y,label:s(e)("password.newPassword"),placeholder:s(e)("password.newPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.newPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),t(v,{"left-icon":"lock",modelValue:w.value,"onUpdate:modelValue":r[2]||(r[2]=d=>w.value=d),type:c.value?"text":"password","right-icon":c.value?"eye-o":"closed-eye",onClickRightIcon:b,label:s(e)("password.confirmPassword"),placeholder:s(e)("password.confirmPasswordPlaceholder"),rules:[{required:!0,message:s(e)("password.rules.confirmPasswordRequired")}]},null,8,["modelValue","type","right-icon","label","placeholder","rules"]),f("div",M,[t(k,{round:"",block:"",type:"primary","native-type":"submit",loading:l.value,disabled:l.value},{default:g(()=>[f("span",O,F(l.value?s(e)("password.changing"):s(e)("password.submit")),1)]),_:1},8,["loading","disabled"])])]),_:1})])],64)}}}),K=T(Y,[["__scopeId","data-v-936b969f"]]);export{K as default};
