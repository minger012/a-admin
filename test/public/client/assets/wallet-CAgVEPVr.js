import{$ as W,_ as et,P as at,D as ot,y as lt,B as nt,I as it,A as j,a0 as dt,W as rt,a1 as ct}from"./CpNavBar-CrmPb7d6.js";import"./index-dtOswf3Q.js";import{F as ut}from"./index-Q4riC8hj.js";import{P as _t,N as pt}from"./index-s1Ddf5_x.js";import{P as vt,L as mt}from"./index-Crbkh05F.js";import{E as wt}from"./index-Bi-t71BQ.js";import ht from"./recharge-banner-Bkr9lTMK-FM_NWu-G.js";import{a as ft,u as yt}from"./common-CcLOc8oO.js";import{d as gt,u as bt,G as kt,a as d,w as q,o as xt,l as F,b as i,q as t,y as a,s as c,F as G,x as s,B as Ct,A as Bt,H as Dt,C as $,_ as Pt}from"./index-DxAKgVpU.js";import"./use-id-BJ_zPNln.js";import"./use-tab-status-DTffKy9P.js";const $t={class:"page"},Mt={class:"section"},Tt={class:"title-line"},At={class:"title"},Ut={class:"tag"},Vt={class:"money"},St={class:"currency"},Lt={class:"amount"},Ft={class:"money-content"},It={class:"money-item"},Nt={class:"label"},zt={class:"text"},Et={class:"money-item"},Rt={class:"label"},Wt={class:"text"},jt={class:"money-item"},qt={class:"label"},Gt={class:"text"},Ht={class:"btn-wrap space-x-3"},Jt={class:"text-sm"},Kt={class:"text-sm"},Ot={class:"link-list"},Qt={class:"link-title"},Xt={class:"label"},Yt={class:"link-title"},Zt={class:"label"},ts={class:"record-wrap"},ss={class:"record-title"},es={class:"record-list"},as=["onClick"],os={class:"record-content"},ls={class:"time"},ns={class:"dialog-wrap"},is={class:"dialog-title",style:{margin:"0px"}},ds={class:"content-wrap"},rs={class:"content-item"},cs={class:"label"},us={class:"text"},_s={class:"content-item"},ps={class:"label"},vs={class:"text"},ms={class:"content-item"},ws={class:"label"},hs={class:"text"},fs={class:"content-item"},ys={class:"label"},gs={class:"text"},bs={class:"dialog-wrap"},ks={class:"dialog-title"},xs={class:"desc"},Cs={class:"text-sm"},Bs={class:"dialog-wrap"},Ds={class:"dialog-title"},Ps={class:"form-wrap"},$s={class:"label"},Ms={class:"input-wrap"},Ts={class:"label"},As={class:"form-tips"},Us={class:"count-money"},Vs={class:"flex justify-center"},Ss={class:"text-sm"},Ls={class:"dialog-wrap"},Fs={class:"dialog-title",style:{margin:"0px"}},Is={class:"text"},Ns={class:"text"},zs={class:"text"},Es={class:"flex justify-center"},Rs={class:"text-sm"},Ws=gt({__name:"wallet",setup(js){const{t:o}=bt(),I=ft(),w=yt(),N=Dt(),z=kt(),x=d({page:0,pageSize:10}),y=d(!1),C=d(!1),M=d([]),E=async()=>{C.value||(y.value=!0,x.value.page++,await ct(x.value).then(l=>{M.value.push(...l.data.list),x.value.page>=l.data.total_page&&(C.value=!0),y.value=!1}).catch(()=>{y.value=!1}))},h=d(!1),H=()=>{W().then(l=>{r.value=l.data,h.value=!1}).catch(()=>h.value=!1),x.value.page=0,C.value=!1,M.value=[],E()},T=d(!1),B=d(!1),D=d(!1),A=d(!1),_=d(""),U=d(!0);q(_,l=>{const e=l.replace(/[^\d]/g,"").slice(0,6);e!==l&&(_.value=e),_.value.length==6?U.value=!1:U.value=!0});const f=d(),V=d(!0);q(f,l=>{l>0&&l<=r.value.money?V.value=!1:V.value=!0});const J=()=>{var l,e;if(r!=null&&r.value){if(((l=z.user)==null?void 0:l.set_card)!=1){j(o("wallet.withdrawal.rules.bindCardFirst")),N.push("bindCard");return}if(((e=z.user)==null?void 0:e.set_pay_password)!=1){j(o("wallet.withdrawal.rules.setPasswordFirst")),N.push("paypassword?isJump=1");return}D.value=!0}},R=async()=>{if(!_.value){B.value=!0;return}B.value=!1,await dt(f.value,_.value).then(l=>{D.value=!1,f.value="",_.value="",location.reload(),rt(l.msg)})},K=l=>{l&&window.open(l)},r=d(),g=d(),u=d([]),O=async()=>{await ot("1,2,4").then(l=>{u.value=l.data})};return xt(async()=>{h.value=!0,Promise.all([O(),await W().then(l=>{r.value=l.data,h.value=!1}).catch(()=>h.value=!1)])}),(l,e)=>{const Q=et,S=lt,b=nt,L=it,qs=wt,X=mt,Y=vt,P=at,Z=_t,tt=pt,st=ut;return $(),F(G,null,[i(Q,{title:a(o)("wallet.title")},null,8,["title"]),t("div",$t,[i(Y,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=n=>h.value=n),onRefresh:H},{default:c(()=>{var n,p,v,k;return[t("div",Mt,[t("div",Tt,[t("div",At,[t("span",null,s(a(o)("wallet.totalAssets")),1),i(S,{name:"eye"})]),t("div",Ut,s(u.value[2]),1)]),t("div",Vt,[t("span",St,s(u.value[1]),1),t("span",Lt,s(a(w).formatMoney((n=r.value)==null?void 0:n.money)),1)]),t("div",Ft,[t("div",It,[t("span",Nt,s(a(o)("wallet.availableBalance")),1),t("span",zt,s(u.value[1])+" "+s(a(w).formatMoney((p=r.value)==null?void 0:p.money)),1)]),t("div",Et,[t("span",Rt,s(a(o)("wallet.pendingConsumption")),1),t("span",Wt,s(u.value[1])+" "+s(a(w).formatMoney((v=r.value)==null?void 0:v.wait_putIn)),1)]),t("div",jt,[t("span",qt,s(a(o)("wallet.pendingSettlement")),1),t("span",Gt,s(u.value[1])+" "+s(a(w).formatMoney((k=r.value)==null?void 0:k.wait_money)),1)])]),t("div",Ht,[i(b,{type:"primary",block:"",plain:"",round:"",onClick:e[0]||(e[0]=m=>J())},{default:c(()=>[t("span",Jt,s(a(o)("wallet.withdraw")),1)]),_:1}),i(b,{type:"primary",round:"",onClick:e[1]||(e[1]=m=>A.value=!0),block:""},{default:c(()=>[t("span",Kt,s(a(o)("wallet.deposit")),1)]),_:1})]),t("div",Ot,[t("div",{class:"link-item",onClick:e[2]||(e[2]=m=>l.$router.push("bindCard"))},[t("div",Qt,[i(S,{name:"card-pos-2",size:"5vw"}),t("span",Xt,s(a(o)("wallet.bindBankCard")),1)]),i(L,{name:"arrow"})]),t("div",{class:"link-item",onClick:e[3]||(e[3]=m=>l.$router.push("paypassword"))},[t("div",Yt,[i(S,{name:"edit-password",size:"5vw"}),t("span",Zt,s(a(o)("wallet.changePaymentPassword")),1)]),i(L,{name:"arrow"})])])]),t("div",ts,[t("div",ss,s(a(o)("wallet.fundDetails")),1),t("div",es,[($(),Ct(X,{key:1,loading:y.value,"onUpdate:loading":e[4]||(e[4]=m=>y.value=m),finished:C.value,onLoad:E,"finished-text":a(o)("common.noMore")},{default:c(()=>[($(!0),F(G,null,Bt(M.value,m=>($(),F("div",{class:"record-item",onClick:Gs=>{T.value=!0,g.value=m}},[t("div",os,[e[16]||(e[16]=t("div",{class:"label"},null,-1)),t("div",ls,s(a(I).formatToMonthDay(m.create_time,1)),1)]),i(L,{name:"arrow"})],8,as))),256))]),_:1},8,["loading","finished","finished-text"]))])])]}),_:1},8,["modelValue"])]),i(P,{show:T.value,"onUpdate:show":e[6]||(e[6]=n=>T.value=n),position:"bottom",round:"",style:{height:"55%"}},{default:c(()=>{var n,p,v,k;return[t("div",ns,[t("div",is,s(a(o)("wallet.flowDetail.title")),1),t("div",ds,[t("div",rs,[t("div",cs,s(a(o)("wallet.flowDetail.id")),1),t("div",us,s((n=g.value)==null?void 0:n.id),1)]),t("div",_s,[t("div",ps,s(a(o)("wallet.flowDetail.time")),1),t("div",vs,s(a(I).formatToMonthDay((p=g.value)==null?void 0:p.create_time,1)),1)]),t("div",ms,[t("div",ws,s(a(o)("wallet.flowDetail.amount")),1),t("div",hs,s(u.value[1])+" "+s(a(w).formatMoney((v=g.value)==null?void 0:v.cha)),1)]),t("div",fs,[t("div",ys,s(a(o)("wallet.flowDetail.remarks")),1),t("div",gs,s((k=g.value)==null?void 0:k.remarks),1)])])])]}),_:1},8,["show"]),i(P,{show:B.value,"onUpdate:show":e[9]||(e[9]=n=>B.value=n),position:"bottom",round:"",style:{height:"95%"}},{default:c(()=>[t("div",bs,[t("div",ks,s(a(o)("wallet.paymentPassword.title")),1),t("div",xs,s(a(o)("wallet.paymentPassword.desc")),1),i(Z,{value:_.value,length:6},null,8,["value"]),i(tt,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=n=>_.value=n),show:!0},null,8,["modelValue"]),i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},disabled:U.value,onClick:e[8]||(e[8]=n=>R())},{default:c(()=>[t("span",Cs,s(a(o)("wallet.paymentPassword.confirm")),1)]),_:1},8,["disabled"])])]),_:1},8,["show"]),i(P,{show:D.value,"onUpdate:show":e[13]||(e[13]=n=>D.value=n),position:"bottom",round:"",style:{height:"50%"}},{default:c(()=>{var n;return[t("div",Bs,[t("div",Ds,s(a(o)("wallet.withdrawal.title")),1),t("div",Ps,[t("div",$s,s(a(o)("wallet.withdrawal.enterAmount")),1),t("div",Ms,[t("span",Ts,s(u.value[1]),1),i(st,{modelValue:f.value,"onUpdate:modelValue":e[10]||(e[10]=p=>f.value=p)},null,8,["modelValue"])]),t("div",As,[t("span",Us,s(a(o)("wallet.withdrawal.available"))+" "+s(u.value[1])+" "+s(a(w).formatMoney((n=r.value)==null?void 0:n.money)),1),t("span",{class:"all-text",onClick:e[11]||(e[11]=p=>{var v;return f.value=a(w).formatMoney((v=r.value)==null?void 0:v.money)})},s(a(o)("wallet.withdrawal.withdrawAll")),1)])]),t("div",Vs,[i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},disabled:V.value,onClick:e[12]||(e[12]=p=>R())},{default:c(()=>[t("span",Ss,s(a(o)("wallet.withdraw")),1)]),_:1},8,["disabled"])])])]}),_:1},8,["show"]),i(P,{show:A.value,"onUpdate:show":e[15]||(e[15]=n=>A.value=n),position:"bottom",round:"",style:{height:"60%"}},{default:c(()=>[t("div",Ls,[t("div",Fs,s(a(o)("wallet.depositTips.title")),1),e[17]||(e[17]=t("img",{class:"banner",width:"343",src:ht,alt:""},null,-1)),t("p",Is,s(a(o)("wallet.depositTips.text1")),1),t("p",Ns,s(a(o)("wallet.depositTips.text2")),1),t("p",zs,s(a(o)("wallet.depositTips.text3")),1),t("div",Es,[i(b,{type:"primary",round:"",block:"",style:{"margin-top":"2rem"},onClick:e[14]||(e[14]=n=>K(u.value[4][0].link))},{default:c(()=>[t("span",Rs,s(a(o)("wallet.depositTips.contactService")),1)]),_:1})])])]),_:1},8,["show"])],64)}}}),ae=Pt(Ws,[["__scopeId","data-v-da47a0d0"]]);export{ae as default};
