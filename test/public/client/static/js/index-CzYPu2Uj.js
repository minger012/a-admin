import{r as A,D as je,E as Re,q as $e,d as U,B as se,i as C,j as z,a as T,t as H,s as we,G as Be,H as Ke,v as Ue,m as qe,p as Ge,I as Je,J as Qe,K as pe,z as et,C as tt}from"./index-WR3xs2eA.js";import{a2 as me,a3 as _e,N as Pe,a4 as at,l as nt,a5 as ze,r as L,j as Ae,n as W,c as q,D as Oe,a6 as Ee,e as De,y as it,E as ye,a7 as ee,F as G,a8 as Te,G as Me,w as te,t as N,o as lt,C as He,f as ae,a9 as ot,aa as Le,ab as p,q as st,X as ve,m as he,k as be,i as rt,T as ct,ac as xe,ad as ut,ae as dt,b as Se,af as ft,d as Ne,p as Ce,a1 as vt,u as ht}from"./CpNavBar-Cv1K2dFx.js";import{u as We}from"./use-id-BIGbAVnO.js";import{T as gt}from"./use-tab-status-C4J5i1ER.js";function mt(e,o,r){let n,c=0;const t=e.scrollLeft,f=r===0?1:Math.round(r*1e3/16);let s=t;function h(){_e(n)}function g(){s+=(o-t)/f,e.scrollLeft=s,++c<f&&(n=me(g))}return g(),h}function bt(e,o,r,n){let c,t=Pe(e);const f=t<o,s=r===0?1:Math.round(r*1e3/16),h=(o-t)/s;function g(){_e(c)}function i(){t+=h,(f&&t>o||!f&&t<o)&&(t=o),at(e,t),f&&t<o||!f&&t>o?c=me(i):n&&(c=me(n))}return i(),g}function wt(){const e=A([]),o=[];return je(()=>{e.value=[]}),[e,n=>(o[n]||(o[n]=c=>{e.value[n]=c}),o[n])]}function Xe(e,o){if(!nt||!window.IntersectionObserver)return;const r=new IntersectionObserver(t=>{o(t[0].intersectionRatio>0)},{root:document.body}),n=()=>{e.value&&r.observe(e.value)},c=()=>{e.value&&r.unobserve(e.value)};Re(c),$e(c),ze(n)}const[yt,Tt]=q("sticky"),xt={zIndex:W,position:Ae("top"),container:Object,offsetTop:L(0),offsetBottom:L(0)};var St=U({name:yt,props:xt,emits:["scroll","change"],setup(e,{emit:o,slots:r}){const n=A(),c=Oe(n),t=se({fixed:!1,width:0,height:0,transform:0}),f=A(!1),s=C(()=>Ee(e.position==="top"?e.offsetTop:e.offsetBottom)),h=C(()=>{if(f.value)return;const{fixed:u,height:I,width:m}=t;if(u)return{width:`${m}px`,height:`${I}px`}}),g=C(()=>{if(!t.fixed||f.value)return;const u=De(it(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${s.value}px`});return t.transform&&(u.transform=`translate3d(0, ${t.transform}px, 0)`),u}),i=u=>o("scroll",{scrollTop:u,isFixed:t.fixed}),y=()=>{if(!n.value||ee(n))return;const{container:u,position:I}=e,m=G(n),k=Pe(window);if(t.width=m.width,t.height=m.height,I==="top")if(u){const v=G(u),O=v.bottom-s.value-t.height;t.fixed=s.value>m.top&&v.bottom>0,t.transform=O<0?O:0}else t.fixed=s.value>m.top;else{const{clientHeight:v}=document.documentElement;if(u){const O=G(u),w=v-O.top-s.value-t.height;t.fixed=v-s.value<m.bottom&&v>O.top,t.transform=w<0?-w:0}else t.fixed=v-s.value<m.bottom}i(k)};return z(()=>t.fixed,u=>o("change",u)),ye("scroll",y,{target:c,passive:!0}),Xe(n,y),z([Te,Me],()=>{!n.value||ee(n)||!t.fixed||(f.value=!0,H(()=>{const u=G(n);t.width=u.width,t.height=u.height,f.value=!1}))}),()=>{var u;return T("div",{ref:n,style:h.value},[T("div",{class:Tt({fixed:t.fixed&&!f.value}),style:g.value},[(u=r.default)==null?void 0:u.call(r)])])}}});const Ct=te(St),[Ye,le]=q("swipe"),It={loop:N,width:W,height:W,vertical:Boolean,autoplay:L(0),duration:L(500),touchable:N,lazyRender:Boolean,initialSwipe:L(0),indicatorColor:String,showIndicators:N,stopPropagation:N},Fe=Symbol(Ye);var kt=U({name:Ye,props:It,emits:["change","dragStart","dragEnd"],setup(e,{emit:o,slots:r}){const n=A(),c=A(),t=se({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let f=!1;const s=lt(),{children:h,linkChildren:g}=He(Fe),i=C(()=>h.length),y=C(()=>t[e.vertical?"height":"width"]),u=C(()=>e.vertical?s.deltaY.value:s.deltaX.value),I=C(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-y.value*i.value:0),m=C(()=>y.value?Math.ceil(Math.abs(I.value)/y.value):i.value),k=C(()=>i.value*y.value),v=C(()=>(t.active+i.value)%i.value),O=C(()=>{const l=e.vertical?"vertical":"horizontal";return s.direction.value===l}),w=C(()=>{const l={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(y.value){const x=e.vertical?"height":"width",S=e.vertical?"width":"height";l[x]=`${k.value}px`,l[S]=e[S]?`${e[S]}px`:""}return l}),F=l=>{const{active:x}=t;return l?e.loop?ve(x+l,-1,i.value):ve(x+l,0,m.value):x},Z=(l,x=0)=>{let S=l*y.value;e.loop||(S=Math.min(S,-I.value));let _=x-S;return e.loop||(_=ve(_,I.value,0)),_},$=({pace:l=0,offset:x=0,emitChange:S})=>{if(i.value<=1)return;const{active:_}=t,a=F(l),d=Z(a,x);if(e.loop){if(h[0]&&d!==I.value){const b=d<I.value;h[0].setOffset(b?k.value:0)}if(h[i.value-1]&&d!==0){const b=d>0;h[i.value-1].setOffset(b?-k.value:0)}}t.active=a,t.offset=d,S&&a!==_&&o("change",v.value)},M=()=>{t.swiping=!0,t.active<=-1?$({pace:i.value}):t.active>=i.value&&$({pace:-i.value})},X=()=>{M(),s.reset(),p(()=>{t.swiping=!1,$({pace:-1,emitChange:!0})})},J=()=>{M(),s.reset(),p(()=>{t.swiping=!1,$({pace:1,emitChange:!0})})};let Y;const B=()=>clearTimeout(Y),V=()=>{B(),+e.autoplay>0&&i.value>1&&(Y=setTimeout(()=>{J(),V()},+e.autoplay))},E=(l=+e.initialSwipe)=>{if(!n.value)return;const x=()=>{var S,_;if(!ee(n)){const a={width:n.value.offsetWidth,height:n.value.offsetHeight};t.rect=a,t.width=+((S=e.width)!=null?S:a.width),t.height=+((_=e.height)!=null?_:a.height)}i.value&&(l=Math.min(i.value-1,l),l===-1&&(l=i.value-1)),t.active=l,t.swiping=!0,t.offset=Z(l),h.forEach(a=>{a.setOffset(0)}),V()};ee(n)?H().then(x):x()},j=()=>E(t.active);let Q;const re=l=>{!e.touchable||l.touches.length>1||(s.start(l),f=!1,Q=Date.now(),B(),M())},ce=l=>{e.touchable&&t.swiping&&(s.move(l),O.value&&(!e.loop&&(t.active===0&&u.value>0||t.active===i.value-1&&u.value<0)||(st(l,e.stopPropagation),$({offset:u.value}),f||(o("dragStart",{index:v.value}),f=!0))))},ne=()=>{if(!e.touchable||!t.swiping)return;const l=Date.now()-Q,x=u.value/l;if((Math.abs(x)>.25||Math.abs(u.value)>y.value/2)&&O.value){const _=e.vertical?s.offsetY.value:s.offsetX.value;let a=0;e.loop?a=_>0?u.value>0?-1:1:0:a=-Math[u.value>0?"ceil":"floor"](u.value/y.value),$({pace:a,emitChange:!0})}else u.value&&$({pace:0});f=!1,t.swiping=!1,o("dragEnd",{index:v.value}),V()},ue=(l,x={})=>{M(),s.reset(),p(()=>{let S;e.loop&&l===i.value?S=t.active===0?0:l:S=l%i.value,x.immediate?p(()=>{t.swiping=!1}):t.swiping=!1,$({pace:S-t.active,emitChange:!0})})},de=(l,x)=>{const S=x===v.value,_=S?{backgroundColor:e.indicatorColor}:void 0;return T("i",{style:_,class:le("indicator",{active:S})},null)},fe=()=>{if(r.indicator)return r.indicator({active:v.value,total:i.value});if(e.showIndicators&&i.value>1)return T("div",{class:le("indicators",{vertical:e.vertical})},[Array(i.value).fill("").map(de)])};return ae({prev:X,next:J,state:t,resize:j,swipeTo:ue}),g({size:y,props:e,count:i,activeIndicator:v}),z(()=>e.initialSwipe,l=>E(+l)),z(i,()=>E(t.active)),z(()=>e.autoplay,V),z([Te,Me,()=>e.width,()=>e.height],j),z(ot(),l=>{l==="visible"?V():B()}),we(E),Be(()=>E(t.active)),Le(()=>E(t.active)),Re(B),$e(B),ye("touchmove",ce,{target:c}),()=>{var l;return T("div",{ref:n,class:le()},[T("div",{ref:c,style:w.value,class:le("track",{vertical:e.vertical}),onTouchstartPassive:re,onTouchend:ne,onTouchcancel:ne},[(l=r.default)==null?void 0:l.call(r)]),fe()])}}});const Rt=te(kt),[$t,Ie]=q("tabs");var Bt=U({name:$t,props:{count:he(Number),inited:Boolean,animated:Boolean,duration:he(W),swipeable:Boolean,lazyRender:Boolean,currentIndex:he(Number)},emits:["change"],setup(e,{emit:o,slots:r}){const n=A(),c=s=>o("change",s),t=()=>{var s;const h=(s=r.default)==null?void 0:s.call(r);return e.animated||e.swipeable?T(Rt,{ref:n,loop:!1,class:Ie("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:c},{default:()=>[h]}):h},f=s=>{const h=n.value;h&&h.state.active!==s&&h.swipeTo(s,{immediate:!e.inited})};return z(()=>e.currentIndex,f),we(()=>{f(e.currentIndex)}),ae({swipeRef:n}),()=>T("div",{class:Ie("content",{animated:e.animated||e.swipeable})},[t()])}});const[Ze,oe]=q("tabs"),_t={type:Ae("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:L(0),duration:L(.3),animated:Boolean,ellipsis:N,swipeable:Boolean,scrollspy:Boolean,offsetTop:L(0),background:String,lazyRender:N,showHeader:N,lineWidth:W,lineHeight:W,beforeChange:Function,swipeThreshold:L(5),titleActiveColor:String,titleInactiveColor:String},Ve=Symbol(Ze);var Pt=U({name:Ze,props:_t,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:o,slots:r}){let n,c,t,f,s;const h=A(),g=A(),i=A(),y=A(),u=We(),I=Oe(h),[m,k]=wt(),{children:v,linkChildren:O}=He(Ve),w=se({inited:!1,position:"",lineStyle:{},currentIndex:-1}),F=C(()=>v.length>+e.swipeThreshold||!e.ellipsis||e.shrink),Z=C(()=>({borderColor:e.color,background:e.background})),$=(a,d)=>{var b;return(b=a.name)!=null?b:d},M=C(()=>{const a=v[w.currentIndex];if(a)return $(a,w.currentIndex)}),X=C(()=>Ee(e.offsetTop)),J=C(()=>e.sticky?X.value+n:0),Y=a=>{const d=g.value,b=m.value;if(!F.value||!d||!b||!b[w.currentIndex])return;const P=b[w.currentIndex].$el,R=P.offsetLeft-(d.offsetWidth-P.offsetWidth)/2;f&&f(),f=mt(d,R,a?0:+e.duration)},B=()=>{const a=w.inited;H(()=>{const d=m.value;if(!d||!d[w.currentIndex]||e.type!=="line"||ee(h.value))return;const b=d[w.currentIndex].$el,{lineWidth:P,lineHeight:R}=e,D=b.offsetLeft+b.offsetWidth/2,K={width:Se(P),backgroundColor:e.color,transform:`translateX(${D}px) translateX(-50%)`};if(a&&(K.transitionDuration=`${e.duration}s`),be(R)){const ie=Se(R);K.height=ie,K.borderRadius=ie}w.lineStyle=K})},V=a=>{const d=a<w.currentIndex?-1:1;for(;a>=0&&a<v.length;){if(!v[a].disabled)return a;a+=d}},E=(a,d)=>{const b=V(a);if(!be(b))return;const P=v[b],R=$(P,b),D=w.currentIndex!==null;w.currentIndex!==b&&(w.currentIndex=b,d||Y(),B()),R!==e.active&&(o("update:active",R),D&&o("change",R,P.title)),t&&!e.scrollspy&&ct(Math.ceil(xe(h.value)-X.value))},j=(a,d)=>{const b=v.find((R,D)=>$(R,D)===a),P=b?v.indexOf(b):0;E(P,d)},Q=(a=!1)=>{if(e.scrollspy){const d=v[w.currentIndex].$el;if(d&&I.value){const b=xe(d,I.value)-J.value;c=!0,s&&s(),s=bt(I.value,b,a?0:+e.duration,()=>{c=!1})}}},re=(a,d,b)=>{const{title:P,disabled:R}=v[d],D=$(v[d],d);R||(ut(e.beforeChange,{args:[D],done:()=>{E(d),Q()}}),dt(a)),o("clickTab",{name:D,title:P,event:b,disabled:R})},ce=a=>{t=a.isFixed,o("scroll",a)},ne=a=>{H(()=>{j(a),Q(!0)})},ue=()=>{for(let a=0;a<v.length;a++){const{top:d}=G(v[a].$el);if(d>J.value)return a===0?0:a-1}return v.length-1},de=()=>{if(e.scrollspy&&!c){const a=ue();E(a)}},fe=()=>{if(e.type==="line"&&v.length)return T("div",{class:oe("line"),style:w.lineStyle},null)},l=()=>{var a,d,b;const{type:P,border:R,sticky:D}=e,K=[T("div",{ref:D?void 0:i,class:[oe("wrap"),{[rt]:P==="line"&&R}]},[T("div",{ref:g,role:"tablist",class:oe("nav",[P,{shrink:e.shrink,complete:F.value}]),style:Z.value,"aria-orientation":"horizontal"},[(a=r["nav-left"])==null?void 0:a.call(r),v.map(ie=>ie.renderTitle(re)),fe(),(d=r["nav-right"])==null?void 0:d.call(r)])]),(b=r["nav-bottom"])==null?void 0:b.call(r)];return D?T("div",{ref:i},[K]):K},x=()=>{B(),H(()=>{var a,d;Y(!0),(d=(a=y.value)==null?void 0:a.swipeRef.value)==null||d.resize()})};z(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],B),z(Te,x),z(()=>e.active,a=>{a!==M.value&&j(a)}),z(()=>v.length,()=>{w.inited&&(j(e.active),B(),H(()=>{Y(!0)}))});const S=()=>{j(e.active,!0),H(()=>{w.inited=!0,i.value&&(n=G(i.value).height),Y(!0)})},_=(a,d)=>o("rendered",a,d);return ae({resize:x,scrollTo:ne}),Be(B),Le(B),ze(S),Xe(h,B),ye("scroll",de,{target:I,passive:!0}),O({id:u,props:e,setLine:B,scrollable:F,onRendered:_,currentName:M,setTitleRefs:k,scrollIntoView:Y}),()=>T("div",{ref:h,class:oe([e.type])},[e.showHeader?e.sticky?T(Ct,{container:h.value,offsetTop:X.value,onScroll:ce},{default:()=>[l()]}):l():null,T(Bt,{ref:y,count:v.length,inited:w.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:w.currentIndex,onChange:E},{default:()=>{var a;return[(a=r.default)==null?void 0:a.call(r)]}})])}});const[zt,ke]=q("tab"),At=U({name:zt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:W,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:N},setup(e,{slots:o}){const r=C(()=>{const c={},{type:t,color:f,disabled:s,isActive:h,activeColor:g,inactiveColor:i}=e;f&&t==="card"&&(c.borderColor=f,s||(h?c.backgroundColor=f:c.color=f));const u=h?g:i;return u&&(c.color=u),c}),n=()=>{const c=T("span",{class:ke("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||be(e.badge)&&e.badge!==""?T(ft,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[c]}):c};return()=>T("div",{id:e.id,role:"tab",class:[ke([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:r.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[n()])}}),[Ot,Et]=q("swipe-item");var Dt=U({name:Ot,setup(e,{slots:o}){let r;const n=se({offset:0,inited:!1,mounted:!1}),{parent:c,index:t}=Ne(Fe);if(!c)return;const f=C(()=>{const g={},{vertical:i}=c.props;return c.size.value&&(g[i?"height":"width"]=`${c.size.value}px`),n.offset&&(g.transform=`translate${i?"Y":"X"}(${n.offset}px)`),g}),s=C(()=>{const{loop:g,lazyRender:i}=c.props;if(!i||r)return!0;if(!n.mounted)return!1;const y=c.activeIndicator.value,u=c.count.value-1,I=y===0&&g?u:y-1,m=y===u&&g?0:y+1;return r=t.value===y||t.value===I||t.value===m,r}),h=g=>{n.offset=g};return we(()=>{H(()=>{n.mounted=!0})}),ae({setOffset:h}),()=>{var g;return T("div",{class:Et(),style:f.value},[s.value?(g=o.default)==null?void 0:g.call(o):null])}}});const Mt=te(Dt),[Ht,ge]=q("tab"),Lt=De({},vt,{dot:Boolean,name:W,badge:W,title:String,disabled:Boolean,titleClass:ht,titleStyle:[String,Object],showZeroBadge:N});var Nt=U({name:Ht,props:Lt,setup(e,{slots:o}){const r=We(),n=A(!1),c=Ge(),{parent:t,index:f}=Ne(Ve);if(!t)return;const s=()=>{var m;return(m=e.name)!=null?m:f.value},h=()=>{n.value=!0,t.props.lazyRender&&H(()=>{t.onRendered(s(),e.title)})},g=C(()=>{const m=s()===t.currentName.value;return m&&!n.value&&h(),m}),i=A(""),y=A("");Ke(()=>{const{titleClass:m,titleStyle:k}=e;i.value=m?Je(m):"",y.value=k&&typeof k!="string"?Qe(pe(k)):k});const u=m=>T(At,qe({key:r,id:`${t.id}-${f.value}`,ref:t.setTitleRefs(f.value),style:y.value,class:i.value,isActive:g.value,controls:r,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:k=>m(c.proxy,f.value,k)},Ce(t.props,["type","color","shrink"]),Ce(e,["dot","badge","title","disabled","showZeroBadge"])),{title:o.title}),I=A(!g.value);return z(g,m=>{m?I.value=!1:p(()=>{I.value=!0})}),z(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),tt(gt,g),ae({id:r,renderTitle:u}),()=>{var m;const k=`${t.id}-${f.value}`,{animated:v,swipeable:O,scrollspy:w,lazyRender:F}=t.props;if(!o.default&&!v)return;const Z=w||g.value;if(v||O)return T(Mt,{id:r,role:"tabpanel",class:ge("panel-wrapper",{inactive:I.value}),tabindex:g.value?0:-1,"aria-hidden":!g.value,"aria-labelledby":k,"data-allow-mismatch":"attribute"},{default:()=>{var X;return[T("div",{class:ge("panel")},[(X=o.default)==null?void 0:X.call(o)])]}});const M=n.value||w||!F?(m=o.default)==null?void 0:m.call(o):null;return Ue(T("div",{id:r,role:"tabpanel",class:ge("panel"),tabindex:Z?0:-1,"aria-labelledby":k,"data-allow-mismatch":"attribute"},[M]),[[et,Z]])}}});const Zt=te(Nt),Vt=te(Pt);export{Vt as T,Zt as a};
